<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Getting Started with Peer-to-Peer Sync on Xamarin (UWP, iOS, and Android) | Couchbase Docs</title>
<link rel="canonical" href="http://127.0.0.1:5000/tutorials/cbl-p2p-sync-websockets/dotnet/cbl-p2p-sync-websockets.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="tutorials">
<meta name="dcterms.identifier" content="master">
<meta name="page-url" content="/tutorials/cbl-p2p-sync-websockets/dotnet/cbl-p2p-sync-websockets.html">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="http://127.0.0.1:5000/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="http://127.0.0.1:5000/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile Local
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../index.html">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
<div class="components">
  <div class="components_group-title">
    <a href="../../index.html">Tutorials</a>
  </div>
  <ul class="components_list">
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Tutorials</span>
      </div>
      <div class="version_items hide" data-version="master">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Server</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#:session-storage:partial$nav.adoc">:session-storage:partial$nav.adoc</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">User Profile Storage
Unresolved include directive in modules/ROOT/nav.adoc - include::profile-store:partial$nav.adoc[]</span>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Mobile</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Mobile Workshop</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/introduction.html">Introduction</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Swift</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/develop/mvp-architecture.html">MVP Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/swift/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Android-Java</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/develop/mvp-architecture.html">MVP Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/android/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Java</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/develop/mvp-architecture.html">MVP Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/java/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">C#</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/develop/mvvm-architecture.html">MVVM Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../mobile-travel-tutorial/csharp/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on iOS</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../userprofile-standalone/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../userprofile-query/userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../userprofile-sync/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Xamarin</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../userprofile-standalone-xamarin/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../userprofile-query-xamarin/userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../userprofile-sync-xamarin/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Android</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#userprofile-standalone-android:userprofile_basic.adoc">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#userprofile-query-android:userprofile_query.adoc">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../userprofile-sync-android/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started with Peer-to-Peer Sync</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../swift/cbl-p2p-sync-websockets.html">iOS/Swift</a>
  </span>
</li>
<li class="menu_list is-current-page" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="cbl-p2p-sync-websockets.html">Xamarin/C#</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Build Your Own</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">Tutorial Template
Unresolved include directive in modules/ROOT/nav.adoc - include::tutorial-template:partial$nav.adoc[]</span>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
  </ul>
</div>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2@">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbaselabs/couchbase-lite-peer-to-peer-sync-examples/edit/master/content/modules/cbl-p2p-sync-websockets/pages/dotnet/cbl-p2p-sync-websockets.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../index.html">Tutorials</a></li>
<li class="crumb">Couchbase Mobile</li>
<li class="crumb">Getting Started with Peer-to-Peer Sync</li>
<li class="crumb"><a href="cbl-p2p-sync-websockets.html">Xamarin/C#</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Getting Started with Peer-to-Peer Sync on Xamarin (UWP, iOS, and Android)</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<!-- toc disabled -->
<div class="quoteblock abstract">
<blockquote>
This tutorial uses a simple inventory tracker app to demonstrate Couchbase Lite&#8217;s peer-to-peer database sync functionality.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Lite <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> provides out-of-the-box support for secure <a href="../../../couchbase-lite/current/csharp/p2psync-websocket.html" class="page">Peer-to-Peer Sync</a>, over websockets.
The sync, between Couchbase Lite enabled clients in IP-based networks, does not require a centralized control point.
You do not need a Sync Gateway or Couchbase Server to get peer-to-peer database sync going.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">What You Will Learn</div>
<div class="paragraph">
<p>We will be using a simple inventory app as an example to demonstrate the peer-to-peer functionality, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How to use a UDP type socket to listen on a specified port for peer discovery.
Broadcast its own IP address over UDP type socket.</p>
</li>
<li>
<p>How to configure a websockets listener to listen to incoming requests.
We will walk through various TLS modes and client authentication modes.</p>
</li>
<li>
<p>How to start a bi-directional replication from active peer.</p>
</li>
<li>
<p>How to sync data between connected peers</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need to add the UWP app to the Exception list on the Windows Firewall.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Throughout this tutorial, these terms are used interchangeably:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"passive peer", "server" and "listener" all refer to the peer on which the websocket listener is started</p>
</li>
<li>
<p>"active peer" and "client" both refer to the peer on which the replicator is initialized.</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>You can learn more about Couchbase Lite
<a href="../../../couchbase-lite/current/index.html" class="page">here</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial assumes familiarity with building Xamarin apps with Visual Studio and with Couchbase Lite.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Visual Studio 2019
(Download it from the
<a href="https://visualstudio.microsoft.com/downloads/">Microsoft Website</a>)
with:</p>
<div class="ulist">
<ul>
<li>
<p>Universal Windows Platform component installed</p>
</li>
<li>
<p>Xamarin component installed (for Android and iOS development).</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you are unfamiliar with the basics of Couchbase Lite, it is recommended that you follow the
<a href="../../../couchbase-lite/current/csharp/gs-install.html" class="page">Getting Started</a>
guides</p>
</li>
<li>
<p>Wi-Fi network that the peers can communicate over<br>
You could run your peers in multiple simulators.
But if you were running the app on real devices, you will need to ensure that the devices are on the same Wi-Fi network.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="app-overview"><a class="anchor" href="#app-overview"></a>App Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a simple inventory app that can be used as a
<a href="../../../couchbase-lite/current/csharp/p2psync-websocket-using-passive.html" class="page">passive</a> or
<a href="../../../couchbase-lite/current/csharp/p2psync-websocket-using-active.html" class="page">active</a> peer.</p>
</div>
<div class="paragraph">
<p>The app uses a local database that is pre-populated with data.
There is no Sync Gateway or Couchbase Server installed.</p>
</div>
<div class="paragraph">
<p>When used as a passive peer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users log in and start websockets listener for the couchbase lite database.<br>
The Listener IP endpoint is advertised over UDP type socket when users enter the <code>ListenerPage</code>.</p>
</li>
<li>
<p>View the status of connected clients</p>
</li>
<li>
<p>Directly sync data with connected clients.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When used as an active peer, users can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in and enter the <code>ListenersBrowserPage</code> to start browsing for peers</p>
</li>
<li>
<p>Connect to a listener</p>
</li>
<li>
<p>Directly sync data with connected clients.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="app-installation"><a class="anchor" href="#app-installation"></a>App Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Clone the repo</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone https://github.com/couchbaselabs/couchbase-lite-peer-to-peer-sync-examples</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="exercise"><a class="anchor" href="#exercise"></a>Exercise</h3>
<div id="tryit5" class="sidebarblock">
<div class="content">
<div class="title">Try it Out</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the Xamarin .NET project using Visual Studio</p>
</li>
<li>
<p>Build and run the project<br>
If you are running Android apps on emulators, please see <a href="#connecting-to-an-android-emulator">Connecting to an Android emulator</a></p>
</li>
<li>
<p>Verify that you see the login screen</p>
</li>
<li>
<p>If you are having trouble running the Xamarin iOS sample app, please see <a href="#having-issue-running-the-xamarin-ios-app">Having issue running the Xamarin iOS app?</a></p>
<div class="imageblock">
<div class="content">
<img src="../_images/cs-login.png" alt="app login screen" width="640" height="537">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/xamarin-demo.gif" alt="peer to peer sync">
</div>
<div class="title">Figure 1. The app in action</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exploring-the-app-project"><a class="anchor" href="#exploring-the-app-project"></a>Exploring the App Project</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>The Xamarin .NET project comes pre-bundled with some resource files that we will examine here.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/cs-project-explorer.png" alt="xcode project explorer" width="640" height="480">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>userdb.cblite2.zip</code> :<br>
A zip file containing a prebuilt Couchbase Lite database.
It includes the data for a single document. See <a href="#data-model">Data Model</a></p>
</li>
<li>
<p><code>userallowlist.json</code> :<br>
List of valid client users (and passwords) in the system.
This list is looked up when the server tries to authenticate credentials associated with incoming connection request.</p>
</li>
<li>
<p><code>listener-cert-pkey.p12</code> :<br>
This is
<a href="https://en.wikipedia.org/wiki/PKCS_12">PKCS12</a>
file archive that includes a public key cert corresponding to the listener and associated private key.
The cert is a sample cert that was generated using
<a href="https://www.openssl.org">OpenSSL</a>
tool.</p>
</li>
<li>
<p><code>listener-pinned-cert.cer</code> :<br>
This is the public key listener cert (the same cert that is embedded in the <code>listener-cert-pkey.p12</code> file) in DER encoded format.
This cert is pinned on the client replicator and is used for validating server cert during connection setup.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-model"><a class="anchor" href="#data-model"></a>Data Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Lite is a JSON Document Store.
A Document is a logical collection of named fields and values.
The values are any valid JSON types.
In addition to the standard JSON types, Couchbase Lite supports some special types like <code>Date</code> and <code>Blob</code>.
While it is not required or enforced, it is a recommended practice to include a <em>"type"</em> property that can serve as a namespace for related.</p>
</div>
<div class="sect2">
<h3 id="the-list-document"><a class="anchor" href="#the-list-document"></a>The "List" Document</h3>
<div class="paragraph">
<p>The app deals with a single Document with a <em>"type"</em> property of <em>"list"</em>.</p>
</div>
<div class="paragraph">
<p>An example of a document would be</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "type":"list",
    "list":[
      {
         "image":{"length":16608,"digest":"sha1-LEFKeUfywGIjASSBa0l/cg5rlm8=","content_type":"image/jpeg","@type":"blob"},
          "value":10,
          "key":"Apples"
      },
      {
        "image":{"length":16608,"digest":"sha1-LEFKeUsswGIjASssSBa0l/cg5rlm8=","content_type":"image/jpeg","@type":"blob"},
        "value":110,
        "key":"oranges"
       }
    ]

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="initializing-local-database"><a class="anchor" href="#initializing-local-database"></a>Initializing Local Database</h3>
<div class="paragraph">
<p>The app extracts a prebuilt database zip file named <code>userdb.cblite2.zip</code> into <code>DBPath</code> the first time the database is created.
This is done regardless of whether the app is launched in passive or active mode.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>CoreApp.cs</strong> file and locate the <code>LoadAndInitDB</code> method.<br>
This method extracts the Couchbase Lite database into <code>DBPath</code> for the user (if one does not already exist).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">if (!Database.Exists(DbName, DBPath)) {
    using (var dbZip = new ZipArchive(ResourceLoader.GetEmbeddedResourceStream(typeof(CoreApp).GetTypeInfo().Assembly, $"{DbName}.cblite2.zip"))) {
        dbZip.ExtractToDirectory(DBPath);
    }
}

DB = new Database(DbName, new DatabaseConfiguration() { Directory = DBPath });</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>SeasonalItemsViewModel.cs</strong> file and locate the <code>SeasonalItemsViewModel</code> constructor.<br>
It creates a LiveQuery to pick up document changes in the inventory list array when the ViewModel loads the first time.
Each array item contains a dictionary with three key value pairs.
Their keys are <code>key</code>, <code>value</code>, and <code>image</code>.
Their values are mapped to the properties <code>Name</code>, <code>Quantity</code>, and <code>Image</code> in .NET Object <code>SeasonalItem</code>.
The <code>image</code> property holds a blob entry to an image.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">var q = QueryBuilder.Select(SelectResult.All())
    .From(DataSource.Database(_db))
    .Where(Meta.ID.EqualTo(Expression.String(CoreApp.DocId)))
    .AddChangeListener((sender, args) =&gt;
    {
        var allResult = args.Results.AllResults();
        var result = allResult[0];
        var dict = result[CoreApp.DB.Name].Dictionary;
        var arr = dict.GetArray(CoreApp.ArrKey);

        if (arr.Count &lt; Items.Count)
            Items = new ObservableConcurrentDictionary&lt;int, SeasonalItem&gt;();

        Parallel.For(0, arr.Count, i =&gt;
        {
            var item = arr[i].Dictionary;
            var name = item.GetString("key");
            var cnt = item.GetInt("value");
            var image = item.GetBlob("image");

            if (_items.ContainsKey(i)) {
                _items[i].Name = name;
                _items[i].Quantity = cnt;
                _items[i].ImageByteArray = image?.Content;
            } else {
                var seasonalItem = new SeasonalItem {
                    Index = i,
                    Name = name,
                    Quantity = cnt,
                    ImageByteArray = image?.Content
                };

                _items.Add(i, seasonalItem);
            }

        });
    });</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="passive-peer-or-server"><a class="anchor" href="#passive-peer-or-server"></a>Passive Peer or Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we will walk through the steps of using the app in passive peer mode.</p>
</div>
<div class="sect2">
<h3 id="initializing-websocket-listener"><a class="anchor" href="#initializing-websocket-listener"></a>Initializing Websocket Listener</h3>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>ListenerViewModel.cs</strong> file and locate the <code>CreateListener</code> function.<br>
This is where the websocket listener for peer-to-peer sync is initialized.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">var listenerConfig = new URLEndpointListenerConfiguration(_db); <i class="conum" data-value="1"></i><b>(1)</b>
listenerConfig.NetworkInterface = GetLocalIPv4(NetworkInterfaceType.Wireless80211) ?? GetLocalIPv4(NetworkInterfaceType.Ethernet);
//listenerConfig.Port = 0; // Dynamic port
listenerConfig.Port = 35262; // Fixed port

switch (CoreApp.ListenerTLSMode) { <i class="conum" data-value="2"></i><b>(2)</b>
    case LISTENER_TLS_MODE.DISABLED:
        listenerConfig.DisableTLS = true;
        listenerConfig.TlsIdentity = null;
        break;
    case LISTENER_TLS_MODE.WITH_ANONYMOUS_AUTH:
        listenerConfig.DisableTLS = false; // Use with anonymous self signed cert if TlsIdentity is null
        listenerConfig.TlsIdentity = null;
        break;
    case LISTENER_TLS_MODE.WITH_BUNDLED_CERT:
        listenerConfig.DisableTLS = false;
        listenerConfig.TlsIdentity = ImportTLSIdentityFromPkc12(ListenerCertLabel);
        break;
    case LISTENER_TLS_MODE.WITH_GENERATED_SELF_SIGNED_CERT:
        listenerConfig.DisableTLS = false;
        listenerConfig.TlsIdentity = CreateIdentityWithCertLabel(ListenerCertLabel);
        break;
}

listenerConfig.EnableDeltaSync = true; <i class="conum" data-value="3"></i><b>(3)</b>

if (CoreApp.RequiresUserAuth) { <i class="conum" data-value="4"></i><b>(4)</b>
    listenerConfig.Authenticator = new ListenerPasswordAuthenticator((sender, username, password) =&gt;
    {
        // ** This is only a sample app to use an existing users credential shared cross platforms.
        //    Developers should use SecureString password properly.
        var found = CoreApp.AllowedUsers.Where(u =&gt; username == u.Username &amp;&amp; new NetworkCredential(string.Empty, password).Password == u.Password).SingleOrDefault();
        return found != null;
    });
}

_urlEndpointListener = new URLEndpointListener(listenerConfig);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Initialize the <code>URLEndpointListenerConfiguration</code> for the specified database.
There is a listener for a given database.
You can specify a port to be associated with the listener, or let Couchbase Lite choose the port.
We have hard-coded 35262 (in <code>SeasonalItemsViewModel.cs</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is where we configure the TLS mode.
In the app, we have a flag named <code>ListenerTLSMode</code> that allows the app to switch between the various modes.
You can change the mode by changing the value of the variable.
See <a href="#testing-different-tls-modes">Testing Different TLS Modes</a></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Enable delta sync.
It is disabled by default</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Configure the password authenticator callback function.
This function authenticates the username/password received from the client during replication setup.
The list of valid users are configured in <code>userallowlist.json</code> file bundled with the app</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="testing-different-tls-modes"><a class="anchor" href="#testing-different-tls-modes"></a>Testing Different TLS Modes</h4>
<div class="paragraph">
<p>The app can be configured to test different TLS modes as follows by setting the <code>ListenerTLSMode</code> property in the <code>CoreApp.cs</code> file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">public static LISTENER_CERT_VALIDATION_MODE ListenerCertValidationMode = LISTENER_CERT_VALIDATION_MODE.SKIP_VALIDATION;</code></pre>
</div>
</div>
<table id="tlsmodes" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. TLS Modes on Listener</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ListenerTLSMode Value</th>
<th class="tableblock halign-left valign-top">Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DISABLED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is no TLS.
All communication is plaintext (insecure mode and not recommended in production)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WITH_ANONYMOUS_AUTH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The app uses self-signed cert that is auto-generated by Couchbase Lite as <code>TLSIdentity</code> of the server.
While server authentication is skipped, all communication is still encrypted.
This is the default mode of Couchbase Lite.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WITH_BUNDLED_CERT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The app generates <code>TLSIdentity</code> of the server from  public key cert and private key bundled in the <code>listener-cert-pkey.p12</code> archive.
Communication is encrypted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WITH_GENERATED_SELF_SIGNED_CERT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The app uses Couchbase Lite <code>CreateIdentity</code> convenience API to generate the <code>TLSIdentity</code> of the server.
Communication is encrypted</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="start-websocket-listener"><a class="anchor" href="#start-websocket-listener"></a>Start Websocket Listener</h3>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>ListenerViewModel.cs</strong> file and locate the <code>ExecuteStartListenerCommand</code> method.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">_urlEndpointListener.Start();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advertising-listener-service"><a class="anchor" href="#advertising-listener-service"></a>Advertising Listener Service</h3>
<div class="paragraph">
<p>In the app, we broadcast listener&#8217;s IP endpoint over UDP type socket.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>ListenerViewModel.cs</strong> file and look for <code>Broadcast</code> method.+
Here, we create a Socket with Udp ProtocolType and broadcast listener&#8217;s IP endpoint to the peers are listening in local network.<br>
Please note, this App requires peers to start peer discovery before listener start broadcasting.
Otherwise, you will have to manually broadcast the listener IP. Please see <a href="#tryit10">Try it out</a> for detail.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">public void Broadcast()
{
    if (!IsListening)
        return;

    using (var socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, System.Net.Sockets.ProtocolType.Udp)) {
        socket.EnableBroadcast = true;
        var group = new IPEndPoint(IPAddress.Broadcast, CoreApp.UdpPort);
        var hi = Encoding.ASCII.GetBytes($"{CoreApp.Guid}:{_urlEndpointListener.Urls[0].Host}:{_urlEndpointListener.Port}");
        socket.SendTo(hi, group);

        socket.Close();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="stop-websocket-listener"><a class="anchor" href="#stop-websocket-listener"></a>Stop Websocket Listener</h3>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>ListenerViewModel.cs</strong> file and locate the <code>ExecuteStartListenerCommand</code> method.+
You can stop the listener after the listener is started.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">_urlEndpointListener.Stop();
_urlEndpointListener.Dispose();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercise-2"><a class="anchor" href="#exercise-2"></a>Exercise</h3>
<div id="tryit10" class="sidebarblock">
<div class="content">
<div class="title">Try it out</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the app on a simulator or a real device.
If it is the latter, make sure you sign your app with the appropriate developer certificate</p>
</li>
<li>
<p>On the login screen, sign in as any one of the users configured in the <code>userallowlist.json</code> file, such as "bob" and "password"</p>
</li>
<li>
<p>You can find 4 selections (<code>What&#8217;s in Season?</code>, <code>Listener</code>, <code>Browser</code>, and <code>Logout</code>) under the "hamburger" menu located on the upper left hand side.</p>
</li>
<li>
<p>From the <code>ListenerPage</code>, select <code>Listener</code> from the "hamburger" menu, start the listener by clicking on "Start Listener" button</p>
</li>
<li>
<p>You can see 2 toolbar items (<code>Broadcast</code> and <code>Peers</code>)<br>
Note: These two items will do nothing if listener is not started.</p>
</li>
<li>
<p>Click on the "Peers" toolbar item to see the number of connected clients. It should be zero if there are no connected clients</p>
</li>
<li>
<p>If you don&#8217;t see your listener&#8217;s IP endpoint showing up on a peers' <code>ListenersBrowserPage</code>, click on the listener&#8217;s "Broadcast" toolbar item to broadcast its IP endpoint</p>
</li>
<li>
<p>From the <code>ListenerPage</code>, stop the listener by clicking on "Stop Listener" button</p>
</li>
</ol>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/xamarin-passive-start-listener.gif" alt="server websocket listener login screen">
</div>
<div class="title">Figure 2. App in action - start passive peer</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="active-peer-or-client"><a class="anchor" href="#active-peer-or-client"></a>Active Peer or Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will walk through the steps of using the app in active peer mode</p>
</div>
<div class="sect2">
<h3 id="discovering-listeners"><a class="anchor" href="#discovering-listeners"></a>Discovering Listeners</h3>
<div class="paragraph">
<p>In the app, we use UDP Type Socket to listen on port 15000 for listener.<br>
Please note, port 15000 is used by UDP Type Socket, not used by the websocket listener.+
Couchbase Lite chooses the port when a websocket listener is created.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>ListenersBrowserViewModel.cs</strong> file and look for <code>ListenersBrowserViewModel</code> constructor.<br>
Here, we create a <code>UdpListener</code> with the port it listens on and pick up any raised Udp packet received event (Listener&#8217;s broadcasting IP endpoint).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">{
    Title = "Browser";
    Items = new ObservableCollection&lt;ReplicatorItem&gt;();

    _discovery = new UdpListener(CoreApp.UdpPort);
    _discovery.UdpPacketReceived += DiscoveryOnUdpPacketReceived;
    _discovery.Start();
}

#region discover event
private void DiscoveryOnUdpPacketReceived(object sender, UdpPacketReceivedEventArgs args)
{
    var msg = Encoding.ASCII.GetString(args.Data);
    var msgArr = msg.Split(':');
    var remoteId = Guid.Parse(msgArr[0]);
    if (remoteId == CoreApp.Guid) return;
    var remoteIP = IPAddress.Parse(msgArr[1]);
    var remotePort = Int32.Parse(msgArr[2]);
    var remoteEndpoint = new IPEndPoint(remoteIP, remotePort);

    AddReplicator(remoteEndpoint);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore the content in the <code>UdpListener.cs</code>.
It includes implementation of creating Socket with Udp ProtocolType, start and stop the listener, and <code>UdpPacketReceived</code> EventHandler.</p>
</div>
</div>
<div class="sect2">
<h3 id="initializing-and-starting-replication"><a class="anchor" href="#initializing-and-starting-replication"></a>Initializing and Starting Replication</h3>
<div class="paragraph">
<p>Initializing a replicator for peer-to-peer sync is fundamentally the same as the case if the Couchbase Lite client were to
<a href="../../../couchbase-lite/current/csharp/replication.html" class="page">sync</a>
with a remote Sync Gateway.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>ReplicatorItem.cs</strong> file and locate the <code>ExecuteStartReplicatorCommand</code> method.<br>
If you have been using Couchbase Lite to sync data with Sync Gateway, this code should seem very familiar.
In this function, we initialize a bi-directional replication to the listener peer in continuous mode.
We also register a Replication Listener to be notified of status to the replication status.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">public ReplicatorItem(IPEndPoint listenerEndpoint)
{
    _listenerEndpoint = listenerEndpoint;
    StartReplicatorCommand = new Command(() =&gt; ExecuteStartReplicatorCommand());
    CreateReplicator(ListenerEndpointString);
}

~ReplicatorItem()
{
    Dispose(disposing: false);
}
#endregion

public void CreateReplicator(string PeerEndpointString)
{
    if(_repl != null) {
        return;
    }

    Uri host = new Uri(PeerEndpointString);
    var dbUrl = new Uri(host, _db.Name);
    var replicatorConfig = new ReplicatorConfiguration(_db, new URLEndpoint(dbUrl)); <i class="conum" data-value="1"></i><b>(1)</b>
    replicatorConfig.ReplicatorType = ReplicatorType.PushAndPull;
    replicatorConfig.Continuous = true;

    if (CoreApp.ListenerTLSMode &gt; 0) {

        // Explicitly allows self signed certificates. By default, only
        // CA signed cert is allowed
        switch (CoreApp.ListenerCertValidationMode) { <i class="conum" data-value="2"></i><b>(2)</b>
            case LISTENER_CERT_VALIDATION_MODE.SKIP_VALIDATION:
                // Use acceptOnlySelfSignedServerCertificate set to true to only accept self signed certs.
                // There is no cert validation
                replicatorConfig.AcceptOnlySelfSignedServerCertificate = true;
                break;

            case LISTENER_CERT_VALIDATION_MODE.ENABLE_VALIDATION_WITH_CERT_PINNING:
                // Use acceptOnlySelfSignedServerCertificate set to false to only accept CA signed certs
                // Self signed certs will fail validation

                replicatorConfig.AcceptOnlySelfSignedServerCertificate = false;

                // Enable cert pinning to only allow certs that match pinned cert

                try {
                    var pinnedCert = LoadSelfSignedCertForListenerFromBundle();
                    replicatorConfig.PinnedServerCertificate = pinnedCert;
                } catch (Exception ex) {
                    Debug.WriteLine($"Failed to load server cert to pin. Will proceed without pinning. {ex}");
                }

                break;

            case LISTENER_CERT_VALIDATION_MODE.ENABLE_VALIDATION:
                // Use acceptOnlySelfSignedServerCertificate set to false to only accept CA signed certs
                // Self signed certs will fail validation. There is no cert pinning
                replicatorConfig.AcceptOnlySelfSignedServerCertificate = false;
                break;
        }
    }

    if (CoreApp.RequiresUserAuth) {
        var user = CoreApp.CurrentUser;
        replicatorConfig.Authenticator = new BasicAuthenticator(user.Username, user.Password); <i class="conum" data-value="3"></i><b>(3)</b>
    }

    _repl = new Replicator(replicatorConfig); <i class="conum" data-value="4"></i><b>(4)</b>
    _listenerToken = _repl.AddChangeListener(ReplicationStatusUpdate);
}

public void ExecuteStartReplicatorCommand()
{
    if (!IsStarted) {
        _repl.Start(); <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Initialize a Repicator Configuration for the specified local database and remote listener URL endpoint</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is where we configure the TLS server cert validation mode - whether we enable cert validation or skip validation.
This would only apply if you had enabled TLS support on listener as discussed in <a href="#tlsmodes">TLS Modes on Listener</a>.<br>
If you skip server cert validation,  you still get encrypted communication, but you are communicating with an un-trusted listener.<br>
In the app, we have a flag named <code>ListenerCertValidationMode</code> that allows you to try the various modes. You can change the mode by changing the value of the variable. See <a href="#testing-different-server-authentication-modes">Testing Different Server Authentication Modes</a></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The app uses basic client authentication to authenticate with the server</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Initialize the Replicator</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Start replication. The app uses the events on the Replicator Listener to listen to monitor the replication.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="testing-different-server-authentication-modes"><a class="anchor" href="#testing-different-server-authentication-modes"></a>Testing Different Server Authentication Modes</h4>
<div class="paragraph">
<p>In <a href="#initializing-websocket-listener">Initializing Websocket Listener</a> section, we discussed the various ways the listener TLSIdentity can be configured.
Here, we describe the corresponding changes on the replicator side to authenticate the server identity.
The app can be configured to test the different TLS modes (<a href="#tlscertauth">Table 2</a>) by setting the <code>ListenerCertValidationMode</code> property in the <code>CoreApp.cs</code> file.</p>
</div>
<div class="paragraph">
<p>Naturally, if you have initialized the listener with <code>TLSDisabled</code> mode, then skip this section as there is no TLS.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">public static LISTENER_CERT_VALIDATION_MODE ListenerCertValidationMode = LISTENER_CERT_VALIDATION_MODE.SKIP_VALIDATION;</code></pre>
</div>
</div>
<table id="tlscertauth" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. TLS Listener Cert Authentication</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ListenerCertValidationMode Value</th>
<th class="tableblock halign-left valign-top">Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SKIP_VALIDATION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is no authentication of server cert.
The server cert is a self-signed cert.
This is typically used in dev or test environments.
Skipping server cert authentication is discouraged in production environments.
Communication is encrypted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENABLE_VALIDATION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the listener cert is from a well known CA then you will use this mode.
Of course, in our sample app, the listener cert as specified in <code>listener-cert-pkey</code> is a self signed cert - so you probably will not use this mode to test.
But if you have a CA signed cert, you can configure your listener with the CA signed cert and use this mode to test.
Communication is encrypted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENABLE_VALIDATION_WITH_CERT_PINNING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In this mode, the app uses the pinned cert,<code>listener-pinned-cert.cer</code> that is bundled in the app to validate the listener identity.
Only the server cert that exactly matches the pinned cert will be authenticated.
Communication is encrypted.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="stopping-replication"><a class="anchor" href="#stopping-replication"></a>Stopping Replication</h3>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>ReplicatorItem.cs</strong> file and locate the <code>StopReplicator</code> method.+
If you have been using Couchbase Lite to sync data with Sync Gateway, this code should seem very familiar.
In this function, we remove any listeners attached to the replicator and stop it.
You can restart the replicator with <code>ExecuteStartReplicatorCommand</code> method</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C# hljs" data-lang="C#">_repl?.Stop();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercise-3"><a class="anchor" href="#exercise-3"></a>Exercise</h3>
<div id="tryit20" class="sidebarblock">
<div class="content">
<div class="title">Try it out</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow instructions in the <a href="#tryit10">Try it out</a> section of <a href="#passive-peer-or-server">Passive Peer or Server</a> to start app in passive mode on a simulator instance or real device.</p>
</li>
<li>
<p>Run the app on a separate simulator instance or a real device.
If its the latter, make sure you sign your app with the appropriate developer certificate</p>
</li>
<li>
<p>On login screen, sign in as any one of the users configured in the <code>userallowlist.json</code> file such as "bob" and "password".
As an exercise, try with an invalid user and ensure it fails</p>
</li>
<li>
<p>You can find 4 selections (<code>What&#8217;s in Season?</code>, <code>Listener</code>, <code>Browser</code>, and <code>Logout</code>) under the "hamburger" menu located on the upper left hand side.</p>
</li>
<li>
<p>Select "Browser" from the "hamburger" menu.<br>
The app automatically browses for listener and lists it here when any listener is broadcasting.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the listener is not started before the "Browser" is selected, you will need to click the <code>Broadcast</code> toolbar item locates on top of the <code>ListenerPage</code> (See <code>Broadcast</code> in <a href="#passive-peer-or-server">Passive Peer or Server</a>)<br>
You will need to manually enter the listener&#8217;s IP endpoint (eg: 192.168.0.14:59840) for Xamarin android app.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Tap on the row corresponding to listener.<br>
This will start replication with the listener and it should transition to Connected state</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you <a href="#cannot-connect-android-app-active-peer-to-passive-peer-when-you-are-using-xamarin-android-sdk-9-x-or-other-older-version">Cannot connect Android app active peer to passive peer when you are using Xamarin.Android SDK 9.x or other older version?</a>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Verify the connection count on listener by clicking "Peers" toolbar item locates on top of the <code>ListenerPage</code> (See <code>Broadcast</code> in <a href="#passive-peer-or-server">Passive Peer or Server</a>)</p>
</li>
<li>
<p>Tap on the row corresponding to listener again.<br>
This will stop replication with the listener and it should transition to Disconnected state. Try Disconnect and then reconnect again</p>
</li>
<li>
<p>Swipe left (iOS) or long press (Android) or left click (UWP) on the the row. You should see the option to remove listener</p>
</li>
</ol>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/xamarin-active-start-replicator.gif" alt="p2p sync">
</div>
<div class="title">Figure 3. App in action&#8201;&#8212;&#8201;start active peer</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syncing-data"><a class="anchor" href="#syncing-data"></a>Syncing Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the connection is established between the peers, you can start syncing.
Couchbase Lite takes care of it.</p>
</div>
<div class="sect2">
<h3 id="exercise-4"><a class="anchor" href="#exercise-4"></a>Exercise</h3>
<div id="tryit30" class="sidebarblock">
<div class="content">
<div class="title">Try it out</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the app on two or more simulators or real devices.<br>
If its the latter, make sure you sign your app with the appropriate developer certificate</p>
</li>
<li>
<p>Start the listener on one of the app instances.
You could also have multiple listeners.</p>
</li>
<li>
<p>Connect the other instances of the app to the listener</p>
</li>
<li>
<p>You can find 4 selections (<code>What&#8217;s in Season?</code>, <code>Listener</code>, <code>Browser</code>, and <code>Logout</code>) under "hamburger" menu locates on the upper left hand side.</p>
</li>
<li>
<p>Enter <code>SeasonalItemsPage</code> by selecting "What&#8217;s in Season?" from the "hamburger" menu.</p>
</li>
<li>
<p>Edit the quantity and/or image on one or multiple instance(s) and press Save when you are done editing</p>
</li>
<li>
<p>Watch it sync automatically to other connected clients</p>
</li>
</ol>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/xamarin-sync.gif" alt="server websocket listener login screen">
</div>
<div class="title">Figure 4. App in action&#8201;&#8212;&#8201;sync</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-next"><a class="anchor" href="#what-next"></a>What Next</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As an exercise, switch between the various TLS modes and server cert validation modes and see how the app behaves.
You can also try with different topologies to connect the peers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="learn-more"><a class="anchor" href="#learn-more"></a>Learn More</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations on completing this tutorial!</p>
</div>
<div class="paragraph">
<p>This tutorial walked you through an example of how to directly synchronize data between Couchbase Lite enabled clients.
While the tutorial is for iOS, the concepts apply equally to other Couchbase Lite platforms.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Further Reading</div>
<div class="paragraph">
<p>Complete documentation is available
<a href="../../../couchbase-lite/current/csharp/p2psync-websocket.html" class="page">here</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshoot"><a class="anchor" href="#troubleshoot"></a>Troubleshoot</h2>
<div class="sectionbody">
<h3 id="having-issue-running-the-xamarin-ios-app" class="discrete">Having issue running the Xamarin iOS app?</h3>
<div class="ulist">
<ul>
<li>
<p>Xamarin iOS p2p sample app should build and run with Visual Studio 2019 with latest updates and XCode 12.0.1</p>
</li>
<li>
<p>If you have Xcode 11 and try to run the iOS app on simulator and the simulator is not loading, try to launch the simulator via Xcode and select that simulator when launching it from VS.</p>
</li>
</ul>
</div>
<h3 id="connecting-to-an-android-emulator" class="discrete">Connecting to an Android emulator</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Sync will not work between two emulators. At least one app must be running on a device.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When starting a listener on Android emulator and trying to connect it from a device or iOS simulator on localhost, the following steps must be followed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Hard-code a port so you know what endpoint to use</p>
</li>
<li>
<p>Start the App on your device or iOS simulator</p>
</li>
<li>
<p>Start an Android emulator from Visual Studio&#8217;s device manager</p>
</li>
<li>
<p>Use ADB bridge to set port forwarding using hard-coded port number</p>
<div class="paragraph">
<p>For instance, if the listener is listening on port 35262, the command to run on the terminal of the host machine would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">adb forward tcp:35262 tcp:35262</code></pre>
</div>
</div>
</li>
<li>
<p>On your device or iOS simulator,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Within the App, select <strong>Browser</strong></p>
</li>
<li>
<p>Enter your required endpoint including the hard-coded port number</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot connect to an emulator directly over localhost.<br>
Regardless of the IP address in the displayed URL, ignore it and use <code>127.0.0.1</code> as the host address.<br>
For example, if the listener is listening on <code>10.2.0.15:35262</code>,<br>
you must connect to URL <code>127.0.0.1:35262</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Within the Android emulater app, <strong>Start listener</strong><br>
You can make an inventory change and see the change sync to the other app.</p>
</li>
</ol>
</div>
<h3 id="cannot-connect-android-app-active-peer-to-passive-peer-when-you-are-using-xamarin-android-sdk-9-x-or-other-older-version" class="discrete">Cannot connect Android app active peer to passive peer when you are using Xamarin.Android SDK 9.x or other older version?</h3>
<div class="paragraph">
<p>Go to <code>Advanced Android Options</code> (Android Project Properties &#8594; Android Options &#8594; Advanced button) and change <code>SSL/TLS implementation</code> configuration to <code>Managed TLS 1.0</code> from <code>Native TLS 1.2+</code>.</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Release 2.8+
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
