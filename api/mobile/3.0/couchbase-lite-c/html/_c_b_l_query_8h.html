<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Couchbase Lite C: include/cbl/CBLQuery.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Couchbase Lite C
   </div>
   <div id="projectbrief">Couchbase Lite C API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_42eeca32d5bbc87802b2b9475842edbd.html">cbl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">CBLQuery.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_c_b_l_base_8h_source.html">CBLBase.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_fleece_8h_source.html">fleece/Fleece.h</a>&quot;</code><br />
</div>
<p><a href="_c_b_l_query_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_b_l_index_spec.html">CBLIndexSpec</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameters for creating a database index.  <a href="struct_c_b_l_index_spec.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga5b419d879de00f45eb417c451e21ac82"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga5b419d879de00f45eb417c451e21ac82">CBLQueryLanguage</a> : uint32_t { <a class="el" href="group__queries.html#gga5b419d879de00f45eb417c451e21ac82aa86d4532291fc8f17284dcb61e198d76">kCBLJSONLanguage</a>, 
<a class="el" href="group__queries.html#gga5b419d879de00f45eb417c451e21ac82a25fd238b9aa83867526649ef2769446e">kCBLN1QLLanguage</a>
 }</td></tr>
<tr class="memdesc:ga5b419d879de00f45eb417c451e21ac82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query languages.  <a href="group__queries.html#ga5b419d879de00f45eb417c451e21ac82">More...</a><br /></td></tr>
<tr class="separator:ga5b419d879de00f45eb417c451e21ac82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Query objects</div></td></tr>
<tr class="memitem:ga1df03c28b75a8b8860265f2c007966f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_b_l___compat_8h.html#aeb687d63109ee195bdc9e16c21d4dc9b">_cbl_warn_unused</a> <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga1df03c28b75a8b8860265f2c007966f6">CBLQuery_New</a> (const <a class="el" href="group__database.html#ga2eef6f33d930c0cee23013f845dc77e0">CBLDatabase</a> *db, <a class="el" href="group__queries.html#ga5b419d879de00f45eb417c451e21ac82">CBLQueryLanguage</a> language, <a class="el" href="group___f_l_slice.html#gabab0e7979cf6c99ffe836e84e55b6c76">FLString</a> queryString, int *outErrorPos, <a class="el" href="struct_c_b_l_error.html">CBLError</a> *error)</td></tr>
<tr class="memdesc:ga1df03c28b75a8b8860265f2c007966f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new query by compiling the input string.  <a href="group__queries.html#ga1df03c28b75a8b8860265f2c007966f6">More...</a><br /></td></tr>
<tr class="separator:ga1df03c28b75a8b8860265f2c007966f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5851da5f9dcd02be5ce0c54073c22d7d"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga5851da5f9dcd02be5ce0c54073c22d7d">CBLQuery_Retain</a> (const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *t)</td></tr>
<tr class="separator:ga5851da5f9dcd02be5ce0c54073c22d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e9d4b09cb767cdaa820996ea9992f43"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga9e9d4b09cb767cdaa820996ea9992f43">CBLQuery_Release</a> (const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *t)</td></tr>
<tr class="separator:ga9e9d4b09cb767cdaa820996ea9992f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3423414402261bfc1a8d66080b09ec96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga3423414402261bfc1a8d66080b09ec96">CBLQuery_SetParameters</a> (<a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *query, <a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> parameters)</td></tr>
<tr class="memdesc:ga3423414402261bfc1a8d66080b09ec96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns values to the query's parameters.  <a href="group__queries.html#ga3423414402261bfc1a8d66080b09ec96">More...</a><br /></td></tr>
<tr class="separator:ga3423414402261bfc1a8d66080b09ec96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga817928d138b287462e088a15e4d713cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga817928d138b287462e088a15e4d713cf">CBLQuery_Parameters</a> (const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *query)</td></tr>
<tr class="memdesc:ga817928d138b287462e088a15e4d713cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the query's current parameter bindings, if any.  <a href="group__queries.html#ga817928d138b287462e088a15e4d713cf">More...</a><br /></td></tr>
<tr class="separator:ga817928d138b287462e088a15e4d713cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf4a560b717dc9dd929cf4816a6e46d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_b_l___compat_8h.html#aeb687d63109ee195bdc9e16c21d4dc9b">_cbl_warn_unused</a> <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#gacf4a560b717dc9dd929cf4816a6e46d5">CBLQuery_Execute</a> (<a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *, <a class="el" href="struct_c_b_l_error.html">CBLError</a> *)</td></tr>
<tr class="memdesc:gacf4a560b717dc9dd929cf4816a6e46d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the query, returning the results.  <a href="group__queries.html#gacf4a560b717dc9dd929cf4816a6e46d5">More...</a><br /></td></tr>
<tr class="separator:gacf4a560b717dc9dd929cf4816a6e46d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c6f1b2adc39570525ef32c2df7edead"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_b_l___compat_8h.html#aeb687d63109ee195bdc9e16c21d4dc9b">_cbl_warn_unused</a> <a class="el" href="struct_f_l_slice_result.html">FLSliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga4c6f1b2adc39570525ef32c2df7edead">CBLQuery_Explain</a> (const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *)</td></tr>
<tr class="memdesc:ga4c6f1b2adc39570525ef32c2df7edead"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns information about the query, including the translated SQLite form, and the search strategy.  <a href="group__queries.html#ga4c6f1b2adc39570525ef32c2df7edead">More...</a><br /></td></tr>
<tr class="separator:ga4c6f1b2adc39570525ef32c2df7edead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadef5a733ba8ad85acc107aca0de196ea"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#gadef5a733ba8ad85acc107aca0de196ea">CBLQuery_ColumnCount</a> (const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *)</td></tr>
<tr class="memdesc:gadef5a733ba8ad85acc107aca0de196ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of columns in each result.  <a href="group__queries.html#gadef5a733ba8ad85acc107aca0de196ea">More...</a><br /></td></tr>
<tr class="separator:gadef5a733ba8ad85acc107aca0de196ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50ec9db5507921022bc0a1947da9d5eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_f_l_slice.html">FLSlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga50ec9db5507921022bc0a1947da9d5eb">CBLQuery_ColumnName</a> (const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *, unsigned columnIndex)</td></tr>
<tr class="memdesc:ga50ec9db5507921022bc0a1947da9d5eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name of a column in the result.  <a href="group__queries.html#ga50ec9db5507921022bc0a1947da9d5eb">More...</a><br /></td></tr>
<tr class="separator:ga50ec9db5507921022bc0a1947da9d5eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Result sets</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>A <code>CBLResultSet</code> is an iterator over the results returned by a query.</p>
<p>It exposes one result at a time &ndash; as a collection of values indexed either by position or by name &ndash; and can be stepped from one result to the next.</p>
<p>It's important to note that the initial position of the iterator is <em>before</em> the first result, so <a class="el" href="group__queries.html#ga7a908902f5f46ff71ae73e5747b4df94">CBLResultSet_Next</a> must be called <em>first</em>. Example:</p>
<div class="fragment"><div class="line"><a class="code" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *rs = <a class="code" href="group__queries.html#gacf4a560b717dc9dd929cf4816a6e46d5">CBLQuery_Execute</a>(query, &amp;error);</div><div class="line">assert(rs);</div><div class="line"><span class="keywordflow">while</span> (<a class="code" href="group__queries.html#ga7a908902f5f46ff71ae73e5747b4df94">CBLResultSet_Next</a>(rs) {</div><div class="line">    <a class="code" href="group__types.html#gae0bde7a426f944395dbe59e3d52ba2c7">FLValue</a> aValue = <a class="code" href="group__queries.html#gae5ce9eb45abb997951a8fda71b309d35">CBLResultSet_ValueAtIndex</a>(rs, 0);</div><div class="line">    ...</div><div class="line">}</div><div class="line"><a class="code" href="group__queries.html#gaa1c246d416e05c7e161fe2c894a645ae">CBLResultSet_Release</a>(rs);</div></div><!-- fragment --> </div></td></tr>
<tr class="memitem:ga7a908902f5f46ff71ae73e5747b4df94"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_b_l___compat_8h.html#aeb687d63109ee195bdc9e16c21d4dc9b">_cbl_warn_unused</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga7a908902f5f46ff71ae73e5747b4df94">CBLResultSet_Next</a> (<a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *)</td></tr>
<tr class="memdesc:ga7a908902f5f46ff71ae73e5747b4df94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves the result-set iterator to the next result.  <a href="group__queries.html#ga7a908902f5f46ff71ae73e5747b4df94">More...</a><br /></td></tr>
<tr class="separator:ga7a908902f5f46ff71ae73e5747b4df94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5ce9eb45abb997951a8fda71b309d35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#gae0bde7a426f944395dbe59e3d52ba2c7">FLValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#gae5ce9eb45abb997951a8fda71b309d35">CBLResultSet_ValueAtIndex</a> (const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *, unsigned index)</td></tr>
<tr class="memdesc:gae5ce9eb45abb997951a8fda71b309d35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of a column of the current result, given its (zero-based) numeric index.  <a href="group__queries.html#gae5ce9eb45abb997951a8fda71b309d35">More...</a><br /></td></tr>
<tr class="separator:gae5ce9eb45abb997951a8fda71b309d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e4443df45a4e56714a1790b841f0b0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#gae0bde7a426f944395dbe59e3d52ba2c7">FLValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga1e4443df45a4e56714a1790b841f0b0e">CBLResultSet_ValueForKey</a> (const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *, <a class="el" href="group___f_l_slice.html#gabab0e7979cf6c99ffe836e84e55b6c76">FLString</a> key)</td></tr>
<tr class="memdesc:ga1e4443df45a4e56714a1790b841f0b0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of a column of the current result, given its name.  <a href="group__queries.html#ga1e4443df45a4e56714a1790b841f0b0e">More...</a><br /></td></tr>
<tr class="separator:ga1e4443df45a4e56714a1790b841f0b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga57fdd6216578112e0ec7b5073f910983"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga7ea954b03aea4f33ec0f55f13aba5f90">FLArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga57fdd6216578112e0ec7b5073f910983">CBLResultSet_ResultArray</a> (const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *)</td></tr>
<tr class="memdesc:ga57fdd6216578112e0ec7b5073f910983"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current result as an array of column values.  <a href="group__queries.html#ga57fdd6216578112e0ec7b5073f910983">More...</a><br /></td></tr>
<tr class="separator:ga57fdd6216578112e0ec7b5073f910983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga639f61bd8cb0b231b5d54c49389f6a4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga639f61bd8cb0b231b5d54c49389f6a4a">CBLResultSet_ResultDict</a> (const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *)</td></tr>
<tr class="memdesc:ga639f61bd8cb0b231b5d54c49389f6a4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current result as a dictionary mapping column names to values.  <a href="group__queries.html#ga639f61bd8cb0b231b5d54c49389f6a4a">More...</a><br /></td></tr>
<tr class="separator:ga639f61bd8cb0b231b5d54c49389f6a4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0067d5f5028310d26e6c4aa7c413a848"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga0067d5f5028310d26e6c4aa7c413a848">CBLResultSet_GetQuery</a> (const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *rs)</td></tr>
<tr class="memdesc:ga0067d5f5028310d26e6c4aa7c413a848"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the Query that created this ResultSet.  <a href="group__queries.html#ga0067d5f5028310d26e6c4aa7c413a848">More...</a><br /></td></tr>
<tr class="separator:ga0067d5f5028310d26e6c4aa7c413a848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a20876309e1c7f9dadce80636662f06"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga3a20876309e1c7f9dadce80636662f06">CBLResultSet_Retain</a> (const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *t)</td></tr>
<tr class="separator:ga3a20876309e1c7f9dadce80636662f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1c246d416e05c7e161fe2c894a645ae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#gaa1c246d416e05c7e161fe2c894a645ae">CBLResultSet_Release</a> (const <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *t)</td></tr>
<tr class="separator:gaa1c246d416e05c7e161fe2c894a645ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Change listener</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpd0a018bc7a16006ae71745a1ce494a3f"></a>Adding a change listener to a query turns it into a "live query".</p>
<p>When changes are made to documents, the query will periodically re-run and compare its results with the prior results; if the new results are different, the listener callback will be called.</p>
<dl class="section note"><dt>Note</dt><dd>The result set passed to the listener is the <em>entire new result set</em>, not just the rows that changed. </dd></dl>
</td></tr>
<tr class="memitem:gaeb35554f81b1d8e9702708940966c869"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#gaeb35554f81b1d8e9702708940966c869">CBLQueryChangeListener</a>) (void *context, <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *query)</td></tr>
<tr class="memdesc:gaeb35554f81b1d8e9702708940966c869"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback to be invoked after the query's results have changed.  <a href="group__queries.html#gaeb35554f81b1d8e9702708940966c869">More...</a><br /></td></tr>
<tr class="separator:gaeb35554f81b1d8e9702708940966c869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0577b29f49f70a1d579beb40ded2cf97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_b_l___compat_8h.html#aeb687d63109ee195bdc9e16c21d4dc9b">_cbl_warn_unused</a> <a class="el" href="group__listeners.html#gae39d1de7cc3a46004b597f5eb80620c6">CBLListenerToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga0577b29f49f70a1d579beb40ded2cf97">CBLQuery_AddChangeListener</a> (<a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *query, <a class="el" href="group__queries.html#gaeb35554f81b1d8e9702708940966c869">CBLQueryChangeListener</a> listener, void *context)</td></tr>
<tr class="memdesc:ga0577b29f49f70a1d579beb40ded2cf97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a change listener callback with a query, turning it into a "live query" until the listener is removed (via <a class="el" href="group__listeners.html#ga6f2cb5bfdfb95332e9c2be1d4f0e7cc9">CBLListener_Remove</a>).  <a href="group__queries.html#ga0577b29f49f70a1d579beb40ded2cf97">More...</a><br /></td></tr>
<tr class="separator:ga0577b29f49f70a1d579beb40ded2cf97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60d15fdcf9e070fb9ed8f4d4c7cf9963"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_b_l___compat_8h.html#aeb687d63109ee195bdc9e16c21d4dc9b">_cbl_warn_unused</a> <a class="el" href="group__queries.html#ga9ebc8432e036873fc95f9d575cc42ebd">CBLResultSet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga60d15fdcf9e070fb9ed8f4d4c7cf9963">CBLQuery_CopyCurrentResults</a> (const <a class="el" href="group__queries.html#ga9c80e113b863821f9f82778dc0650f22">CBLQuery</a> *query, <a class="el" href="group__listeners.html#gae39d1de7cc3a46004b597f5eb80620c6">CBLListenerToken</a> *listener, <a class="el" href="struct_c_b_l_error.html">CBLError</a> *error)</td></tr>
<tr class="memdesc:ga60d15fdcf9e070fb9ed8f4d4c7cf9963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the query's <em>entire</em> current result set, after it's been announced via a call to the listener's callback.  <a href="group__queries.html#ga60d15fdcf9e070fb9ed8f4d4c7cf9963">More...</a><br /></td></tr>
<tr class="separator:ga60d15fdcf9e070fb9ed8f4d4c7cf9963"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Database Indexes</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp011ca9e3de1157373498f3c9e7d7f41b"></a>Indexes are used to speed up queries by allowing fast &ndash; O(log n) &ndash; lookup of documents that have specific values or ranges of values.</p>
<p>The values may be properties, or expressions based on properties.</p>
<p>An index will speed up queries that use the expression it indexes, but it takes up space in the database file, and it slows down document saves slightly because it needs to be kept up to date when documents change.</p>
<p>Tuning a database with indexes can be a tricky task. Fortunately, a lot has been written about it in the relational-database (SQL) realm, and much of that advice holds for Couchbase Lite. You may find SQLite's documentation particularly helpful since Couchbase Lite's querying is based on SQLite.</p>
<p>Two types of indexes are currently supported: Value indexes speed up queries by making it possible to look up property (or expression) values without scanning every document. They're just like regular indexes in SQL or N1QL. Multiple expressions are supported; the first is the primary key, second is secondary. Expressions must evaluate to scalar types (boolean, number, string). Full-Text Search (FTS) indexes enable fast search of natural-language words or phrases by using the <code>MATCH</code> operator in a query. A FTS index is <b>required</b> for full-text search: a query with a <code>MATCH</code> operator will fail to compile unless there is already a FTS index for the property/expression being matched. Only a single expression is currently allowed, and it must evaluate to a string. </p>
</td></tr>
<tr class="memitem:gac5266cfb9be1fb0441d87df7bb022356"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#gac5266cfb9be1fb0441d87df7bb022356">CBLIndexType</a> : uint32_t { <a class="el" href="group__queries.html#ggac5266cfb9be1fb0441d87df7bb022356a3b0da6ae4a2575692a23677fbd26205b">kCBLValueIndex</a>, 
<a class="el" href="group__queries.html#ggac5266cfb9be1fb0441d87df7bb022356ac5432e0a103a264be9eaddb01070b1ff">kCBLFullTextIndex</a>
 }</td></tr>
<tr class="memdesc:gac5266cfb9be1fb0441d87df7bb022356"><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of database indexes.  <a href="group__queries.html#gac5266cfb9be1fb0441d87df7bb022356">More...</a><br /></td></tr>
<tr class="separator:gac5266cfb9be1fb0441d87df7bb022356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga303add478e33be51bfc2b7a14eece722"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga303add478e33be51bfc2b7a14eece722">CBLDatabase_CreateIndex</a> (<a class="el" href="group__database.html#ga2eef6f33d930c0cee23013f845dc77e0">CBLDatabase</a> *db, <a class="el" href="group___f_l_slice.html#gabab0e7979cf6c99ffe836e84e55b6c76">FLString</a> name, <a class="el" href="struct_c_b_l_index_spec.html">CBLIndexSpec</a> spec, <a class="el" href="struct_c_b_l_error.html">CBLError</a> *outError)</td></tr>
<tr class="memdesc:ga303add478e33be51bfc2b7a14eece722"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a database index.  <a href="group__queries.html#ga303add478e33be51bfc2b7a14eece722">More...</a><br /></td></tr>
<tr class="separator:ga303add478e33be51bfc2b7a14eece722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad62586f0d90e0be74ef67d0a3653e6b4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#gad62586f0d90e0be74ef67d0a3653e6b4">CBLDatabase_DeleteIndex</a> (<a class="el" href="group__database.html#ga2eef6f33d930c0cee23013f845dc77e0">CBLDatabase</a> *db, <a class="el" href="group___f_l_slice.html#gabab0e7979cf6c99ffe836e84e55b6c76">FLString</a> name, <a class="el" href="struct_c_b_l_error.html">CBLError</a> *outError)</td></tr>
<tr class="memdesc:gad62586f0d90e0be74ef67d0a3653e6b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an index given its name.  <a href="group__queries.html#gad62586f0d90e0be74ef67d0a3653e6b4">More...</a><br /></td></tr>
<tr class="separator:gad62586f0d90e0be74ef67d0a3653e6b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d652b932c1ecf735ae9632af79edd98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_b_l___compat_8h.html#aeb687d63109ee195bdc9e16c21d4dc9b">_cbl_warn_unused</a> <a class="el" href="group__types.html#ga384f95fe181d6050d5757ff85bb8bc82">FLMutableArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__queries.html#ga3d652b932c1ecf735ae9632af79edd98">CBLDatabase_IndexNames</a> (<a class="el" href="group__database.html#ga2eef6f33d930c0cee23013f845dc77e0">CBLDatabase</a> *db)</td></tr>
<tr class="memdesc:ga3d652b932c1ecf735ae9632af79edd98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the names of the indexes on this database, as a Fleece array of strings.  <a href="group__queries.html#ga3d652b932c1ecf735ae9632af79edd98">More...</a><br /></td></tr>
<tr class="separator:ga3d652b932c1ecf735ae9632af79edd98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
