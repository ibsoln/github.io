<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Replication Monitoring and Statistics | Couchbase Docs</title>
<link rel="canonical" href="https://ibsoln.github.io/stage/h2BetaAndroid/sync-gateway/2.8/learn/icr-monitoring.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="This content covers the retrieval of status and statistical data relating to Sync Gateway inter-cluster replication (SGR-2)">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="sync-gateway">
<meta name="dcterms.identifier" content="2.8">
<meta name="generator" content="Antora 2.3.3">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">

              <a class="navbar-brand" href="../../..">
                <img src="../../../_/img/couchbase-documentation-logo.svg" alt="Couchbase" />
              </a>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <div class="parent-site">
                  <a href="https://www.couchbase.com">
                    Couchbase.com
                  </a>
                </div>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Try Free
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
<div class="left-sidebar-menu">
<div class="version-control-box">
<div class="component-frame">
<div class="frame-icon">
<img src="../../../_/img/server-icon.png" alt="">
</div>
<div class="frame-body">
<h4 class="title"><span class="">Sync Gateway H2-714 23July20-1512</span></h4>
<a class="navbar-item component" href="../introduction.html"> <span class="version">2.8</span></a>
</div>
</div>
</div>
<div class="nav-menu">
<div class="main-nav-parent new " data-depth="0">
<span class="back-to-menu"><i class="fas fa-chevron-left"></i> Main Menu </span>
</div>
<ul class="nav-list">
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Start</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../introduction.html">About SGW</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../sgw-whatsnew.html">What&#8217;s New</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-prereqs.html">Before You Start</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-svr-cfg.html">Configure Server for SGW</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-install.html">Install SGW</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-config.html">Configure SGW</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-api-access.html">Test the Installation</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../advance/adv-sgw-cfg-sync-function.html">Work With Sync Functions</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../advance/adv-sgw-cfg-import-filter.html">Use Import Filters</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../advance/adv-rest-api-client.html">Use the REST API</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Manage</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/logging.html">Logging</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../stats-monitoring.html">Stats and Monitoring</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../sgcollect-info.html">SGCollect Info</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../deployment.html">Deploy</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../command-line-options.html">CLI Configuration</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../security.html">Security</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../load-balancer.html">Load Balancer</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../os-level-tuning.html">OS Level Tuning</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../database-offline.html">Taking Databases Offline and Online</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../upgrade.html">Upgrade</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Kubernetes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/kubernetes/deploy-cluster.html">Deploy SGW Clusters</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#operator::tutorial-sync-gateway-manage.adoc">Manage a Sync Gateway Cluster</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#operator::tutorial-sync-gateway-clients.adoc">Expose Sync Gateway to Couchbase Lite clients</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../shared-bucket-access.html">Syncing Mobile and Server</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Access Control</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="users-and-roles.html">Users and Roles</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="authentication.html">Authentication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="sync-gateway-channels.html">Sync Gateway Channels</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="read-access.html">Read Access</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="write-access.html">Write Access</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="sync-function.html">Sync Function</a>
</span>
</li>
</ul>
</li>
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="icr-sgreplicate.html">Inter-cluster Replication</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-sgreplicate-sgr2.html">ICR with SGR-2</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-sgreplicate-sgr1.html">ICR with SGR-1</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-running.html">Replication Initialization</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-admin.html">Replication Admin</a>
</span>
</li>
<li class="nav-item is-current-page is-active is-active-depth-2  " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-monitoring.html">Replication Monitoring</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-conflict-resolution.html">Conflict Resolution</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-high-availability.html">High-Availability</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="concept-fundamentals.html">Other key learn/concepts &#8230;&#8203;</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="concept-fundamentals-data.html">Mobile data learn/concepts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../resolving-conflicts.html">Conflict Resolution</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#sync-gateway::learn/concept-fundamentals-logging.adoc">Logging</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="concept-fundamentals-data-tombstones.html">Tombstones</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../managing-tombstones.html">Managing Tombstones</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../data-modeling.html">Data Modeling</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../server-integration.html">Webhooks and Changes Feed</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../integrating-external-stores.html">Integrating External Stores</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../refer/config-properties.html">Configuration Schema</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Sync Gateway API</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/rest-api-public.html">Public REST API</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/rest-api-admin.html">Admin REST API</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../refer/refer-sgw-glossary.html">Sync Gateway Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../prodnotes/pn-change-log-config.html">Configuration Change Log</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Exit to . . .</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../home/mobile.html">back to Mobile</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../couchbase-lite/2.8/introduction.html">go to Couchbase Lite</a>
</span>
</li>
</ul>
</li>
</ul>
</div>
<a href="#" class="menu-expand-toggle"> <span>Navigation</span> <i class="fas fa-times-circle"></i> <i class="fas fa-chevron-circle-left"></i></a>
</div></nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
      <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/ianbridge/CouchbaseDocs/bau/sgw/modules/ROOT/pages/learn/icr-monitoring.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
      <div class="toc-menu"></div>
        <div class="is-this-helpful-box">
          <h4> Is this page helpful?</h4>
            <div class="btn-row">
              <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                     <i class="far fa-thumbs-up"></i>
                 Yes

                 </a>
              <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
            </div>
            <div class="any-feedback">
              <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
            </div>
            <div class="dialog-box" id="dialogBox">
              <form>
                  <div class="form-group " id="additionalFeedbackBox">
                    <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

                    <div class="action-btn-row ">
                      <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                       <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                       <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
                    </div>


                  </div>

              </form>

            </div>
      </div>
   </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction.html">Sync Gateway H2-714 23July20-1512</a></li>
<li class="crumb">Learn</li>
<li class="crumb"><a href="icr-sgreplicate.html">Inter-cluster Replication</a></li>
<li class="crumb"><a href="icr-monitoring.html">Replication Monitoring</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Replication Monitoring and Statistics</h1>
<div class="labels">
<ul>
<li class="edition"><a href="https://www.couchbase.com/products/editions">Under Development</a></li>
<li class="status"><span>stage -- {release-comments-sgw}</span></li>
</ul>
</div>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p><em>Topic Group</em>&#8201;&#8212;&#8201;Inter-cluster Replication<br>
This content covers the retrieval of status and statistical data relating to Sync Gateway inter-cluster replication (SGR-2)<br>
Use this content to understand the status and statistical data available in Sync Gateway and how to access it.<br>
<em>Related</em>&#8201;&#8212;&#8201;<a href="../refer/config-properties.html" class="page">Configuration Schema</a> | <a href="../refer/rest-api-admin.html" class="page">Admin REST API</a></p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="status-information"><a class="anchor" href="#status-information"></a>Status Information</h3>
<div class="paragraph">
<p>Sync Gateway provides a replication status Admin REST API endpoint to enable effective monitoring of replications.</p>
</div>
<div class="paragraph">
<p>Use the <a href="../refer/rest-api-admin.html#/replication/get__db___replicationStatus__replicationID_" class="page">_replicationStatus(replicationID)</a> endpoint to check the status of individual replications and-or the <a href="../refer/rest-api-admin.html#/replication/get__db___replicationStatus__queryString_" class="page">_replicationStatus?{querystring}</a> endpoint to get status information on all replications, filtered by the querystring criteria.</p>
</div>
</div>
<div class="sect2">
<h3 id="sync-gateway-statistics"><a class="anchor" href="#sync-gateway-statistics"></a>Sync Gateway Statistics</h3>
<div class="paragraph">
<p>Sync Gateway maintains a comprehensive set of statistics, including a replication-specific subset.</p>
</div>
<div class="paragraph">
<p>You can access these statistics using the <code>_expvars</code>  endpoint.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="retrieving-replication-status-data"><a class="anchor" href="#retrieving-replication-status-data"></a>Retrieving Replication Status Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="#retrieving-status-data-for-a-specific-replication">Retrieving Status Data for a Specific Replication</a>  | <a href="#retrieving-status-data-for-all-replications">Retrieving Status Data for All Replications</a></p>
</div>
<div class="paragraph">
<p>Sync Gateway provides easy access to replication status data through the Admin REST API.</p>
</div>
<div class="paragraph">
<p>You can obtain the replication status details for a specific replication, or for all replications across all nodes.
This option can be useful, for example, to find any auto-generated replication_id details needed to enable further replication management activities.</p>
</div>
<div class="paragraph">
<p>Note:
With <a href="https://www.couchbase.com/products/editions">COMMUNITY EDITION</a> replications always run on the node on which they are configured.
Users can only access replications on the node from which they make the request.</p>
</div>
<div class="sect2">
<h3 id="retrieving-status-data-for-a-specific-replication"><a class="anchor" href="#retrieving-status-data-for-a-specific-replication"></a>Retrieving Status Data for a Specific Replication</h3>
<div class="paragraph">
<p>Use the Admin REST API endpoint <code>replicationStatus</code> to easily access replication status data for a specific replication id.
Status data is returned regardless of the node the replication is running (or ran) on.</p>
</div>
<div class="paragraph">
<p><em>Action</em>: Send a <code>GET</code> request to the <code>_replicationStatus</code> endpoint with the required <code>replication_id</code></p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Get status data for a specified replication</div>
<div class="content">
<div class="paragraph">
<p>This example returns status information for replication id  'db1-rep-id2'.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_request"></a>Request</p>
</li>
<li>
<p><a id="tabset1_response"></a>Response</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_request">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">curl --location --request GET 'http://localhost:4985/db1/_replicationStatus/db1-rep-id2' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'Authorization: Basic ZGVtbzpwYXNzd29yZA==' \</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_response">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "replication_id": "db1-rep-id2",
    "docs_read": 0,
    "docs_written": 10,
    "doc_write_failures": 0,
    "doc_write_conflict": 0,
    "status": "running",
    "rejected_by_remote": 0,
    "rejected_by_local": 0,
    "last_seq_pull": "8851",
    "last_seq_push": "10402"
}
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="retrieving-status-data-for-all-replications"><a class="anchor" href="#retrieving-status-data-for-all-replications"></a>Retrieving Status Data for All Replications</h3>
<div class="paragraph">
<p>Use the Admin REST API&#8217;s <code>_replicationStatus</code> endpoint to access replication status data for all replications run, or running, on any node within the cluster. The JSON response comprises an array of results, one per replication.</p>
</div>
<div class="paragraph">
<p>You can easily filter the results using the query string: <code>?activeOnly=false&amp;includeConfig=true&amp;localOnly=false&amp;includeError=true`</code></p>
</div>
<div class="paragraph">
<p>Available query string filters comprise:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>activeOnly - return only active replications (default=false)</p>
</li>
<li>
<p>localOnly - return replications from the local node only (default=false)</p>
</li>
<li>
<p>includeError - return replications even if their status is "error" (default=true)</p>
</li>
<li>
<p>includeConfig - return the replication definition details (configuration) as well as the status data.
This will include remote configuration definitions if <code>localOnly=false</code> (default=false)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Action</em>: Send a <code>GET</code> request to the <code>_replicationStatus</code> endpoint with an optional query string</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Get status data for all replications meeting criteria</div>
<div class="content">
<div class="paragraph">
<p>This example retrieves status data, from across all nodes, for all replications that meet the specified criteria.
The results are returned in an array; one entry per replication.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_request"></a>Request</p>
</li>
<li>
<p><a id="tabset2_response"></a>Response</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_request">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">curl --location --request GET "http://localhost:4985/db1-local/_replicationStatus?activeOnly=false&amp;includeConfig=true&amp;localOnly=false&amp;includeError=true" \ <i class="conum" data-value="1"></i><b>(1)</b>
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'Authorization: Basic ZGVtbzpwYXNzd29yZA==' \
--data-raw ''</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This example&#8217;s criteria selects replications with any status (including errors), on local and remote nodes. The returned status details also include replication definition details.</td>
</tr>
</table>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_response">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "replication_id": "db1-rep-id1-pull",
    "docs_read": 0,
    "docs_written": 0,
    "doc_write_failures": 0,
    "doc_write_conflict": 0,
    "status": "running",
    "rejected_by_remote": 0,
    "rejected_by_local": 0,
    "config": { <i class="conum" data-value="1"></i><b>(1)</b>
        "replication_id": "db1-rep-id1-pull",
        "cancel": true,
        "direction": "pull",
        "purge-on-removal": true,
        "remote": "http://user:password@example.com:4985/db1-remote",
        "filter":"sync_gateway/bychannel",
        "query_params": {
          "channels": ["channel1.user1"]
        },
        "continuous": true
    }
  },
  {
    "replication_id": "db1-rep-id2",
    "docs_read": 0,
    "docs_written": 0,
    "doc_write_failures": 0,
    "doc_write_conflict": 0,
    "status": "stopped",  <i class="conum" data-value="2"></i><b>(2)</b>
    "rejected_by_remote": 0,
    "rejected_by_local": 0,
    "config": {
        "replication_id": "db1-rep-id2",
        "direction": "pull",
        "remote": "http://user:password@example.com:4985/db1-remote",
        "continuous": true
      }
  },
  {
    "replication_id": "db2-rep-id1",
    "docs_read": 0,
    "docs_written": 0,
    "doc_write_failures": 0,
    "doc_write_conflict": 0,
    "status": "error", <i class="conum" data-value="3"></i><b>(3)</b>
    "rejected_by_remote": 0,
    "rejected_by_local": 0,
    "config": {
      "replication_id": "db2-rep-id1",
      "direction": "pull",
      "remote": "http://user:password@example2.com:4985/db2-remote",
      "continuous": true
    }
  }
]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The configuration details included because <code>includeConfig=true</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>"Stopped" replications included because <code>activeOnly=false</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>"error" replications included because <code>includeError=true</code></td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="retrieving-sync-gateway-statistics"><a class="anchor" href="#retrieving-sync-gateway-statistics"></a>Retrieving Sync Gateway Statistics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sync Gateway maintains a comprehensive set of metrics covering performance and resource utilization.</p>
</div>
<div class="paragraph">
<p>The statistics schema includes replication metrics collected on a per-replication basis.
These can be especially useful in monitoring the health of Sync Gateway nodes. An increasingly important activity as deployments scale to support cloud-to-edge use cases.</p>
</div>
<div class="paragraph">
<p>Access to this data is provided through the Admin REST API endpoint <code>/_expvars</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="../stats-monitoring.html" class="page">Stats and Monitoring</a> for a full description of the available metrics.</p>
</div>
<div class="sect2">
<h3 id="available-replication-metrics"><a class="anchor" href="#available-replication-metrics"></a>Available Replication Metrics</h3>
<div class="paragraph">
<p>The metrics specifically related to replication are introduced in: <a href="#metrics-item-descriptions">Metrics item descriptions</a>, with the schema shown in <a href="#per-replication-metrics-schema">Example 3</a>.</p>
</div>
<div class="paragraph">
<p>For how to retrieve the metrics see: <a href="#retrieve-the-metrics">Retrieve the metrics</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="metrics-item-descriptions"><a class="anchor" href="#metrics-item-descriptions"></a>Metrics item descriptions</h3>
<div id="per-replication-metrics-schema" class="exampleblock">
<div class="title">Example 3. Per-replication metrics schema</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">  "<a href="#per_replication">per_replication</a>": {
    "<a href="#replname">$replname</a>": {
      "<a href="#sgr_active">sgr_active</a>": true,
      "<a href="#sgr_docs_checked_sent">sgr_docs_checked_sent</a>": 0,
      "<a href="#sgr_num_attachment_bytes_transferred">sgr_num_attachment_bytes_transferred</a>": 0,
      "<a href="#sgr_num_attachments_transferred">sgr_num_attachments_transferred</a>": 0,
      "<a href="#sgr_num_docs_failed_to_push">sgr_num_docs_failed_to_push</a>": 0,
      "<a href="#sgr_num_docs_pushed">sgr_num_docs_pushed</a>": 0,
      "<a href="#sgr_delta_pull_replication_count">sgr_delta_pull_replication_count</a>": 0,
      "<a href="#sgr_delta_push_doc_count">sgr_delta_push_doc_count</a>": 0,
      "<a href="#sgr_deltas_requested">sgr_deltas_requested</a>":  0,
      "<a href="#sgr_deltas_sent">sgr_deltas_sent</a>": 0,
      "<a href="#sgr_conflict_detected">sgr_conflict_detected</a>": 0,
      "<a href="#sgr_conflict_resolved">sgr_conflict_resolved</a>": 0,
      "<a href="#sgr_conflict_skipped_error">sgr_conflict_skipped_error</a>": 0
    }
  }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="replname"><a class="anchor" href="#replname"></a>$replname</h3>
<div class="paragraph">
<p>This is the group header for the stats for each replication between two Sync Gateway instances declared in the config file.</p>
</div>
</div>
<div class="sect2">
<h3 id="sgr_active"><a class="anchor" href="#sgr_active"></a>sgr_active</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Whether the replication is active at this time.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_docs_checked_sent"><a class="anchor" href="#sgr_docs_checked_sent"></a>sgr_docs_checked_sent</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>The total number of documents checked for changes since replication started.
This represents the number of potential change notifications pushed by Sync Gateway.</p>
</dd>
<dt class="hdlist1">Constraints</dt>
<dd>
<p>This is not necessarily the number of documents pushed, as a given target might already have the change.</p>
</dd>
<dt class="hdlist1">Values</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Continuous replication:</p>
<div class="paragraph">
<p>The value is true for the duration of the replication, and also once it has caught up (i.e is in the idle state).
  The value is false if the replication is explicitly cancelled.</p>
</div>
</li>
<li>
<p>One-shot replication</p>
<div class="paragraph">
<p>The value is true for the duration of the replication, and then false when it has completed or if it is cancelled.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Use Case</dt>
<dd>
<p>This metric can be useful when analyzing replication history, and to filter by active replications.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_num_attachments_transferred"><a class="anchor" href="#sgr_num_attachments_transferred"></a>sgr_num_attachments_transferred</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>The total number of attachments transferred since replication started.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_num_attachment_bytes_transferred"><a class="anchor" href="#sgr_num_attachment_bytes_transferred"></a>sgr_num_attachment_bytes_transferred</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>The total number of attachment bytes transferred since replication started.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_num_docs_failed_to_push"><a class="anchor" href="#sgr_num_docs_failed_to_push"></a>sgr_num_docs_failed_to_push</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>The total number of documents that failed to be pushed since replication started.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_num_docs_pushed"><a class="anchor" href="#sgr_num_docs_pushed"></a>sgr_num_docs_pushed</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>The total number of documents that were pushed since replication started.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_delta_pull_replication_count"><a class="anchor" href="#sgr_delta_pull_replication_count"></a>sgr_delta_pull_replication_count</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Desciption</dt>
<dd>
<p>The total number documents with deltas pulled</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_delta_push_doc_count"><a class="anchor" href="#sgr_delta_push_doc_count"></a>sgr_delta_push_doc_count</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Desciption</dt>
<dd>
<p>The total number of documents with deltas pushed</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_deltas_sent"><a class="anchor" href="#sgr_deltas_sent"></a>sgr_deltas_sent</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Desciption</dt>
<dd>
<p>The total number of deltas sent</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_deltas_requested"><a class="anchor" href="#sgr_deltas_requested"></a>sgr_deltas_requested</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Desciption</dt>
<dd>
<p>The total number of deltas requested</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_conflict_detected"><a class="anchor" href="#sgr_conflict_detected"></a>sgr_conflict_detected</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Desciption</dt>
<dd>
<p>The total number of documents where conflicts were detected</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgr_conflict_resolved"><a class="anchor" href="#sgr_conflict_resolved"></a>sgr_conflict_resolved</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Desciption</dt>
<dd>
<p>The total number of conflicting documents that were resolved successfully (by the active node)</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sgw_conflict_skipped_error"><a class="anchor" href="#sgw_conflict_skipped_error"></a>sgw_conflict_skipped_error</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Desciption</dt>
<dd>
<p>The total number of documents that were skipped during sync because of an error in conflict resolution</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="retrieve-the-metrics"><a class="anchor" href="#retrieve-the-metrics"></a>Retrieve the metrics</h3>
<div class="exampleblock">
<div class="title">Example 4. Using expvars</div>
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_request"></a>Request</p>
</li>
<li>
<p><a id="tabset3_response"></a>Response</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_request">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[data-source-url=https://github.com/ibsoln/docs-sync-gateway/blob/undefined/modules/ROOT/examples/configuration/sync-gateway-config.json]</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_response">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">// . . . other metrics items


// . . . other metrics items</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="card-row three-column-row">
<div class="sect5 column">
<h6 id=""><a class="anchor" href="#"></a></h6>
<div class="ulist">
<div class="title">Learn more ...</div>
<ul>
<li>
<p><a href="#sync-gateway::learn/icr-overview.adoc#introduction" class="page unresolved">Introducing Inter-Cluster Replication</a></p>
</li>
<li>
<p>{xref-sgw-pg-icr-delta-sync}</p>
</li>
<li>
<p><a href="icr-conflict-resolution.html" class="page">Conflict Resolution</a></p>
</li>
<li>
<p><a href="icr-replication-types.html" class="page">Replication Types</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-2"><a class="anchor" href="#-2"></a></h6>
<div class="ulist">
<div class="title">Reference material ...</div>
<ul>
<li>
<p><a href="../refer/config-properties.html" class="page">Configuration Schema</a></p>
</li>
<li>
<p><a href="../refer/rest-api-public.html" class="page">Public REST API</a></p>
</li>
<li>
<p><a href="../refer/rest-api-admin.html" class="page">Admin REST API</a></p>
</li>
<li>
<p><a href="../advance/adv-rest-api-client.html" class="page">Use the REST API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-3"><a class="anchor" href="#-3"></a></h6>
<div class="ulist">
<div class="title">Community Resources ...</div>
<ul>
<li>
<p><a href="https://forums.couchbase.com/c/mobile/14">Forum</a>  <strong>|</strong>  <a href="https://blog.couchbase.com/">Blog</a>   <strong>|</strong>  <a href="https://docs.couchbase.com/tutorials/index.html">Tutorials</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Conflict Related Blogs</div>
<ul>
<li>
<p><a href="https://blog.couchbase.com/document-conflicts-couchbase-mobile/">Automatic Conflict Resolution</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/conflict-resolution-couchbase-mobile/">Demystifying Conflict Resolution</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/tag/conflict-resolution/">Conflict Resolution (category)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2020 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
