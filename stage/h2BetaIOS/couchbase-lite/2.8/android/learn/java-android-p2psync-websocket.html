<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Peer-to-Peer Sync&#8201;&#8212;&#8201;Custom | Couchbase Docs</title>
<link rel="canonical" href="https://ibsoln.github.io/stage/h2BetaIOS/couchbase-lite/2.8/android/learn/java-android-p2psync-websocket.html">
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Couchbase Lite database peer-to-peer sync concepts using websockets">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="couchbase-lite">
<meta name="dcterms.identifier" content="2.8">
<meta name="generator" content="Antora 2.3.3">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">

              <a class="navbar-brand" href="../../../..">
                <img src="../../../../_/img/couchbase-documentation-logo.svg" alt="Couchbase" />
              </a>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <div class="parent-site">
                  <a href="https://www.couchbase.com">
                    Couchbase.com
                  </a>
                </div>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Try Free
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
<div class="left-sidebar-menu">
<div class="version-control-box">
<div class="component-frame">
<div class="frame-icon">
<img src="../../../../_/img/server-icon.png" alt="">
</div>
<div class="frame-body">
<h4 class="title"><span class="">Couchbase Lite (h2Beta-19JUN20)</span></h4>
<a class="navbar-item component" href="../../index.html"> <span class="version">2.8</span></a>
</div>
</div>
</div>
<div class="nav-menu">
<ul class="nav-list">
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Swift</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Start</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/start/swift-gs-prereqs.html">Prerequisites</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/start/swift-gs-install.html">Install</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/start/swift-gs-build.html">Test Build</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Next</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/next/swift-dbo-crud.html">Using CRUD Operations</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/next/swift-dbo-query.html">Using Query Operations</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Sync</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/advance/swift-p2psync-websocket-using-passive.html">Deploy Passive Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/advance/swift-p2psync-websocket-using-active.html">Deploy Active Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/advance/swift-p2p-managing-tls-id.html">Manage TLS Identity</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/advance/swift-dep-upgrade.html">Upgrading</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/advance/swift-troubleshooting.html">Troubleshooting</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-database.html">Working with Databases</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-document.html">Working with Documents</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-blob.html">Working with Blobs</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="#couchbase-lite:swift:learn/query/swift-query.adoc">Query the data</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#couchbase-lite:swift:learn/query/swift-query-live.adoc">Live Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#couchbase-lite:swift:learn/query/swift-query-predictive.adoc">Predictive Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-fts.html">Running Full-text Searches</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-replication.html">Working with Replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-dbreplica.html">Local Replicaton</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-conflict.html">Handling Conflicts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../swift/learn/swift-p2psync.html">Peer-to_peer Synchronization</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-p2psync-websocket.html">P2P - Websocket</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-p2psync-custom.html">P2P - Custom</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-thread-safety.html">Thread-safety</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-cert-pinning.html">Certificate Pinning</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="https://ibsoln.github.io/stage/api/mobile/2.8.0/couchbase-lite-swift">API References</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#couchbase-lite::{cbl-pg-glossary}">Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/product/swift-releasenotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#couchbase-lite:swift:product/swift-pn-supportnotes.adoc">Support Notices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../compatibility.html">Compatibility</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/product/swift-changelog.html">Change Log</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<a href="#" class="menu-expand-toggle"> <span>Navigation</span> <i class="fas fa-times-circle"></i> <i class="fas fa-chevron-circle-left"></i></a>
</div></nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
      <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/ianbridge/CouchbaseDocs/bau/cbl/modules/android/pages/learn/java-android-p2psync-websocket.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
      <div class="toc-menu"></div>
        <div class="is-this-helpful-box">
          <h4> Is this page helpful?</h4>
            <div class="btn-row">
              <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                     <i class="far fa-thumbs-up"></i>
                 Yes

                 </a>
              <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
            </div>
            <div class="any-feedback">
              <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
            </div>
            <div class="dialog-box" id="dialogBox">
              <form>
                  <div class="form-group " id="additionalFeedbackBox">
                    <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

                    <div class="action-btn-row ">
                      <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                       <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                       <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
                    </div>


                  </div>

              </form>

            </div>
      </div>
   </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../index.html">Couchbase Lite (h2Beta-19JUN20)</a></li>
<li class="crumb"><a href="java-android-p2psync-websocket.html">Peer-to-Peer Sync&#8201;&#8212;&#8201;Custom</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Peer-to-Peer Sync&#8201;&#8212;&#8201;Custom</h1>
<div class="labels">
<ul>
<li class="status"><span>beta -- H2-CBL as at 29Jun20</span></li>
</ul>
</div>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Couchbase Lite database peer-to-peer sync concepts using websockets
{param-abstract}
</blockquote>
</div>
</div>
</div>
<div class="sect1 pane__frames">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="ulist .no-title . no-color">
<div class="title"></div>
<ul class=".no-title . no-color">
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Couchbase Lite provides out-of-the-box <a href="../../refer-glossary.html#peer-to-peer-sync" class="page">Peer-to-Peer Sync</a>, over websockets, between Couchbase Lite enabled clients in IP-based networks.</p>
</div>
<div class="paragraph">
<p>Using this <em>WebsocketEndpointListener</em> developers can implement peer-to-peer replication without navigating the compexity of the <em>MessageEndpoint</em> API, which can often be a barrier.
The <em>WebsocketEndpointListener</em> listens for incoming websocket connections on a user-defined, or auto-selected, port.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist narrow">
<div class="title">How to use</div>
<ul>
<li>
<p><a href="https://ibsoln.github.io/stage/api/mobile/2.8.0/couchbase-lite-java-android">API Reference</a></p>
</li>
<li>
<p><a href="#couchbase-lite:android:advance/java-android-p2psync-websocket-using-passive.adoc" class="page unresolved">Deploy Passive Peer</a></p>
</li>
<li>
<p><a href="#couchbase-lite:android:advance/java-android-p2psync-websocket-using-active.adoc" class="page unresolved">Deploy Active Peer</a></p>
</li>
<li>
<p><a href="#couchbase-lite:android:advance/java-android-p2p-managing-tls-id.adoc" class="page unresolved">Manage TLS Identity</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a>Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The listener features comprise:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Capable of serving one couchbase lite databases per listener.</p>
<div class="ulist">
<ul>
<li>
<p>Instantiated by client, each instance for different db. no limit on instances (ex. practical limit).</p>
</li>
<li>
<p>If user-defined port is not specified, the system will automatically select a port to use.</p>
</li>
<li>
<p>The API allows users to get the current port of the listener.</p>
</li>
<li>
<p>The API CAN return the list of URL(s) endpoint of listener. The URL must include the listener port as well as the serving database.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Support for encryption and authentication over TLS with multiple modes comprising:</p>
<div class="ulist">
<ul>
<li>
<p>Anonymous</p>
<div class="paragraph">
<p>Auto-generated anonymous TLS Identity if the TLS Identity is not specified.
This provides encryption but <strong>not</strong> authentication.</p>
</div>
</li>
<li>
<p>Certificate</p>
<div class="paragraph">
<p>Self-signed or Client Certificate Authentication (CA signed).</p>
</div>
</li>
<li>
<p>Not-enabled, that-is, plain text.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Support for basic authentication.</p>
</li>
<li>
<p>Delta Sync Support.</p>
</li>
<li>
<p>Built-in network resiliency with retries.</p>
</li>
<li>
<p>Built-in conflict resolution support (automatic and custom).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api"><a class="anchor" href="#api"></a>API</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="#urlendpointlistener">URLEndpointListener</a>
| <a href="#urlendpointlistenerconfiguration">URLEndpointListenerConfiguration</a>
| <a href="#tlsidentity">TLSIdentity</a></p>
</div>
<div class="sect2">
<h3 id="urlendpointlistener"><a class="anchor" href="#urlendpointlistener"></a>URLEndpointListener</h3>
<div class="paragraph">
<p><a href="#URLEndpointListener-class">Class Definition</a> |
<a href="#URLEndpointListener-props">Properties</a> |
<a href="#URLEndpointListener-constructors">Constructors</a> |
<a href="#URLEndpointListener-methods">Methods</a></p>
</div>
<div class="paragraph">
<p>The <code>URLEndpointListener</code> is the Peer-to-Peer listener for replication. It acts like a passive replicator, in the same way that Sync Gateway does.</p>
</div>
<div class="paragraph">
<p>Core functionalities of the listener are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users can initialize the class using a <em>URLEndpointListenerConfiguration</em> object.</p>
</li>
<li>
<p>The listener can be started, or can be stopped.</p>
</li>
<li>
<p>Once the listener is started, a total number of connections or active connections can be checked.</p>
</li>
</ul>
</div>
<div id="URLEndpointListener-class" class="paragraph">
<div class="title">Class Definition</div>
<p>URLEndpointListener class provides a WebSocket based listener for replicating with a database. On the client side, the URLEndpoint will be used to point to the URL of the listener.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java"></code></pre>
</div>
</div>
<div id="URLEndpointListener-constructors" class="paragraph">
<div class="title">Constructors</div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Objective</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a configuration object with a database object. The other properties of the object will have its default value (See Properties section for more detail).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">init(config: URLEndpointListenerConfiguration)</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Post conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A URLEndpointListenerConfiguration object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java"></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the constructer as shown above.</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
<div id="URLEndpointListener-props" class="paragraph">
<div class="title">Properties</div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Nullable</th>
<th class="tableblock halign-left valign-top">ReadOnly</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URLEndpointListenerConfiguration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The configuration object used for creating the listener.
See <a href="#urlendpointlistenerconfiguration">URLEndpointListenerConfiguration</a> for more detail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depend on Platform</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the listening port of the listener.
When the listener is not started, the port will be null (if the platform can have the optional value type) otherwise zero.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tlsIdentity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSIdentity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The TLS identity used by the listener.
The identity could be specified by users or the generated anonymous identity.</p>
<p class="tableblock">When the TLS is enabled and the tlsIdentity is not specified, the listener will generate an anonymous self-signed identity when the listener starts.</p>
<p class="tableblock"><strong>Note</strong>: the auto-generated anonymous self-signed identity could be saved for future use so that the identity doesn’t need to be re-generated every time if the platform (for example, Apple platforms) supports secure storage.</p>
<p class="tableblock">When the listener is not started, the identity property will be null, and when the TLS is distabled, the identity property will be always null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">urls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array&lt;URL&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URLs of the listener.</p>
<p class="tableblock">If the network interface is specified, there will be only one URL that reflects the network interface address in the array.</p>
<p class="tableblock">If the network interface is not specified, we will gather all possible URLs from all network interfaces that the listener is listening to.</p>
<p class="tableblock">The value will be null if the listener is not started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConnectionStatus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The connection status of the listener. See the ConnectionStatus section for more detail</p></td>
</tr>
</tbody>
</table>
<div id="URLEndpointListener-methods" class="paragraph">
<div class="title">Methods</div>
<p><code>start()</code></p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Objective</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synchronously starts the listener</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The listener can be in either <code>started</code> or <code>stopped</code> state.
If the listener has already been started, the <code>start()</code> operation will be no-ops.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Post conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The listener is an a <code>started</code> state</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A CouchbaseLiteException is thrown if the listener cannot be started.
The most common error would be that the configured port has already been used.
The error code is <strong>TBD</strong>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>stop()</code></p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Objective</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synchronously stops the listener</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The listener can be in either <code>started</code> or <code>stopped</code> state.
If the listener has already been stopped, the <code>stop()</code> operation will be no-ops.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Post conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The listener is an a <code>stopped</code> state</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="urlendpointlistenerconfiguration"><a class="anchor" href="#urlendpointlistenerconfiguration"></a>URLEndpointListenerConfiguration</h3>
<div class="paragraph">
<p><a href="#URLEndpointListenerConfiguration-class">Class Definition</a> |
<a href="#URLEndpointListenerConfiguration-props">Properties</a> |
<a href="#URLEndpointListenerConfiguration-constructors">Constructors</a> |
<a href="#URLEndpointListenerConfiguration-methods">[URLEndpointListenerConfiguration-methods]</a> |
<a href="https://ibsoln.github.io/stage/api/mobile/2.8.0/couchbase-lite-java-android/Classes/CBLURLEndpointListenerConfiguration.html">API Reference</a></p>
</div>
<div class="paragraph">
<p>A configuration class used for creating a <em>URLEndpointListener</em> object.
The property setters should be made fluent API if the platform allows.</p>
</div>
<div id="URLEndpointListenerConfiguration-class" class="paragraph">
<div class="title">Class Definition</div>
<p>A configuration class used for creating a <em>URLEndpointListener</em> object.
The property setters should be made fluent API if the platform allows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class URLEndpointListenerConfiguration {
    // Properties
    public let database: Database
    public var port: UInt16?
    public var networkInterface: String?
    public var disableTLS: Bool
    public var tlsIdentity: TLSIdentity?
    public var authenticator: ListenerAuthenticator?
    public var enableDeltaSync: Bool
    // Constructors
    public init(database: Database)
    public init(config: URLEndpointListenerConfiguration)
}</code></pre>
</div>
</div>
<div id="URLEndpointListenerConfiguration-constructors" class="listingblock">
<div class="title">Constructors</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">init(database: Database)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Objective</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a configuration object with a database object. The other properties of the object will have its default value (See Properties section for more detail).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Post conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A URLEndpointListenerConfiguration object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">init(config: URLEndpointListenerConfiguration)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Objective</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a configuration object from an existing config object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Post conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A URLEndpointListenerConfiguration object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
</tr>
</tbody>
</table>
<div id="URLEndpointListenerConfiguration-props" class="paragraph">
<div class="title">Properties</div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Nullable</th>
<th class="tableblock halign-left valign-top">ReadOnly</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A database object associated with the listener.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depend on Platform</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port that the listener will listen to.
When the port is null or zero, the listener will listen to an available port (auto-assigned). Default value is null or zero depending on platform.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">networkInterface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network Interface in the form of the IP Address or network interface name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disableTLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS is enabled by default.
Use <code>disableTLS</code> to disable TLS communication if necessary</p>
</div>
<div class="paragraph">
<p>This property works in conjunction with <code>TLSidentity</code>, which enables developers to define the key and-or certificate to be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If <code>disableTLS</code> is true, TLS communication is disabled and the <code>tlsIdentity</code> property is ignored.
So, the URL scheme used to connect to the listener will be <code>ws://</code> NOT <code>wss://</code>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">See also</dt>
<dd>
<p><code>TLSIdentity</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Default:
False&#8201;&#8212;&#8201;that is, TLS is enabled by default and the URL scheme to connect to the listener is <code>wss://</code>.
API Reference:  {url-api-reference-urlendpointconfiguration-disable-tls}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tlsIdentity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSIdentity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Use this configuration property to specify the TLS Identity used in TLS communication.</p>
</div>
<div class="paragraph">
<p>If <code>TLSIdentity</code> is not set when TLS is enabled (default), the listener uses an auto-generated anonymous self-signed identity.
This doesn&#8217;t authenticate or verify trust (on the client side) but it does encrypt communication, giving a more secure option than Non-TLS communication.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Resuable Id</div>
 If the platform supports secure storage, you can save and re-use the auto-generated identity. This avoids the need to generate new identities every time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Default:
Nil&#8201;&#8212;&#8201;in this case an auto-generated anonymous self-signed identity is used unless <code>disableTLS = true</code></p>
</div>
<div class="paragraph">
<p>API Reference:  {url-api-reference-urlendpointconfiguration-tls-id}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authenticator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ListenerAuthenticator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Use this configuration property to specify the authenticator to be used by the listener to authenticate the request.</p>
</div>
<div class="paragraph">
<p>This should be set to one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ListenerPasswordAuthenticator</p>
</li>
<li>
<p>ListenerCertificateAuthenticator</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default:
Null&#8201;&#8212;&#8201;there is no authentication.
API Reference:  {url-api-reference-urlendpointconfiguration-auth}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow only pull replication if the value is true. Default value is false.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enableDeltaSync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable Delta Sync. The default value is false.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="tlsidentity"><a class="anchor" href="#tlsidentity"></a>TLSIdentity</h3>
<div class="paragraph">
<p><a href="#URLEndpointListener-class">Class Definition</a> |
<a href="#URLEndpointListener-props">Properties</a> |
<a href="#URLEndpointListener-constructors">Constructors</a> |
<a href="#URLEndpointListener-methods">Methods</a></p>
</div>
<div class="paragraph">
<p>TLSIdentity represents the identity information (Key pair and Certificates) used for setting up TLS Communication.
The TLSIdentity API differs from platform-to-platform.
This API is based on the android platform, which uses the Android OS KeyStore to store keys and certificates.</p>
</div>
<div id="tlsidentity-class" class="listingblock">
<div class="title">Class Definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class TLSIdentity {
  //
  // Properties
  public let certs: Array&lt;Certificate&gt;
  public let expiration: Date
  //
  // Methods
  public static func getIdentity(alias: String, keyPassword: Data?) throws -&gt; TLSIdentity?
  public static func getIdentity(privateKey: PrivateKeyEntry, certificate: Array&lt;Certificate&gt;) -&gt; TLSIdentity
  public static func createIdentity(isServer: Bool, attributes: Dictionary&lt;String, String&gt;, expiration: Date?, alias: String, keyPassword: Data?) throws -&gt; TLSIdentity
  public static func importIdentity(data: InputStream, dataType: String /* jsk or pkcs12 */, dataPassword: Data?, alias: String, keyPassword: Data?) throws -&gt; TLSIdentity
  public static func deleteIdentity(alias: String) throws
}</code></pre>
</div>
</div>
<div id="tlsidentity-props" class="paragraph">
<div class="title">Properties</div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Nullable</th>
<th class="tableblock halign-left valign-top">ReadOnly</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">certs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array&lt;SecCertificate&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The certificate chain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expiration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expiration date of the (leaf) certificate of the TLSIdentity.</p></td>
</tr>
</tbody>
</table>
<div id="tlsidentity-methods" class="paragraph">
<div class="title">Methods</div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>getIdentity()</code></strong></caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Option 1</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">getIdentity(alias: String, keyPassword: Data?) throws -&gt; TLSIdentity?</code></pre>
</div>
</div>
</li>
<li>
<p>Option 2</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">getIdentity(privateKey: PrivateKeyEntry, certificate: Array&lt;Certificate&gt;) -&gt; TLSIdentity</code></pre>
</div>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get the TLSIdentity of the given <em>alias</em> or <em>privateKey</em> from the secure storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identity returned from the secure storage. If the identity doesn’t exist, this method will return null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CouchbaseLiteException will be thrown if there is an error occurred while getting the identity from the secure storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java"></code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><code>createIdentity(isServer, attributes, expiration, alias, keyPassword)</code></caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">createIdentity(isServer: Bool, attributes: Dictionary&lt;String, String&gt;?, expiration: Date?, alias: String, keyPassword: Data?) throws -&gt; TLSIdentity</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Objective</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create and store a client self-signed identity in a secure storage. The identity will be stored in the secure storage using the given label.</p>
<p class="tableblock">The isServer tells that the certificate being created is a server or client certificate. The certificate attributes are optional. If the expiration date is not specified, the expiration date of the certificate will be 365 days.</p>
<p class="tableblock">When creating a certificate, the common name attribute is required for creating a CSR. If the common name is not presented in the certificate, an exception will be thrown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A self-signed TLSIdentity. The identity is stored in the secure storage using the specified label.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CouchbaseLiteException will be thrown when the identity cannot be created.</p>
<p class="tableblock"><strong>The error code will be determined during the technical design phase.</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><code>importIdentity(data, password, alias, keyPassword) throws &#8594; TLSIdentity</code></div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">form</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">importIdentity(data: InputStream, dataType: String /* jsk or pkcs12 */, dataPassword: Data?, alias: String, keyPassword: Data?) throws -&gt; TLSIdentity</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import the identity from the given JSK or PKCS12 Data and password.
The identity is stored in the secure storage using the given alias.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A TLSIdentity is created. The identity is stored in the secure storage using the specified label.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CouchbaseLiteException will be thrown when the identity cannot be created. The error code will be determined during the technical design phase.</p>
<p class="tableblock">CouchbaseLiteException will be thrown if the common name is not presented in the certificate.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><code>deleteIdentity(label)</code></div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">deleteIdentity(label: String) throws</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete the identity of the given label or alias from the secure storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identity is deleted from the storage. If the identity doesn’t exist, this operation will be no-ops.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CouchbaseLiteException will be thrown when the identity cannot be deleted. The error code will be determined during the technical design phase.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="listenerauthenticator"><a class="anchor" href="#listenerauthenticator"></a>ListenerAuthenticator</h3>
<div class="listingblock">
<div class="title">Definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public protocol ListenerAuthenticator { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This opaque authenticator interface is implemented by the authenticator classes. Couchbase Lite supports two types of the authenticator:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ListenerPasswordAuthenticator</p>
</li>
<li>
<p>ListenerCertificateAuthenticator</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="listenerpasswordauthenticator"><a class="anchor" href="#listenerpasswordauthenticator"></a>ListenerPasswordAuthenticator</h3>
<div class="paragraph">
<p>Use the <code>ListenerPasswordAuthenticator</code> class to provide password type authentication such as the Basic Authentication.</p>
</div>
<div class="paragraph">
<p>The actual authentication logic is provided through a <code>ListenerPasswordAuthenticatorDelegate</code> object provided by the application code.
Often in the form of a closure where the platform permits.</p>
</div>
<div class="listingblock">
<div class="title">Class Definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class ListenerPasswordAuthenticator : ListenerAuthenticator {
    // Constructors
    public init(delegate: ListenerPasswordAuthenticatorDelegate) { }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Constructors</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">init(delegate: ListenerPasswordAuthenticatorDelegate)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a ListenerPasswordAuthenticator object with the given delegate object used for authenticating the username and password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A ListenerPasswordAuthenticator object.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="listenerpasswordauthenticatordelegate"><a class="anchor" href="#listenerpasswordauthenticatordelegate"></a>ListenerPasswordAuthenticatorDelegate</h3>
<div class="paragraph">
<p>Use the <code>ListenerPasswordAuthenticatorDelegate</code> type to provide the application logic to be used to authenticate user credentials such as name and password.</p>
</div>
<div class="paragraph">
<p>Your <code>ListenerPasswordAuthenticatorDelegate</code> should be a function or block (such as a closure expression) if the platform allows.</p>
</div>
<div class="paragraph">
<p>The parameters are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User Name&#8201;&#8212;&#8201;type String</p>
</li>
<li>
<p>Password&#8201;&#8212;&#8201;type will depend on the platform, for example SecureString for .NET or byte[] for Java.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-{source-languge} hljs" data-lang="{source-languge}">public protocol ListenerPasswordAuthenticatorDelegate {
    func authenticate(username: String, password: Data) -&gt; Bool
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listenercertificateauthenticator"><a class="anchor" href="#listenercertificateauthenticator"></a>ListenerCertificateAuthenticator</h3>
<div class="paragraph">
<p>Use the <code>ListenerCertificateAuthenticator</code> class to authenticate  clients certificates.
This requires you have TLS enabled.
You can verify the certificate using either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Root CA certificate chains&#8201;&#8212;&#8201;any client cert signed by the given root CA cert chains is authenticated</p>
</li>
<li>
<p>Application logic&#8201;&#8212;&#8201;an option used mainly for authenticating self-signed certificates</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For Java, the equivalent of the SecCertificate is Certificate and for .NET, the equivalent of the SecCertificate is X509Certificate2.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="constructors"><a class="anchor" href="#constructors"></a>Constructors</h4>
<div class="sect4">
<h5 id="for-root-ca-chain-authentication"><a class="anchor" href="#for-root-ca-chain-authentication"></a>For Root CA Chain Authentication</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-{source-langauge} hljs" data-lang="{source-langauge}">init(rootCerts: [SecCertificate])</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Usage:</div>
<p>Initialize the <code>ListenerCertificateAuthenticator</code> using the <code>rootCert</code> interface. This identifies the Root CA Chain to be used to verify a certificate chain received from the client.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Root Cert authentication</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java"></code></pre>
</div>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a ListenerCertificateAuthenticator object with the given root CA certificate chains.
Any client cert that&#8217;s been signed by the given root CA cert chains will be authenticated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ListenerCertificateAuthenticator object.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-{source-langauge} hljs" data-lang="{source-langauge}">init(delegate: ListenerCertificateAuthenticatorDelegate)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Usage</p>
</div>
<div class="paragraph">
<p>Initialize the <code>ListenerCertificateAuthenticator</code> using the <code>ListenerCertificateAuthenticatorDelegate</code> interface. This identifies the application logic to be used to verify a certificate chain received from the client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public protocol ListenerCertificateAuthenticatorDelegate {
    func authenticate(certs: Array&lt;SecCertificate&gt;) -&gt; Bool
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The logic should take the form of function or block (such as, a closure expression) if the platform allows.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Cert authentication closure</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java"></code></pre>
</div>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a ListenerCertificateAuthenticator object with the given delegate object to verify the certificates received from the client.
When given the delegate object, it means that developers will need to verify the certificate chain received from the client by themselves.
This option is mostly used for authenticating the self-sign certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ListenerCertificateAuthenticator object.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listenercertificateauthenticatordelegate"><a class="anchor" href="#listenercertificateauthenticatordelegate"></a>ListenerCertificateAuthenticatorDelegate</h3>
<div class="ulist NOTE">
<div class="title">SecCertificate equivalents</div>
<ul class="NOTE">
<li>
<p>For Java, the equivalent of the SecCertificate is Certificate.</p>
</li>
<li>
<p>For .NET, the equivalent of the SecCertificate is X509Certificate2.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="connectionstatus"><a class="anchor" href="#connectionstatus"></a>ConnectionStatus</h3>
<div class="paragraph">
<p>ConnectionStatus provides information about the current number of the connections and the current number of the active connections served by the URLEndpointListener object.
The connection information can be used by developers to decide whether they could stop the listener.</p>
</div>
<div class="listingblock">
<div class="title">Definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class ConnectionStatus {
    // Properties
    public let connectionCount: UInt
    public let activeConnectionCount: UInt
 }</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nullable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connectionCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current number of the connections served by the listener.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activeConnectionCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current number of the active connections (BUSY) served by the listener.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="anchor" href="#security"></a>Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peer-to&#8212;&#8203;peer sync supports <a href="#using-basic-authentication">Basic Authentication</a> and <a href="#using-tls">TLS Authentication</a>.
For anything other than test deployments, we strongly encourage the use of TLS. In fact, peer-to-peer sync using WebsocketEndpointListener is encrypted using TLS by default.</p>
</div>
<div class="paragraph">
<p>The authentiation mechanism used is defined at endpoint level, meaning that it is independent of the database being replicated. So when replicating multiple database instances you may use basic on one instance an another authentication method on other instances.</p>
</div>
<div class="sect2">
<h3 id="using-tls"><a class="anchor" href="#using-tls"></a>Using TLS</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Mminimum supported version of TLS is TLS 1.2.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Peer-to-peer sync using WebsocketEndpointListener supports certificate based authentication of the server and-or listener:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For server side certificates can be: self signed, from trusted CA or anonymous (system generated).</p>
</li>
<li>
<p>For listeners certificates may be: self signed or trusted CA signed.</p>
<div class="paragraph">
<p>Where a TLS cert is not explicitly specified for the listener, the Listener implementation will generate anonymous cert to use for encryption</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The difficulties of managing certificates in disconnected edge environments means that self-signed certs are the more likely use case in such  environments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cert Management (distribution/ revocation) is outside the scope of implementation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Peer-to-peer sync using WebsocketEndpointListener supports the ability to opt out of TLS encryption communication.
Active clients replicating with a WebsocketEndpointListener have the option to skip validation of server certs when the listener is configured with self-signed certs.
This option is ignored when dealing with CA certs.</p>
</div>
<div class="sect3">
<h4 id="replicatorconfiguration"><a class="anchor" href="#replicatorconfiguration"></a>ReplicatorConfiguration</h4>
<div class="paragraph">
<p>The <code>replicatorConfiguration</code> class provides two additional properties supporting TLS.</p>
</div>
<div class="sect4">
<h5 id="servercertificateverficationmode-property"><a class="anchor" href="#servercertificateverficationmode-property"></a><code>serverCertificateVerficationMode</code> property.</h5>
<div class="paragraph">
<p>Use this to specify how the replicator should verify the server identity.
Two modes are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CA-CERT&#8201;&#8212;&#8201;The replicator verifies the server identity by using the trusted CA or using the pinned server certificate.</p>
</li>
<li>
<p>SELF-SIGNED-CERT&#8201;&#8212;&#8201;The replicator will accept all and only self-signed certificates.
The replicator will reject non-self-signed certificates.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public enum ServerCertificateVerificationMode {
    CA-CERT, SELF-SIGNED-CERT
}

public class ReplicatorConfiguration {
    public var serverCertificateVerificationMode: ServerCertificateVerificationMode = .CA-CERT
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="servercertificate-property"><a class="anchor" href="#servercertificate-property"></a><code>serverCertificate</code> property</h5>
<div class="paragraph">
<p>Use this readOnly serverCertificate property to identify what the current server certificate is.</p>
</div>
<div class="paragraph">
<p>Saving the the certificate and pinning it the net time you set-up the replicator can provide an SSH type of authentication.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class ReplicatorConfiguration {
    public let serverCertificate: SecCertificate?
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For Java, the equivalent of the SecCertificate is Certificate and for .NET, the equivalent of the SecCertificate is X509Certificate2.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="clientcertificateauthenticator"><a class="anchor" href="#clientcertificateauthenticator"></a>ClientCertificateAuthenticator</h4>
<div class="paragraph">
<p>ClientCertificateAuthenticator is a ReplicatorConfiguration authenticator set.
Use it when creating a replicator to tell the replicator to use the client certificate for authentication.</p>
</div>
<div class="listingblock">
<div class="title">Definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class ClientCertificateAuthenticator: Authenticator {
    // Properties
    public let identity: TLSIdentity

    // Constructors
    public init(identity: TLSIdentity)
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Constructors</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">init(identity: TLSIdentity)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a ClientCertificateAuthenticator object with an identity which contains (Public &amp; Private) keys and the certificate and optional CA Certs for verifying the identity’s certification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postconditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A ClientCertificateAuthenticator object</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Properties</div>
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nullable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSIdentity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identity object given when creating the ClientCertificaterAuthenticator object.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="using-basic-authentication"><a class="anchor" href="#using-basic-authentication"></a>Using Basic Authentication</h3>
<div class="paragraph">
<p>The passive client supports basic uthentication using username and password credentials.</p>
</div>
<div class="sect3">
<h4 id="basicauthenticator"><a class="anchor" href="#basicauthenticator"></a><code>BasicAuthenticator</code></h4>
<div class="paragraph">
<p>Because of security concerns we keep passwords in a <code>SecureString</code> format for .NET and in byte array format form other platforms as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class BasicAuthenticator {
    // Deprecate Property
    public let password: String

    // New Property
    public let passwordData: Data

    // Deprecate
    public init(username: String, password: String)
    // New Constructor
    public init(username: String, password: Data)
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sizing"><a class="anchor" href="#sizing"></a>Sizing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/_partials/commons/common-p2psync-websocket.adoc - include::ROOT:partial$p2p-sizing.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sizing - eg num websocket endponi listeners</p>
<div class="ulist">
<ul>
<li>
<p>The scalability of the sync must only be limited by OS-level factors like number of open socket descriptions, volume of mutations getting synced .</p>
</li>
</ul>
</div>
</li>
<li>
<p>We must provide some guidance on the sizing factors that will determine the number of supported clients. This is probably the most commonly asked question when it comes to p2p support. Alternatives like MPC specify the same.
Context: This has been one of the reasons why off-the-shelf solutions haven’t worked requiring custom implementation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conflict-handling"><a class="anchor" href="#conflict-handling"></a>Conflict handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/_partials/commons/common-p2psync-websocket.adoc - include::ROOT:partial$p2p-conflict.adoc[]</p>
</div>
</div>
</div>
<div class="sect1 pane__frames cols-3">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="ulist">
<div class="title">How-to &#8230;&#8203;</div>
<ul>
<li>
<p>Write peer-to-peer listener (websockets)</p>
<div class="ulist">
<ul>
<li>
<p>Write <a href="#couchbase-lite:android:advance/java-android-p2psync-websocket-using-passive.adoc" class="page unresolved">Deploy Passive Peer</a> listener</p>
</li>
<li>
<p>Write <a href="#couchbase-lite:android:advance/java-android-p2psync-websocket-using-active.adoc" class="page unresolved">Deploy Active Peer</a> listener</p>
</li>
</ul>
</div>
</li>
<li>
<p>Write <a href="java-android-p2psync-custom.html" class="page">P2P - Custom</a> listener</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Learn more &#8230;&#8203;</div>
<ul>
<li>
<p><a href="java-android-p2psync.html" class="page">Peer-to_peer Synchronization</a></p>
</li>
<li>
<p>include how-to links as relevant,</p>
</li>
<li>
<p>include how-to links as relevant,</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Dive Deeper &#8230;&#8203;</div>
<ul>
<li>
<p>Reference content</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://ibsoln.github.io/stage/api/mobile/2.8.0/couchbase-lite-java-android">API References</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://forums.couchbase.com/c/mobile/14">Forum</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/">Blog</a></p>
</li>
<li>
<p><a href="https://docs.couchbase.com/tutorials/index.html">Tutorials</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2020 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
