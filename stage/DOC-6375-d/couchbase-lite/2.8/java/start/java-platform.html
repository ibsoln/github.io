<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Couchbase Lite Java Framework | Couchbase Docs</title>
<link rel="canonical" href="https://ibsoln.github.io/stage/DOC-6375-d/couchbase-lite/2.8/java/start/java-platform.html">
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="couchbase-lite">
<meta name="dcterms.identifier" content="2.8">
<meta name="generator" content="Antora 2.3.3">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">

              <a class="navbar-brand" href="../../../..">
                <img src="../../../../_/img/couchbase-documentation-logo.svg" alt="Couchbase" />
              </a>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <div class="parent-site">
                  <a href="https://www.couchbase.com">
                    Couchbase.com
                  </a>
                </div>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Try Free
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
<div class="left-sidebar-menu">
<div class="version-control-box">
<div class="component-frame">
<div class="frame-icon">
<img src="../../../../_/img/server-icon.png" alt="">
</div>
<div class="frame-body">
<h4 class="title"><span class="">CBL.90820</span></h4>
<a class="navbar-item component" href="../../index.html"> <span class="version">2.8</span></a>
</div>
</div>
</div>
<div class="nav-menu">
<ul class="nav-list">
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../../introduction.html">Introduction</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../whatsnew.html">What&#8217;s New</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../refer-glossary.html">Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../../android/quickstart.html">Android (Java)</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Start</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/start/java-android-gs-prereqs.html">Prerequisites</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/start/java-android-gs-install.html">Install</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/start/java-android-gs-build.html">Test Build</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Sync</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/advance/java-android-p2psync-websocket-using-passive.html">Passive Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/advance/java-android-p2psync-websocket-using-active.html">Active Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/advance/java-android-p2p-managing-tls-id.html">Manage TLS Identities</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/advance/java-android-dep-upgrade.html">Upgrading</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/advance/java-android-troubleshooting.html">Troubleshooting</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-database.html">Working with Databases</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-document.html">Working with Documents</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-blob.html">Working with Blobs</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../android/learn/java-android-query.html">Working with Queries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/learn/java-android-query-live.html">Live Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/learn/java-android-query-predictive.html">Predictive Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/learn/java-android-fts.html">Running Full-text Searches</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-replication.html">Sync Gateway Replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-dbreplica.html">Inter Database Replicaton</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-conflict.html">Handling Conflicts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Synchronization</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/learn/java-android-p2psync-websocket.html">Peer-to-peer sync over web sockets</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../android/learn/java-android-p2psync-custom.html">Peer-to-peer sync (custom)</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-thread-safety.html">Thread-safety</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/learn/java-android-cert-pinning.html">Certificate Pinning</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="nav-text ">android[API References]</span>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/refer/java-android-refer-glossary.html">Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/product/java-android-releasenotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/product/java-android-supportnotes.html">Support Notices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/product/java-android-compatibility.html">Compatibility</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../android/product/java-android-changelog.html">Change Log</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../../csharp/quickstart.html">C#.Net</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Start</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/start/csharp-gs-prereqs.html">Prerequisites</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/start/csharp-gs-install.html">Install</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/start/csharp-gs-build.html">Test Build</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Sync</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/advance/csharp-p2psync-websocket-using-passive.html">Passive Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/advance/csharp-p2psync-websocket-using-active.html">Active Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/advance/csharp-p2p-managing-tls-id.html">Manage TLS Identities</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/advance/csharp-dep-upgrade.html">Upgrading</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/advance/csharp-troubleshooting.html">Troubleshooting</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-database.html">Working with Databases</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-document.html">Working with Documents</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-blob.html">Working with Blobs</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../csharp/learn/csharp-query.html">Working with Queries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/learn/csharp-query-live.html">Live Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/learn/csharp-query-predictive.html">Predictive Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/learn/csharp-fts.html">Running Full-text Searches</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-replication.html">Sync Gateway Replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-dbreplica.html">Inter Database Replicaton</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-conflict.html">Handling Conflicts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Synchronization</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/learn/csharp-p2psync-websocket.html">Peer-to-peer sync over web sockets</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../csharp/learn/csharp-p2psync-custom.html">Peer-to-peer sync (custom)</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-thread-safety.html">Thread-safety</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/learn/csharp-cert-pinning.html">Certificate Pinning</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="nav-text ">net/api/Couchbase.Lite[API References]</span>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/refer/csharp-refer-glossary.html">Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/product/csharp-releasenotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/product/csharp-supportnotes.html">Support Notices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/product/csharp-compatibility.html">Compatibility</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../csharp/product/csharp-changelog.html">Change Log</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../quickstart.html">Java</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Start</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="java-gs-prereqs.html">Prerequisites</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="java-gs-install.html">Install</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="java-gs-build.html">Test Build</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Sync</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../advance/java-p2psync-websocket-using-passive.html">Passive Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../advance/java-p2psync-websocket-using-active.html">Active Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#couchbase-lite:java:advance/java-p2p-managing-tls-id.adoc">Manage TLS Identities</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/java-dep-upgrade.html">Upgrading</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/java-troubleshooting.html">Troubleshooting</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-database.html">Working with Databases</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-document.html">Working with Documents</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-blob.html">Working with Blobs</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../learn/java-query.html">Working with Queries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../learn/java-query-live.html">Live Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../learn/java-query-predictive.html">Predictive Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../learn/java-fts.html">Running Full-text Searches</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-replication.html">Sync Gateway Replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-dbreplica.html">Inter Database Replicaton</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-conflict.html">Handling Conflicts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Synchronization</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../learn/java-p2psync-websocket.html">Peer-to-peer sync over web sockets</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#couchbase-lite:java:learn/java-p2psync-custom.adoc">Peer-to-peer sync (custom)</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#couchbase-lite:java:learn/java-thread-safety.adoc">Thread-safety</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../learn/java-cert-pinning.html">Certificate Pinning</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="nav-text ">java[API References]</span>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/java-refer-glossary.html">Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../product/java-releasenotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../product/java-supportnotes.html">Support Notices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../product/java-compatibility.html">Compatibility</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../product/java-changelog.html">Change Log</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../../objc/quickstart.html">Objective C</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Start</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/start/objc-gs-prereqs.html">Prerequisites</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/start/objc-gs-install.html">Install</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/start/objc-gs-build.html">Test Build</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Sync</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/advance/objc-p2psync-websocket-using-passive.html">Passive Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/advance/objc-p2psync-websocket-using-active.html">Active Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/advance/objc-p2p-managing-tls-id.html">Manage TLS Identities</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/advance/objc-dep-upgrade.html">Upgrading</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/advance/objc-troubleshooting.html">Troubleshooting</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-database.html">Working with Databases</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-document.html">Working with Documents</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-blob.html">Working with Blobs</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../objc/learn/objc-query.html">Working with Queries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/learn/objc-query-live.html">Live Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/learn/objc-query-predictive.html">Predictive Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/learn/objc-fts.html">Running Full-text Searches</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-replication.html">Sync Gateway Replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-dbreplica.html">Inter Database Replicaton</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-conflict.html">Handling Conflicts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Synchronization</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/learn/objc-p2psync-websocket.html">Peer-to-peer sync over web sockets</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../objc/learn/objc-p2psync-custom.html">Peer-to-peer sync (custom)</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-thread-safety.html">Thread-safety</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/learn/objc-cert-pinning.html">Certificate Pinning</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="nav-text ">objc[API References]</span>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/refer/objc-refer-glossary.html">Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/product/objc-releasenotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/product/objc-supportnotes.html">Support Notices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/product/objc-compatibility.html">Compatibility</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../objc/product/objc-changelog.html">Change Log</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../../swift/quickstart.html">Swift</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Start</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/start/swift-gs-prereqs.html">Prerequisites</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/start/swift-gs-install.html">Install</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/start/swift-gs-build.html">Test Build</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Sync</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/advance/swift-p2psync-websocket-using-passive.html">Passive Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/advance/swift-p2psync-websocket-using-active.html">Active Peer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/advance/swift-p2p-managing-tls-id.html">Manage TLS Identities</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/advance/swift-dep-upgrade.html">Upgrading</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/advance/swift-troubleshooting.html">Troubleshooting</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-database.html">Working with Databases</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-document.html">Working with Documents</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-blob.html">Working with Blobs</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../swift/learn/swift-query.html">Working with Queries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-query-live.html">Live Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-query-predictive.html">Predictive Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-fts.html">Running Full-text Searches</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-replication.html">Sync Gateway Replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-dbreplica.html">Inter Database Replicaton</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-conflict.html">Handling Conflicts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Peer-to-Peer Synchronization</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-p2psync-websocket.html">Peer-to-peer sync over web sockets</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../swift/learn/swift-p2psync-custom.html">Peer-to-peer sync (custom)</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-thread-safety.html">Thread-safety</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/learn/swift-cert-pinning.html">Certificate Pinning</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="nav-text ">swift[API References]</span>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/refer/swift-refer-glossary.html">Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/product/swift-releasenotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/product/swift-supportnotes.html">Support Notices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/product/swift-compatibility.html">Compatibility</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../swift/product/swift-changelog.html">Change Log</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../releasenotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../supportnotes.html">Support Notices</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../changelog.html">Change Log</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../compatibility.html">Compatibility</a>
</span>
</li>
</ul>
</li>
</ul>
</div>
<a href="#" class="menu-expand-toggle"> <span>Navigation</span> <i class="fas fa-times-circle"></i> <i class="fas fa-chevron-circle-left"></i></a>
</div></nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
      <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/ianbridge/CouchbaseDocs/bau/cbl/modules/java/pages/start/java-platform.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
      <div class="toc-menu"></div>
        <div class="is-this-helpful-box">
          <h4> Is this page helpful?</h4>
            <div class="btn-row">
              <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                     <i class="far fa-thumbs-up"></i>
                 Yes

                 </a>
              <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
            </div>
            <div class="any-feedback">
              <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
            </div>
            <div class="dialog-box" id="dialogBox">
              <form>
                  <div class="form-group " id="additionalFeedbackBox">
                    <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

                    <div class="action-btn-row ">
                      <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                       <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                       <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
                    </div>


                  </div>

              </form>

            </div>
      </div>
   </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../index.html">CBL.90820</a></li>
<li class="crumb"><a href="java-platform.html">Couchbase Lite Java Framework</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Couchbase Lite Java Framework</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div class="sect1">
<h2 id="get-started"><a class="anchor" href="#get-started"></a>GET STARTED</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{product} Java enables development and deployment of {cbl} applications to a JVM environment.
You can deploy to a desktop or web server (for example, {gpWebServerEnv}), including embedded {gpWebServerEnv} deployments.</p>
</div>
<div class="paragraph">
<p>Use this page to familiarize yourself with the product, its components, deployment, and use.</p>
</div>
<div class="paragraph">
<p>You will learn:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Where to get the necessary binaries&#8201;&#8212;&#8201;<a href="#where-to-get-binaries">Where to Get Binaries</a></p>
</li>
<li>
<p>What the binaries contain&#8201;&#8212;&#8201;<a href="#using-downloaded-binaries">Using Downloaded Binaries</a></p>
</li>
<li>
<p>How to deploy {product} Java&#8201;&#8212;&#8201;<a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</li>
<li>
<p>How to use {product} Java to create a simple application&#8201;&#8212;&#8201;<a href="#building-a-getting-started-app">Building a Getting Started App</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We use <em>{gpIDE}</em>, <em>{gpBuildTool}</em>, <em>Maven</em> and <em>{gpWebServerEnv}</em> as tools to build and run the examples presented in this content.
You are free to use the tools of your choice.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="where-to-get-binaries"><a class="anchor" href="#where-to-get-binaries"></a>Where to Get Binaries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{product} Java binaries are available for both Community (CE) and Enterprise (EE) editions from the <em>Maven</em> repositories&#8201;&#8212;&#8201;see: <a href="#preparing-your-build-environment">Preparing Your Build Environment</a> for how.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can download a version in <code>.zip</code> format&#8201;&#8212;&#8201;see: <a href="#using-downloaded-binaries">Using Downloaded Binaries</a> for how.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-your-build-environment"><a class="anchor" href="#preparing-your-build-environment"></a>Preparing Your Build Environment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>Planning to sync with a {svr}?</p>
<div class="paragraph">
<p>You will need to have runnable instances of {svr} and {sg} installed.
If you have not already done so see <a href="#preparatory-steps">Preparatory Steps</a></p>
</div>
</li>
<li>
<p>Running on Microsoft Windows?</p>
<div class="paragraph">
<p>Windows requires C&#43;&#43; runtime installed.
Please install the Visual C&#43;&#43; Redistribution package from this link:
<a href="https://www.microsoft.com/en-us/download/details.aspx?id=52685" class="bare">https://www.microsoft.com/en-us/download/details.aspx?id=52685</a></p>
</div>
</li>
<li>
<p>Running on Linux?</p>
<div class="paragraph">
<p>You must have loaded the shared libraries as described in <a href="#additional-steps-for-linux">Additional Steps for Linux</a></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="assumptions"><a class="anchor" href="#assumptions"></a>Assumptions</h3>
<div class="paragraph">
<p>This section shows how to set up and use {product} Java to build desktop and web applications using {gpBuildTool}, Maven, {gpWebServerEnv} and {gpIDE} Community Edition.</p>
</div>
<div class="paragraph">
<p>It assumes a familiarity with these products, however you are free to use your own choice of development tools.</p>
</div>
<div class="paragraph">
<p>The contents of your <code>build.gradle</code> file will depend on the type of project you are building, whether you are using Community or Enterprise edition and whether you prefer to use Maven-distributed binaries or a zip download.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you wish to use a downloaded zip instead of Maven then see - <a href="#using-downloaded-binaries">Using Downloaded Binaries</a>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are deploying to Linux, you will need the {cbl} <code>support</code> library, which is available <em>only</em> on the zip download distributable&#8201;&#8212;&#8201;see <a href="#additional-steps-for-linux">Additional Steps for Linux</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="bmkUsingMavenRepos"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="defining-dependencies-and-repositories"><a class="anchor" href="#defining-dependencies-and-repositories"></a>Defining Dependencies and Repositories</h3>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_console-app-development"></a>Console App Development</p>
</li>
<li>
<p><a id="tabset1_web-app-development"></a>Web App Development</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_console-app-development">
<div class="paragraph">
<p><strong>Steps</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a project folder</p>
</li>
<li>
<p>Initialize it for a Gradle Java application</p>
</li>
<li>
<p>Include the following in the <code>build.gradle</code> file:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Community edition</dt>
<dd>
<div class="paragraph">
<p>Compile options</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dependencies</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Enterprise Edition</dt>
<dd>
<div class="paragraph">
<p>Compile options</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dependencies</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Repositories</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>Open the project folder in {gpIDE} and import the {gpBuildTool} settings.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you don&#8217;t have auto-import set for Gradle projects, then accept the   <strong>Import Gradle Project</strong> prompt that is displayed bottom-right of the screen
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note the Gradle menu at the extreme right of the screen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/GradleMenuWebApp.png" alt="GradleMenuWebApp" width="300">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>That&#8217;s it. You&#8217;re all set to start building your own {product} Java applications&#8201;&#8212;&#8201;see <a href="#building-a-getting-started-app">Building a Getting Started App</a> for an example of how to do that.</p>
</div>
<div class="listingblock">
<div class="title">Sample build.gradle content</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_web-app-development">
<div class="paragraph">
<p>This section explains how to set-up a build project to create {product} Java web apps using {gpBuildTool} and {gpIDE}.</p>
</div>
<div class="paragraph">
<p><strong>The WebApp Build Environment</strong></p>
</div>
<div class="paragraph">
<p>In our examples here we build and deploy web apps using a {gpBuildTool} plugin based on the <code>com.bmuschko.tomcat</code> plugin. It provides a simple {gpWebServerEnv} harness that can be used from within {gpIDEce} or the command-line.</p>
</div>
<div class="paragraph">
<p>Of course if you are using {gpIDEee} you can use its integrated tomcat features to achieve the same results.</p>
</div>
<div class="paragraph">
<p>For more about this plugin and its use see <a href="#using-the-gradle-webapp-plugin">Using the Gradle WebApp Plugin</a></p>
</div>
<div class="paragraph">
<p><a id="bmkMultCblJapps"></a>
<strong>Running multiple {product} Java web apps</strong>
Each web application has its own *class loader (WebappX). This loads the classes, jars, and resources found in the application&#8217;s <code>WEB-INF/classes</code> and <code>WEB-INF/lib</code> folders, together with any shared jar files from <code>$CATALINA_BASE/lib</code>&#8201;&#8212;&#8201;see <a href="https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html">tomcat documentation</a> for more.</p>
</div>
<div class="paragraph">
<p>So, if you are running multiple {cbl} web applications, deploy your {product} Java library <code>&lt;pathToCbl&gt;/libs</code> to <code>$CATALINA_BASE/lib</code>. This means you do not need to deploy it in each web app and <strong>minimizes the size of each app</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Configuring {cbl} logging functionality will affect the logging of all web applications as the <em>common class loader</em> shares <em>{cbl} Console, File</em> and <em>Custom logging functionalities</em>  across all  web apps.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For information about building a WAR file see <a href="#deploying-a-war-file-to-tomcat">Deploying a WAR file to tomcat</a></p>
</div>
<div class="paragraph">
<p><strong>Prerequisites</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure your build environment matches the runtime {gpWebServerEnv} environment. Specifically, that the Java and  {gpWebServerEnv} versions are the same.</p>
</li>
<li>
<p>If your {gpWebServerEnv} server runs Linux, declare the <em>shared libraries</em> (<code>&lt;pathToCbl&gt;/support</code>&#8201;&#8212;&#8201; as discussed in <a href="#bmkLinuxSharedLibs">Additional Steps for Linux</a>) in the <code>$CATALINA_HOME/bin/setenv.sh</code> script file.</p>
</li>
<li>
<p>Ensure the {cbl} jars (<code>&lt;pathToCbl&gt;/lib</code>) are on the executable path within {gpWebServerEnv}&#8201;&#8212;&#8201;see: <a href="#bmkMultCblJapps">Running multiple {product} Java web apps</a></p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This also means you should declare the dependencies as <code>providedCompile</code> to avoid them being bundled into the <code>WEB-INF/libs</code> folder
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Steps</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a project folder and initialize it for a Gradle Java application</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">gradle init</code></pre>
</div>
</div>
</li>
<li>
<p>Create your <code>build.gradle</code> file, including the following repositories and dependencies:</p>
<div class="ulist">
<ul>
<li>
<p>For Community edition</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
</li>
<li>
<p>For Enterprise Edition</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]
Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$gsBuildGradleJava.adoc[]</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Open the project folder in {gpIDE} and import the {gpBuildTool} settings.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you don&#8217;t have auto-import set for Gradle projects, then accept the   <strong>Import Gradle Project</strong> prompt that is displayed bottom-right of the screen
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note the Gradle menu at the extreme right of the screen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/GradleMenuWebApp.png" alt="GradleMenuWebApp" width="300">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you want to deploy your app to a local tomcat container then see <a href="#deploying-a-war-file-to-tomcat">Deploying a WAR file to tomcat</a></p>
</div>
<div class="paragraph">
<p>That&#8217;s it. You&#8217;re all set to start building your own {product} Java applications&#8201;&#8212;&#8201;see <a href="#building-a-getting-started-app">Building a Getting Started App</a> for an example of how to do that.</p>
</div>
<div class="listingblock">
<div class="title">Sample build.gradle content</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-a-getting-started-app"><a class="anchor" href="#building-a-getting-started-app"></a>Building a Getting Started App</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section explains how to validate your configured build environment by building a starter app that uses many of {product} Java&#8217;s more common features.</p>
</div>
<div class="paragraph">
<p>The {nmMobStarterApp} app demonstrates how to use {product} Java. Console and Web App versions are available.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_console-app"></a>Console App</p>
</li>
<li>
<p><a id="tabset2_web-app"></a>Web App</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_console-app">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Ensure you added the {cbl} dependency to your <code>build.gradle</code> file
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create, build and run a new project using the following <code>GettingStarted.java</code> code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The app will start a replicator pointing to <code>ws://localhost:4984/db</code>, where <code>db</code> is the name of your {sg} database</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is the only API that differs from the Java (android) version. It accepts no parameters and should be called once only</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You can optionally AES-256 encrypt the database by providing a key</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This is needed for a tidy closedown of work executors</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>It is advisable to set a specific directory path for the database.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On running the app, you should see the document ID and property printed to the console together with a query result showing the number of rows in the database.</p>
</div>
<div class="paragraph">
<p>This shows the document was successfully persisted to the database.</p>
</div>
<div class="paragraph">
<p>See <a href="#about-the-getting-started-app">About the Getting Started App</a> for more on the app itself</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_web-app">
<div class="paragraph">
<p>This section explains how to set-up a build project to create {product} Java web apps using {gpBuildTool} and {gpIDE}.</p>
</div>
<div class="paragraph">
<p><strong>Steps</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new project folder and add a <code>build.gradle</code> file containing the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</li>
<li>
<p>Within {gpIDE}, open the new project folder</p>
<div class="paragraph">
<p>If you don&#8217;t have auto-import enabled, then accept the <strong>Import from Gradle</strong> prompt that appears at the bottom right of the screen.</p>
</div>
</li>
<li>
<p>Create a Java class <em>GettingStarted</em> using this code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It is advisable to set a specific directory path for the database.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The app will start a replicator pointing to <code>ws://localhost:4984/db</code>, where <code>db</code> is the name of your {sg} database</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a Java class <em>Listener</em> using this code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</li>
<li>
<p>Create a Java class <em>Database Manager</em> using this code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the only API that differs from the Java (android) version. It accepts no parameters and should be called once only</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It is advisable to set a specific directory path for the database.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You can optionally AES-256 encrypt the database by providing a key</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create an <code>index.html</code> file in <code>src/main/web app</code> with the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>showDbItems.jsp</code> file in <code>src/main/web app</code> with the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</li>
<li>
<p>Build, deploy and run the app using <code>tomcatRun</code></p>
<div class="imageblock">
<div class="content">
<img src="../_images/GradleMenuWebApp.png" alt="GradleMenuWebApp" width="300">
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Point your browser to: <code>localhost:8080/gettingstarted</code></p>
<div class="paragraph">
<p>This opens the browser at your index.html page.</p>
</div>
</li>
<li>
<p>Select the <strong>here</strong> link</p>
<div class="paragraph">
<p>This launches the servlet and displays the results in <code>showdDbItems.jsp</code>.
They are also added to the <em>catalina.out</em> log file.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>See <a href="#about-the-getting-started-app">About the Getting Started App</a> for more on the app itself</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-references"><a class="anchor" href="#api-references"></a>API REFERENCES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section introduces the {product} Java API methods available to you.</p>
</div>
<div class="paragraph">
<p>With the exception of the <a href="#initializer">Initializer</a>, all other APIs are identical to the Java (android) version of {cbl}.</p>
</div>
<div class="paragraph">
<p><a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java">Java SDK API References</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="initializer"><a class="anchor" href="#initializer"></a>Initializer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your first step in using the API must be to call its initializer.
An exception is raised if any other API method is invoked before the  initializer.</p>
</div>
<div class="paragraph">
<p>The <code>init()</code> API accepts no parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="new-database"><a class="anchor" href="#new-database"></a>New Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As the top-level entity in the API, new databases can be created using the <code>Database</code> class by passing in a name, configuration, or both.
The following example creates a database using the <code>Database(String name, DatabaseConfiguration config)</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Just as before, the database will be created in a default location.
Alternatively, the <code>Database(string name, DatabaseConfiguration config)</code> initializer can be used to provide specific options in the <a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/com/couchbase/lite/DatabaseConfiguration.html"><code>DatabaseConfiguration</code></a> object such as the database directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="database-encryption"><a class="anchor" href="#database-encryption"></a>Database Encryption</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Enterprise Edition only</div>
Database encryption is an <a href="https://www.couchbase.com/products/editions">Enterprise Edition</a> feature.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Couchbase Lite 2.1 release includes the ability to encrypt Couchbase Lite databases.
This allows mobile applications to secure the data at rest, when it is being stored on the device.
The algorithm used to encrypt the database is 256-bit AES.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="finding-a-database-file"><a class="anchor" href="#finding-a-database-file"></a>Finding a Database File</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default a {product} Java database is created in a directory at the current location called  <code>&lt;databaseName&gt;.cblite2</code>.</p>
</div>
<div class="paragraph">
<p>This location is set by the <a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/com/couchbase/lite/DatabaseConfiguration.html">DatabaseConfiguration</a> method. You should always use it to explicitly set the database location. See the following example  for how to do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DatabaseConfiguration thisConfig = new DatabaseConfiguration(); thisConfig.setDirectory("yourDBpath");
Database thisDB = new Database("db", thisConfig);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cli-tool"><a class="anchor" href="#cli-tool"></a>CLI tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cblite</code> is a command-line tool for inspecting and querying Couchbase Lite 2.x databases.</p>
</div>
<div class="paragraph">
<p>You can download and build it from the couchbaselabs <a href="https://github.com/couchbaselabs/couchbase-mobile-tools/blob/master/README.cblite.md">GitHub repository</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>cblite</code> tool is not supported by the <a href="https://www.couchbase.com/support-policy">Couchbase Support Policy</a>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="logging"><a class="anchor" href="#logging"></a>Logging</h3>
<div class="paragraph">
<p>If you are using a Couchbase Lite release prior to 2.5 see <a href="#logging-functionality-prior-to-release-2-5">Deprecated functionality</a></p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$logging.adoc[]</p>
</div>
<div class="sect3">
<h4 id="logging-functionality-prior-to-release-2-5"><a class="anchor" href="#logging-functionality-prior-to-release-2-5"></a>Logging functionality prior to Release 2.5</h4>
<div class="paragraph">
<p>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$logging-pre2.5.adoc[]</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-{source-language} hljs" data-lang="{source-language}">Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="loading-a-pre-built-database"><a class="anchor" href="#loading-a-pre-built-database"></a>Loading a pre-built database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your app needs to sync a lot of data initially, but that data is fairly static and won&#8217;t change much, it can be a lot more efficient to bundle a database in your application and install it on the first launch.
Even if some of the content changes on the server after you create the app, the app&#8217;s first pull replication will bring the database up to date.</p>
</div>
<div class="paragraph">
<p>To use a prebuilt database, you need to set up the database, build the database into your app bundle as a resource, and install the database during the initial launch.
After your app launches, it needs to check whether the database exists.
If the database does not exist, the application should copy it from the assets folder to the app&#8217;s files directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example below, the <code>ZipUtils.unzip</code> method copies the zipped pre-built database from the application&#8217;s <code>resource</code> directory to the <strong>files</strong> directory.
This method is provided below for information as it isn&#8217;t included in the Couchbase Lite library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document"><a class="anchor" href="#document"></a>Document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Couchbase Lite, a document&#8217;s body takes the form of a JSON object&#8201;&#8212;&#8201;a collection of key/value pairs where the values can be different types of data such as numbers, strings, arrays or even nested objects.
Every document is identified by a document ID, which can be automatically generated (as a UUID) or specified programmatically;
the only constraints are that it must be unique within the database, and it can&#8217;t be changed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="initializers"><a class="anchor" href="#initializers"></a>Initializers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following methods/initializers can be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>MutableDocument()</code> initializer can be used to create a new document where the document ID is randomly generated by the database.</p>
</li>
<li>
<p>The <code>MutableDocument(String id)</code> initializer can be used to create a new document with a specific ID.</p>
</li>
<li>
<p>The <code>database.getDocument(String id)</code> method can be used to get a document.
If it doesn&#8217;t exist in the database, it will return <code>null</code>.
This method can be used to check if a document with a given ID already exists in the database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following code example creates a document and persists it to the database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutability"><a class="anchor" href="#mutability"></a>Mutability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a document is read from the database it is immutable.
Use the <code>document.toMutable()</code> method to create an updateable instance of the document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Changes to the document are persisted to the database when the <code>save</code> method is called.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="typed-accessors"><a class="anchor" href="#typed-accessors"></a>Typed Accessors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>Document</code> class now offers a set of <a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/com/couchbase/lite/Dictionary.html"><code>property accessors</code></a> for various scalar types, including boolean, integers, floating-point and strings.
These accessors take care of converting to/from JSON encoding, and make sure you get the type you&#8217;re expecting.</p>
</div>
<div class="paragraph">
<p>In addition, as a convenience we offer <code>Date</code> accessors.
Dates are a common data type, but JSON doesn&#8217;t natively support them, so the convention is to store them as strings in ISO-8601 format.
The following example sets the date on the <code>createdAt</code> property and reads it back using the <code>document.getDate(String key)</code> accessor method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the property doesn&#8217;t exist in the document it will return the default value for that getter method (0 for <code>getInt</code>, 0.0 for <code>getFloat</code> etc.).
To check whether a given property exists in the document, you should use the <a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/com/couchbase/lite/Document.html#contains-java.lang.String-"><code>Document.Contains(String key)</code></a> method.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="batch-operations"><a class="anchor" href="#batch-operations"></a>Batch operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you&#8217;re making multiple changes to a database at once, it&#8217;s faster to group them together.
The following example persists a few documents in batch.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>At the <strong>local</strong> level this operation is still transactional: no other <code>Database</code> instances, including ones managed by the replicator can make changes during the execution of the block, and other instances will not see partial changes.
But Couchbase Mobile is a distributed system, and due to the way replication works, there&#8217;s no guarantee that Sync Gateway or other devices will receive your changes all at once.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-change-events"><a class="anchor" href="#document-change-events"></a>Document change events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s also possible to register for document changes.
The following example registers for changes to the document with ID <code>user.john</code> and prints the <code>verified_account</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-expiration"><a class="anchor" href="#document-expiration"></a>Document Expiration</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="blobs"><a class="anchor" href="#blobs"></a>Blobs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;ve renamed "attachments" to "blobs".
The new behavior should be clearer too: a <code>Blob</code> is now a normal object that can appear in a document as a property value.
In other words, you just instantiate a <code>Blob</code> and set it as the value of a property, and then later you can get the property value, which will be a <code>Blob</code> object.
The following code example adds a blob to the document under the <code>avatar</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Blob</code> API lets you access the contents as an in-memory byte array (
<code>public byte[] getContent()</code>) or as an <code>InputStream</code> (<code>public InputStream getContentStream()</code>).
It also supports an optional <code>type</code> property that by convention stores the MIME type of the contents.</p>
</div>
<div class="paragraph">
<p>In the example above, "image/jpeg" is the MIME type and "avatar" is the key which references that <code>Blob</code>.
That key can be used to retrieve the <code>Blob</code> object at a later time.</p>
</div>
<div class="paragraph">
<p>When a document is synchronized, the Couchbase Lite replicator will add an <code>_attachments</code> dictionary to the document&#8217;s properties if it contains a blob.
A random access name will be generated for each <code>Blob</code> which is different to the "avatar" key that was used in the example above.
On the image below, the document now contains the <code>_attachments</code> dictionary when viewed in the Couchbase Server Admin Console.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/attach-replicated.png" alt="attach replicated">
</div>
</div>
<div class="paragraph">
<p>A blob also has properties such as <code>"digest"</code> (a SHA-1 digest of the data), <code>"length"</code> (the length in bytes), and optionally <code>"content_type"</code> (the MIME type).
The data is not stored in the document, but in a separate content-addressable store, indexed by the digest.</p>
</div>
<div class="paragraph">
<p>This <code>Blob</code> can be retrieved on the Sync Gateway REST API at http://localhost:4984/justdoit/user.david/blob_1.
Notice that the blob identifier in the URL path is "blob_1" (not "avatar").</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="query"><a class="anchor" href="#query"></a>Query</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Database queries are based on expressions, of the form "SELECT {blank-field} FROM database WHERE {blank-field}, ORDERed by {blank-field}", with semantics based on Couchbase&#8217;s N1QL query language.</p>
</div>
<div class="paragraph">
<p>There are several parts to specifying a query:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">SELECT</dt>
<dd>
<p>Specifies the projection, which is the part of the document that is to be returned.</p>
</dd>
<dt class="hdlist1">FROM</dt>
<dd>
<p>Specifies the database to query the documents from.</p>
</dd>
<dt class="hdlist1">JOIN</dt>
<dd>
<p>Specifies the matching criteria in which to join multiple documents.</p>
</dd>
<dt class="hdlist1">WHERE</dt>
<dd>
<p>Specifies the query criteria that the result must satisfy.</p>
</dd>
<dt class="hdlist1">GROUP BY</dt>
<dd>
<p>Specifies the query criteria to group rows by.</p>
</dd>
<dt class="hdlist1">ORDER BY</dt>
<dd>
<p>Specifies the query criteria to sort the rows in the result.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="select-statement"><a class="anchor" href="#select-statement"></a>SELECT statement</h3>
<div class="paragraph">
<p>With the SELECT statement, you can query and manipulate JSON data.
With projections, you retrieve just the fields that you need and not the entire document.</p>
</div>
<div class="paragraph">
<p>A SelectResult represents a single return value of the query statement.
You can specify a comma separated list of <code>SelectResult</code> expressions in the select statement of your query.
For instance the following select statement queries for the document <code>_id</code> as well as the <code>type</code> and <code>name</code> properties of all documents in the database.
In the query result, we print the <code>_id</code> and <code>name</code> properties of each row using the property name getter method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "_id": "hotel123",
    "type": "hotel",
    "name": "Apple Droid"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>SelectResult.all()</code> method can be used to query all the properties of a document.
In this case, the document in the result is embedded in a dictionary where the key is the database name.
The following snippet shows the same query using <code>SelectResult.all()</code> and the result in JSON.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
    {
        "travel-sample": {
            "callsign": "MILE-AIR",
            "country": "United States",
            "iata": "Q5",
            "icao": "MLA",
            "id": 10,
            "name": "40-Mile Air",
            "type": "airline"
        }
    },
    {
        "travel-sample": {
            "callsign": "TXW",
            "country": "United States",
            "iata": "TQ",
            "icao": "TXW",
            "id": 10123,
            "name": "Texas Wings",
            "type": "airline"
        }
    }
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="where-statement"><a class="anchor" href="#where-statement"></a>WHERE statement</h3>
<div class="paragraph">
<p>Similar to SQL, you can use the where clause to filter the documents to be returned as part of the query.
The select statement takes in an <code>Expression</code>.
You can chain any number of Expressions in order to implement sophisticated filtering capabilities.</p>
</div>
<div class="sect3">
<h4 id="comparison"><a class="anchor" href="#comparison"></a>Comparison</h4>
<div class="paragraph">
<p>The <a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/com/couchbase/lite/Expression.html">comparison operators</a> can be used in the WHERE statement to specify on which property to match documents.
In the example below, we use the <code>equalTo</code> operator to query documents where the <code>type</code> property equals "hotel".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "_id": "hotel123",
    "type": "hotel",
    "name": "Apple Droid"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="collection-operators"><a class="anchor" href="#collection-operators"></a>Collection Operators</h3>
<div class="paragraph">
<p><a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/com/couchbase/lite/ArrayFunction.html">Collection operators</a> are useful to check if a given value is present in an array.</p>
</div>
<div class="sect3">
<h4 id="contains-operator"><a class="anchor" href="#contains-operator"></a>CONTAINS Operator</h4>
<div class="paragraph">
<p>The following example uses the <code>Function.arrayContains</code> to find documents whose <code>public_likes</code> array property contain a value equal to "Armani Langworth".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "_id": "hotel123",
    "name": "Apple Droid",
    "public_likes": ["Armani Langworth", "Elfrieda Gutkowski", "Maureen Ruecker"]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="in-operator"><a class="anchor" href="#in-operator"></a>IN Operator</h4>
<div class="paragraph">
<p>The <code>IN</code> operator is useful when you need to select based on a specified term matching any element of a defined list of values.
The following example compiles a list of values from <code>first</code>, <code>last</code> and <code>username</code> property value. It then selects if any of those values equals "Armani".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="like-operator"><a class="anchor" href="#like-operator"></a>Like Operator</h4>
<div class="paragraph">
<p>The <a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/com/couchbase/lite/Expression.html#like-com.couchbase.lite.Expression-"><code>like</code></a> operator can be used for string matching.</p>
</div>
<div class="paragraph">
<p>The <code>like</code> operator performs <strong>case sensitive</strong> matches.
So, to make the string matching case-insensitive, use <code>Function.lower</code> or <code>Function.upper</code> to transform the matched strings to lowercase or uppercase equivalents.</p>
</div>
<div class="paragraph">
<p>In the example below, we are looking for documents of type <code>landmark</code> where the name property exactly matches the string "Royal engineers museum".</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For case-insensitive comparison, use <code>Function.lower</code> to align the cases of the strings being compared.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following query returns "landmark" type documents regardless of the name&#8217;s case (so, for example: "Royal Engineers Museum", "royal engineers museum", "ROYAL ENGINEERS MUSEUM" are all matches).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="wildcard-match"><a class="anchor" href="#wildcard-match"></a>Wildcard Match</h4>
<div class="paragraph">
<p>We can use <code>%</code> sign within a <code>like</code> expression to do a wildcard match against zero or more characters.
Using wildcards allows you to have some fuzziness in your search string.</p>
</div>
<div class="paragraph">
<p>In the example below, we are looking for documents of <code>type</code> "landmark" where the name property matches any string that begins with "eng" followed by zero or more characters, the letter "e", followed by zero or more characters.</p>
</div>
<div class="paragraph">
<p>The following query will return "landmark" <code>type</code> documents with name matching "Engineers", "engine", "english egg" , "England Eagle" and so on.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Once again, we are using <code>Function.lower</code> to make the search act as case insensitive.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The matches may span word boundaries.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="wildcard-character-match"><a class="anchor" href="#wildcard-character-match"></a>Wildcard Character Match</h4>
<div class="paragraph">
<p>We can use an <code>_</code> sign within a like expression to do a wildcard match against a single character.</p>
</div>
<div class="paragraph">
<p>In the example below, we are looking for documents of type "landmark" where the <code>name</code> property matches any string that begins with "eng" followed by exactly 4 wildcard characters and ending in the letter "r".
The following query will return "landmark" <code>type</code> documents with the <code>name</code> matching "Engineer", "engineer" and so on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="regex-operator"><a class="anchor" href="#regex-operator"></a>Regex Operator</h4>
<div class="paragraph">
<p>Similar to wildcard <code>like</code> expressions, <code>regex</code> expressions based pattern matching allow you to have some fuzziness in your search string.</p>
</div>
<div class="paragraph">
<p>The <code>regex</code> operator is case sensitive.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more on the regex spec used by {cbl} see <a href="http://www.cplusplus.com/reference/regex/ECMAScript/">cplusplus regex reference page</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example below, we are looking for documents of <code>type</code> "landmark" where the name property matches any string (on word boundaries) that begins with "eng" followed by exactly 4 wildcard characters and ending in the letter "r".
The following query will return "landmark" type documents with name matching "Engine", "engine" and so on.
Note that the <code>\b</code> specifies that the match must occur on word boundaries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="query-deleted-document"><a class="anchor" href="#query-deleted-document"></a>Query Deleted Document</h3>
<div class="paragraph">
<p>You can query documents that have been deleted (tombstones).
The following example shows how to query deleted documents in the database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="join-statement"><a class="anchor" href="#join-statement"></a>JOIN statement</h3>
<div class="paragraph">
<p>The JOIN clause enables you to create new input objects by combining two or more source objects.</p>
</div>
<div class="paragraph">
<p>The following example uses a JOIN clause to find the airline details which have routes that start from RIX.
This example JOINS the document of type "route" with documents of type "airline" using the document ID (<code>_id</code>) on the "airline" document and <code>airlineid</code> on the "route" document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="group-by-statement"><a class="anchor" href="#group-by-statement"></a>GROUP BY statement</h3>
<div class="paragraph">
<p>You can perform further processing on the data in your result set before the final projection is generated.
The following example looks for the number of airports at an altitude of 300 ft or higher and groups the results by country and timezone.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "_id": "airport123",
    "type": "airport",
    "country": "United States",
    "geo": { "alt": 456 },
    "tz": "America/Anchorage"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">There are 138 airports on the Europe/Paris timezone located in France and above 300 ft
There are 29 airports on the Europe/London timezone located in United Kingdom and above 300 ft
There are 50 airports on the America/Anchorage timezone located in United States and above 300 ft
There are 279 airports on the America/Chicago timezone located in United States and above 300 ft
There are 123 airports on the America/Denver timezone located in United States and above 300 ft</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="order-by-statement"><a class="anchor" href="#order-by-statement"></a>ORDER BY statement</h3>
<div class="paragraph">
<p>It is possible to sort the results of a query based on a given expression result.
The example below returns documents of type equal to "hotel" sorted in ascending order by the value of the title property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Aberdyfi
Achiltibuie
Altrincham
Ambleside
Annan
Ardèche
Armagh
Avignon</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="datetime-functions"><a class="anchor" href="#datetime-functions"></a>Date/Time Functions</h3>
<div class="paragraph">
<p>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$query/date-time-functions.adoc[]</p>
</div>
</div>
<div class="sect2">
<h3 id="live-query"><a class="anchor" href="#live-query"></a>Live Query</h3>
<div class="paragraph">
<p>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$live-query.adoc[]</p>
</div>
</div>
<div class="sect2">
<h3 id="predictive-query"><a class="anchor" href="#predictive-query"></a>Predictive Query</h3>

</div>
<div class="sect2">
<h3 id="indexing"><a class="anchor" href="#indexing"></a>Indexing</h3>
<div class="paragraph">
<p>Creating indexes can speed up the performance of queries.
While indexes make queries faster, they also make writes slightly slower, and the Couchbase Lite database file slightly larger.
As such, it is best to only create indexes when you need to optimize a specific case for better query performance.</p>
</div>
<div class="paragraph">
<p>The following example creates a new index for the <code>type</code> and <code>name</code> properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "_id": "hotel123",
    "type": "hotel",
    "name": "Apple Droid"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If there are multiple expressions, the first one will be the primary key, the second the secondary key, etc.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Every index has to be updated whenever a document is updated, so too many indexes can hurt performance.
Thus, good performance depends on designing and creating the <em>right</em> indexes to go along with your queries.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="full-text-search"><a class="anchor" href="#full-text-search"></a>Full-Text Search</h3>
<div class="paragraph">
<p>To run a full-text search (FTS) query, you must have created a full-text index on the expression being matched.
Unlike regular queries, the index is not optional.
The following example creates an FTS index on the <code>name</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple properties to index can be specified in the index creation method.</p>
</div>
<div class="paragraph">
<p>With the index created for a given property, you can now construct and run FTS queries on that property.
The full-text search criteria is defined as a <code>FullTextExpression</code>.
The left-hand side is the full-text index to use and the right-hand side is the pattern to match.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the pattern to match is a word, the full-text search query matches all documents that contain the word "buy" in the value of the <code>doc.name</code> property.</p>
</div>
<div class="paragraph">
<p>Search is supported for all languages that use whitespace to separate words.</p>
</div>
<div class="paragraph">
<p>Stemming, which is the process of fuzzy matching parts of speech, like "fast" and "faster", is supported in the following languages: danish, dutch, english, finnish, french, german, hungarian, italian, norwegian, portuguese, romanian, russian, spanish, swedish and turkish.</p>
</div>
<div class="paragraph">
<p>The pattern to match can also be in the following forms:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">prefix queries</dt>
<dd>
<p>The query expression used to search for a term prefix is the prefix itself with a "*" character appended to it.
For example</p>
<div class="literalblock">
<div class="content">
<pre>"'lin*'"</pre>
</div>
</div>
<div class="paragraph">
<p>Will search for all documents containing a term with the prefix <code>lin</code>, poducing a match for all documents that contain "linux" and also those that contain terms "linear", "linker", "linguistic" and so on.</p>
</div>
</dd>
<dt class="hdlist1">overriding the property name that is being indexed</dt>
<dd>
<p>Normally, a token or token prefix query is matched against the document property specified as the left-hand side of the <code>match</code> operator.
This may be overridden by specifying a property name followed by a ":" character before a basic term query.
There may be space between the ":" and the term to query for, but not between the property name and the ":" character.
For example:</p>
<div class="literalblock">
<div class="content">
<pre>'title:linux problems'
-- Query the database for documents for which the term "linux" appears in
-- the document title, and the term "problems" appears in either the title
-- or body of the document.</pre>
</div>
</div>
</dd>
<dt class="hdlist1">phrase queries</dt>
<dd>
<p>A phrase query is a query that retrieves all documents that contain a nominated set of terms or term prefixes in a specified order with no intervening tokens.
Phrase queries are specified by enclosing a space separated sequence of terms or term prefixes in double quotes (").
For example:</p>
<div class="literalblock">
<div class="content">
<pre>"'"linux applications"'"
-- Query for all documents that contain the phrase "linux applications".</pre>
</div>
</div>
</dd>
<dt class="hdlist1">NEAR queries</dt>
<dd>
<p>A NEAR query is a query that returns documents that contain a two or more nominated terms or phrases within a specified proximity of each other (by default with 10 or less intervening terms).
A NEAR query is specified by putting the keyword "NEAR" between two phrase, token or token prefix queries.
To specify a proximity other than the default, an operator of the form "NEAR/" may be used, where is the maximum number of intervening terms allowed.
For example:</p>
<div class="literalblock">
<div class="content">
<pre>"'database NEAR/2 "replication"'"
-- Search for a document that contains the phrase "replication" and the term
-- "database" with not more than 2 terms separating the two.</pre>
</div>
</div>
</dd>
<dt class="hdlist1">AND, OR &amp; NOT query operators</dt>
<dd>
<p>The enhanced query syntax supports the AND, OR and NOT binary set operators.
Each of the two operands to an operator may be a basic FTS query, or the result of another AND, OR or NOT set operation.
Operators must be entered using capital letters.
Otherwise, they are interpreted as basic term queries instead of set operators.
For example:</p>
<div class="literalblock">
<div class="content">
<pre>'couchbase AND database'
-- Return the set of documents that contain the term "couchbase", and the
-- term "database". This query will return the document with docid 3 only.</pre>
</div>
</div>
<div class="paragraph">
<p>When using the enhanced query syntax, parenthesis may be used to specify the precedence of the various operators.
For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>'("couchbase database" OR "sqlite library") AND linux'
-- Query for the set of documents that contains the term "linux", and at least
-- one of the phrases "couchbase database" and "sqlite library".</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="ordering-results"><a class="anchor" href="#ordering-results"></a>Ordering results</h3>
<div class="paragraph">
<p>It&#8217;s very common to sort full-text results in descending order of relevance.
This can be a very difficult heuristic to define, but Couchbase Lite comes with a ranking function you can use.
In the <code>OrderBy</code> array, use a string of the form <code>Rank(X)</code>, where <code>X</code> is the property or expression being searched, to represent the ranking of the result.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication"><a class="anchor" href="#replication"></a>Replication</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="compatibility"><a class="anchor" href="#compatibility"></a>Compatibility</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The new protocol is <strong>incompatible</strong> with CouchDB-based databases.
And since Couchbase Lite 2 only supports the new protocol, you will need to run a version of Sync Gateway that supports it&#8201;&#8212;&#8201;see:  <a href="#sync-gateway::compatibility-matrix.adoc" class="page unresolved">Sync Gateway Compatibility Matrix</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To use this protocol with Couchbase Lite 2.0, the replication URL should specify WebSockets as the URL scheme (see the <a href="#starting-a-replication">Starting a Replication</a> section below).
Mobile clients using Couchbase Lite 1.x can continue to use <strong>http</strong> as the URL scheme.
Sync Gateway 2.0 will automatically use the 1.x replication protocol when a Couchbase Lite 1.x client connects through http://localhost:4984/db and the 2.0 replication protocol when a Couchbase Lite 2.0 client connects through "ws://localhost:4984/db".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-sync-gateway"><a class="anchor" href="#starting-sync-gateway"></a>Starting Sync Gateway</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.couchbase.com/downloads">Download Sync Gateway</a> and start it from the command line with the configuration file created above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">~/Downloads/couchbase-sync-gateway/bin/sync_gateway</code></pre>
</div>
</div>
<div class="paragraph">
<p>For platform specific installation instructions, refer to the Sync Gateway <a href="../../../../sync-gateway/2.8/start/gs-sgw-install.html#installation" class="page">installation guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-a-replication"><a class="anchor" href="#starting-a-replication"></a>Starting a Replication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replication can be bidirectional, this means you can start a <code>push</code>/<code>pull</code> replication with a single instance.
The replication&#8217;s parameters can be specified through the <a href="http://docs.couchbase.com/mobile/{version-full}/couchbase-lite-java/index.html?com/couchbase/lite/ReplicatorConfiguration.html"><code>ReplicatorConfiguration</code></a> object;
for example, if you wish to start a <code>push</code> only or <code>pull</code> only replication.</p>
</div>
<div class="paragraph">
<p>The following example creates a <code>pull</code> replication with Sync Gateway.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>class MyClass {
    Database database;
    Replicator replicator; <i class="conum" data-value="1"></i><b>(1)</b>

    void startReplication() {
        URI uri = null;
        try {
            uri = new URI("wss://10.0.2.2:4984/db"); <i class="conum" data-value="2"></i><b>(2)</b>
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }
        Endpoint endpoint = new URLEndpoint(uri);
        ReplicatorConfiguration config = new ReplicatorConfiguration(database, endpoint);
        config.setReplicatorType(ReplicatorConfiguration.ReplicatorType.PULL);
        this.replicator = new Replicator(config);
        this.replicator.start();
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A replication is an asynchronous operation.
To keep a reference to the <code>replicator</code> object, you can set it as an instance property.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The URL scheme for remote database URLs has changed in Couchbase Lite 2.0.
You should now use <code>ws:</code>, or <code>wss:</code> for SSL/TLS connections.
In this example the hostname is <code>10.0.2.2</code>.
<div class="paragraph">
<p>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$verify-replication.adoc[]</p>
</div></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Couchbase Lite 2.0 uses WebSockets as the communication protocol to transmit data.
Some load balancers are not configured for WebSocket connections by default (NGINX for example);
so it might be necessary to explicitly enable them in the load balancer&#8217;s configuration (see <a href="../../../../sync-gateway/2.8/load-balancer.html" class="page">Load Balancers</a>).</p>
</div>
<div class="paragraph">
<p>By default, the WebSocket protocol uses compression to optimize for speed and bandwidth utilization.
The level of compression is set on Sync Gateway and can be tuned in the configuration file (<a href="#sync-gateway::config-properties.adoc#replicator_compression" class="page unresolved"><code>replicator_compression</code></a>).</p>
</div>
<div class="sect2">
<h3 id="replication-ordering"><a class="anchor" href="#replication-ordering"></a>Replication Ordering</h3>
<div class="paragraph">
<p>To optimize for speed, the replication protocol doesn&#8217;t guarantee that documents will be received in a particular order.
So do not rely receiving replicated data in a specific sequence when using the replication or database change listeners for example.</p>
</div>
</div>
<div class="sect2">
<h3 id="replicator-notifications-on-a-custom-executor"><a class="anchor" href="#replicator-notifications-on-a-custom-executor"></a>Replicator Notifications on a Custom Executor</h3>
<div class="paragraph">
<p>Prior to version 2.6, Couchbase Lite spun up multiple executors.
This policy could result in too many threads being spun up.</p>
</div>
<div class="paragraph">
<p>An executor manages a pool of threads and, perhaps, a queue in front of the executor, to handle the asynchronous callbacks.
Couchbase Lite API calls which are processed by an executor are listed below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Query.addChangeListener
MessageEndpointListerner.addChangeListener
LiveQuery.addChangeListener
AbstractReplicator.addDocumentReplicationListener
AbstractReplicator.addChangeListener
Database.addChangeListener
Database.addDocumentChangeListener
Database.addDatabaseChangeListener
Database.addChangeListener</code></pre>
</div>
</div>
<div class="paragraph">
<p>As of version 2.6, Couchbase sometimes uses its own internal executor to run asynchronous client code.
While this is fine for small tasks, larger tasks&#8201;&#8212;&#8201;those that take significant compute time, or that perform I/O&#8201;&#8212;&#8201;can block Couchbase processing.
If this happens your application will fail with a <code>RejectedExecutionException</code> and it may be necessary to create a separate executor on which to run the large tasks.</p>
</div>
<div class="paragraph">
<p>The following examples show how to specify a separate executor in the client code.
The client code executor can enforce an application policy for delivery ordering and the number of threads.</p>
</div>
<div class="paragraph">
<p><strong>Guaranteed Order Delivery</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * This version guarantees in order delivery and is parsimonious with space
 * The listener does not need to be thread safe (at least as far as this code is concerned).
 * It will run on only thread (the Executor's thread) and must return from a given call
 * before the next call commences.  Events may be delivered arbitrarily late, though,
 * depending on how long it takes the listener to run.
 */
public class InOrderExample {
    private static final ExecutorService IN_ORDER_EXEC = Executors.newSingleThreadExecutor();

    public Replicator runReplicator(Database db1, Database db2, ReplicatorChangeListener listener)
        throws CouchbaseLiteException {
        ReplicatorConfiguration config = new ReplicatorConfiguration(db1, new DatabaseEndpoint(db2));
        config.setReplicatorType(ReplicatorConfiguration.ReplicatorType.PUSH_AND_PULL);
        config.setContinuous(false);

        Replicator repl = new Replicator(config);
        ListenerToken token = repl.addChangeListener(IN_ORDER_EXEC, listener::changed);

        repl.start();

        return repl;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Maximum Throughput</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>/**
 * This version maximizes throughput.  It will deliver change notifications as quickly
 * as CPU availability allows. It may deliver change notifications out of order.
 * Listeners must be thread safe because they may be called from multiple threads.
 * In fact, they must be re-entrant because a given listener may be running on mutiple threads
 * simultaneously.  In addition, when notifications swamp the processors, notifications awaiting
 * a processor will be queued as Threads, (instead of as Runnables) with accompanying memory
 * and GC impact.
 */
public class MaxThroughputExample {
    private static final ExecutorService MAX_THROUGHPUT_EXEC = Executors.newCachedThreadPool();

    public Replicator runReplicator(Database db1, Database db2, ReplicatorChangeListener listener)
        throws CouchbaseLiteException {
        ReplicatorConfiguration config = new ReplicatorConfiguration(db1, new DatabaseEndpoint(db2));
        config.setReplicatorType(ReplicatorConfiguration.ReplicatorType.PUSH_AND_PULL);
        config.setContinuous(false);

        Replicator repl = new Replicator(config);
        ListenerToken token = repl.addChangeListener(MAX_THROUGHPUT_EXEC, listener::changed);

        repl.start();

        return repl;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Extreme Configurability</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * This version demonstrates the extreme configurability of the CouchBase Lite replicator callback system.
 * It may deliver updates out of order and does require thread-safe and re-entrant listeners
 * (though it does correctly synchronizes tasks passed to it using a SynchronousQueue).
 * The thread pool executor shown here is configured for the sweet spot for number of threads per CPU.
 * In a real system, this single executor might be used by the entire application and be passed to
 * this module, thus establishing a reasonable app-wide threading policy.
 * In an emergency (Rejected Execution) it lazily creates a backup executor with an unbounded queue
 * in front of it.  It, thus, may deliver notifications late, as well as out of order.
 */
public class PolicyExample {
    private static final int CPUS = Runtime.getRuntime().availableProcessors();

    private static ThreadPoolExecutor BACKUP_EXEC;

    private static final RejectedExecutionHandler BACKUP_EXECUTION
        = new RejectedExecutionHandler() {
        public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {
            synchronized (this) {
                if (BACKUP_EXEC == null) { BACKUP_EXEC = createBackupExecutor(); }
            }
            BACKUP_EXEC.execute(r);
        }
    };

    private static ThreadPoolExecutor createBackupExecutor() {
        ThreadPoolExecutor exec
            = new ThreadPoolExecutor(CPUS + 1, 2 * CPUS + 1, 30, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());
        exec.allowCoreThreadTimeOut(true);
        return exec;
    }

    private static final ThreadPoolExecutor STANDARD_EXEC
        = new ThreadPoolExecutor(CPUS + 1, 2 * CPUS + 1, 30, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;());

    static { STANDARD_EXEC.setRejectedExecutionHandler(BACKUP_EXECUTION); }

    public Replicator runReplicator(Database db1, Database db2, ReplicatorChangeListener listener)
        throws CouchbaseLiteException {
        ReplicatorConfiguration config = new ReplicatorConfiguration(db1, new DatabaseEndpoint(db2));
        config.setReplicatorType(ReplicatorConfiguration.ReplicatorType.PUSH_AND_PULL);
        config.setContinuous(false);

        Replicator repl = new Replicator(config);
        ListenerToken token = repl.addChangeListener(STANDARD_EXEC, listener::changed);

        repl.start();

        return repl;
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As always, when there is a problem with replication, logging is your friend.
The following example increases the log output for activity related to replication with Sync Gateway.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication"><a class="anchor" href="#authentication"></a>Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$authentication.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-status"><a class="anchor" href="#replication-status"></a>Replication Status</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>replication.Status.Activity</code> property can be used to check the status of a replication.
For example, when the replication is actively transferring data and when it has stopped.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the different activity levels in the API and the meaning of each one.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STOPPED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replication is finished or hit a fatal error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OFFLINE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replicator is offline as the remote host is unreachable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONNECTING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replicator is connecting to the remote host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IDLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replication caught up with all the changes available from the server.
The <code>IDLE</code> state is only used in continuous replications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BUSY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replication is actively transferring data.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The replication change object also has properties to track the progress (<code>change.status.completed</code> and <code>change.status.total</code>).
But since the replication occurs in batches and the total count can vary through the course of a replication, those progress indicators are not very useful from the standpoint of an app user.
Hence, these should not be used for tracking the actual progress of the replication.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="handling-network-errors"><a class="anchor" href="#handling-network-errors"></a>Handling Network Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When <em>replicator</em> detects a network error it updates its status depending on the error type (permanent or temporary) and returns an appropriate HTTP error code.</p>
</div>
<div class="paragraph">
<p>The following code snippet adds a <code>Change Listener</code>, which monitors a replication for errors and logs the the returned error code.</p>
</div>
<div class="listingblock">
<div class="title">Monitoring for network errors</div>
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>For permanent network errors</strong> (for example, <code>404</code> not found, or <code>401</code> unauthorized):
<em>Replicator</em> will stop permanently, whether <code>setContinuous</code>  is <em>true</em> or <em>false</em>. Of course, it sets its status to <code>STOPPED</code></p>
</div>
<div class="paragraph">
<p><strong>For recoverable or temporary errors:</strong> <em>Replicator</em> sets its status to <code>OFFLINE</code>, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>setContinuous=<em>true</em></code> it retries the connection indefinitely</p>
</li>
<li>
<p>If <code>setContinuous=<em>false</em></code> (one-shot) it retries the connection a limited number of times.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following error codes are considered temporary by the Couchbase Lite replicator and thus will trigger a connection retry.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>408</code>: Request Timeout</p>
</li>
<li>
<p><code>429</code>: Too Many Requests</p>
</li>
<li>
<p><code>500</code>: Internal Server Error</p>
</li>
<li>
<p><code>502</code>: Bad Gateway</p>
</li>
<li>
<p><code>503</code>: Service Unavailable</p>
</li>
<li>
<p><code>504</code>: Gateway Timeout</p>
</li>
<li>
<p><code>1001</code>: DNS resolution error</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-events"><a class="anchor" href="#replication-events"></a>Replication Events</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="custom-headers"><a class="anchor" href="#custom-headers"></a>Custom Headers</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-checkpoint-reset"><a class="anchor" href="#replication-checkpoint-reset"></a>Replication Checkpoint Reset</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-filters"><a class="anchor" href="#replication-filters"></a>Replication Filters</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="handling-conflicts"><a class="anchor" href="#handling-conflicts"></a>Handling Conflicts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::partial$handling-conflicts.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="database-replicas"><a class="anchor" href="#database-replicas"></a>Database Replicas</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="certificate-pinning"><a class="anchor" href="#certificate-pinning"></a>Certificate Pinning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>include::partial$::{root-commons}cert-pinning.adoc</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="peer-to-peer-sync"><a class="anchor" href="#peer-to-peer-sync"></a>Peer-to-Peer Sync</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Enterprise Edition only</div>
Peer-to-peer sync is an <a href="https://www.couchbase.com/products/editions">Enterprise Edition</a> feature.
You must purchase the Enterprise License which includes official <a href="https://www.couchbase.com/support-policy">Couchbase Support</a> to use it in production (also see the <a href="https://www.couchbase.com/licensing-and-support-faq">FAQ</a>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Peer-to-peer sync allows devices running Couchbase Lite to directly sync data with each other.
As part of this, Couchbase Lite is responsible for storing the data and keeping track of the data exchange, but isn&#8217;t responsible for the data transfer itself.
Sending and receiving data must be handled by the platform APIs or a third party framework.
In this section, we will refer to these third party frameworks as communication frameworks.</p>
</div>
<div class="paragraph">
<p>Thus, to enable peer-to-peer sync with Couchbase Lite, the application must use the Communication Framework with Couchbase Lite.
The following sections describe a typical peer-to-peer workflow.
Where applicable, we discuss how to integrate Couchbase Lite into the workflow.</p>
</div>
<div class="paragraph">
<p>In Couchbase Lite, a peer can take on one of these two roles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Active Peer:</strong> The peer that initializes the connection and replication (i.e the "client" side).</p>
</li>
<li>
<p><strong>Passive Peer:</strong> The passive side reacts to things that it receives but does not initiate any communication on its own (i.e. the "server" side).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="peer-discovery"><a class="anchor" href="#peer-discovery"></a>Peer Discovery</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="peer-selection-and-connection-setup"><a class="anchor" href="#peer-selection-and-connection-setup"></a>Peer Selection and Connection Setup</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="replication-setup"><a class="anchor" href="#replication-setup"></a>Replication Setup</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="pushpull-replication"><a class="anchor" href="#pushpull-replication"></a>Push/Pull Replication</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="connection-teardown"><a class="anchor" href="#connection-teardown"></a>Connection Teardown</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="thread-safety"><a class="anchor" href="#thread-safety"></a>Thread Safety</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Couchbase Lite API is thread safe except for calls to mutable objects: <code>MutableDocument</code>, <code>MutableDictionary</code> and <code>MutableArray</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading"><a class="anchor" href="#upgrading"></a>UPGRADING</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="database"><a class="anchor" href="#database"></a>Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Databases created using Couchbase Lite 1.2 or later can still be used with Couchbase Lite 2.x; but will be automatically updated to the  current 2.x version.
This feature is only available for the default storage type (i.e., not a ForestDB database).
Additionally, the automatic migration feature does not support encrypted databases, so if the 1.x database is encrypted you will first need to disable encryption using the Couchbase Lite 1.x API (see the <a href="#1.4@{source-language}.adoc#database-encryption" class="page unresolved">1.x Database Guide</a>).</p>
</div>
<div class="sect2">
<h3 id="handling-of-existing-conflicts"><a class="anchor" href="#handling-of-existing-conflicts"></a>Handling of Existing Conflicts</h3>
<div class="paragraph">
<p>If there are existing conflicts in the 1.x database, the automatic upgrade process copies the default winning revision to the new database and does NOT copy any conflicting revisions.</p>
</div>
</div>
<div class="sect2">
<h3 id="handling-of-existing-attachments"><a class="anchor" href="#handling-of-existing-attachments"></a>Handling of Existing Attachments</h3>
<div class="paragraph">
<p>Attachments persisted in a 1.x database are copied to the new database.
NOTE: The relevant Couchbase Lite API is now called the <code>Blob</code> API not the <code>Attachments</code> API.</p>
</div>
<div class="paragraph">
<p>The functionally is identical but the internal schema for attachments has changed.
Blobs are stored anywhere in the document, just like other value types, whereas in 1.x they were stored under the <code>_attachments</code> field.
The automatic upgrade functionality <strong>does not</strong> update the internal schema for attachments, so they remain accessible under the <code>_attachments</code> field.
The following example shows how to retrieve an attachment that was created in a 1.x database with a 2.x API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-compatibility"><a class="anchor" href="#replication-compatibility"></a>Replication Compatibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The current replication protocol is not backwards compatible with the 1.x replication protocol.
Therefore, to use replication with Couchbase Lite 2.x, the target Sync Gateway instance must also be upgraded to 2.x.</p>
</div>
<div class="paragraph">
<p>Sync Gateway 2.x will continue to accept clients that connect through the 1.x protocol.
It will automatically use the 1.x replication protocol when a Couchbase Lite 1.x client connects through http://localhost:4984/db and the 2.x replication protocol when a Couchbase Lite 2.x client connects through ws://localhost:4984/db.
This allows for a smoother transition to get all your user base onto a version of your application built with Couchbase Lite 2.x.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-versions"><a class="anchor" href="#supported-versions"></a>SUPPORTED VERSIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Lite Java will be supported on x86 64-bit platforms. These are the targeted OS versions</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Table Supported OS Versions</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">OS</th>
<th class="tableblock halign-left valign-top">Version</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">RHEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop &amp; Web Service/Servlet (Tomcat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop &amp; Web Service/Servlet (Tomcat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">centOS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop &amp; Web Service/Servlet (Tomcat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop &amp; Web Service/Servlet (Tomcat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ubuntu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop &amp; Web Service/Servlet (Tomcat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GNU/Linux 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop &amp; Web Service/Servlet (Tomcat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microsoft Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Server 2012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web Service/Servlet (Tomcat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microsoft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Table Supported OS Versions (DEVELOPMENT &amp; TESTING ONLY)</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">OS</th>
<th class="tableblock halign-left valign-top">Version</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">macOS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macOS 10.12.6 (High Sierra)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop &amp; Web Service/Servlet (Tomcat)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="supplementary-information"><a class="anchor" href="#supplementary-information"></a>SUPPLEMENTARY INFORMATION</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="preparatory-steps"><a class="anchor" href="#preparatory-steps"></a>Preparatory Steps</h3>
<div class="paragraph">
<p><a id="bmkSetupSyncAndServer"></a></p>
</div>
<div class="paragraph">
<p><strong>Install {svr} and {sg}</strong></p>
</div>
<div class="paragraph">
<p>Before you can run any {product} Java app you will need to have runnable instances of {svr} and {sg}.
If you have not already done so:</p>
</div>
<div class="paragraph">
<p>Install <em>{svr}</em> and <em>{sg}</em> following steps outlined in <a href="../../../../sync-gateway/2.8/start/gs-sgw-install.html#installation" class="page">Installing Sync Gateway &#8594;</a></p>
</div>
<div class="paragraph">
<p><strong>Create the Getting Started App Database</strong></p>
</div>
<div class="olist {orderedList}">
<ol class="{orderedList}">
<li>
<p>Within {svr}, create a bucket named {nmSampleAppDb}</p>
<div class="paragraph">
<p>Follow the instructions <a href="../../../../sync-gateway/2.8/start/gs-sgw-install.html#creating-a-bucket" class="page">here</a></p>
</div>
</li>
<li>
<p>Create a RBAC user for {sg}</p>
<div class="paragraph">
<p>See instructions <a href="../../../../sync-gateway/2.8/start/gs-sgw-install.html#creating-an-rbac-user" class="page">here</a></p>
</div>
<div class="ulist {steps2}">
<ul class="{steps2}">
<li>
<p>Set username to <code>sync-gateway</code></p>
</li>
<li>
<p>Set password to <code>password</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
<div class="sect2">
<h3 id="using-downloaded-binaries"><a class="anchor" href="#using-downloaded-binaries"></a>Using Downloaded Binaries</h3>
<div class="paragraph">
<p><strong>Package Contents</strong></p>
</div>
<div class="paragraph">
<p>The download package contains a license file, jar libraries for the appropriate edition of the {cbl} and a set of Linux <em>shared libraries</em>.</p>
</div>
<div class="paragraph">
<p>Get the download package from the <a href="{url-cb-downloads-mobile}">{nmCBdwnlds}</a> page.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Community Edition&#8201;&#8212;&#8201;couchbase-lite-java-{version-full}</p>
</li>
<li>
<p>Enterprise Edition&#8201;&#8212;&#8201;couchbase-lite-java-ee-{version-full}</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When unpacked the package contains the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>lib</code> folder containing all necessary JAR files:</p>
<div class="ulist">
<ul>
<li>
<p>couchbase-lite-java-{version-full} or for EE couchbase-lite-java-ee-{version-full}</p>
</li>
<li>
<p>json-20180813.jar</p>
</li>
<li>
<p>okhttp-3.9.1.jar</p>
</li>
<li>
<p>okio-1.13.0.jar</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <code>support</code> folder containing the Linux native libraries:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This means you do not need to download and-or build compatible versions of system libraries for the Linux platform of choice.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>libz</code> (requires zlib v.1.2.11+)</p>
</li>
<li>
<p><code>libC&#43;&#43;</code> requires libc++ v.3.6.0+)</p>
</li>
<li>
<p><code>libicu</code> (requires ICU4C v.5.4.1+)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Go back to <a href="#get-started">GET STARTED</a></p>
</div>
<div class="paragraph">
<p><strong>Steps</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the <em>zip</em> file from the <a href="{url-cb-downloads-mobile}">{nmCBdwnlds}</a> page.</p>
</li>
<li>
<p>Unpack the downloaded file to a location accessible to&#8201;&#8212;&#8201;and usable by&#8201;&#8212;&#8201;your chosen <strong>build</strong> environment.</p>
<div class="paragraph">
<p>We&#8217;ll refer to that location&#8201;&#8212;&#8201;<code>&lt;your dir&gt;/couchbase-lite-java-{version-full}</code>&#8201;&#8212;&#8201;as the <code>&lt;pathToCbl&gt;</code>.</p>
</div>
</li>
<li>
<p>Include the following dependency in your <code>build.gradle</code> file, you can remove any {cbl} Maven references:</p>
<div class="listingblock">
<div class="content">
<pre>Dependencies {
  implementation fileTree(include: ['*.jar'], dir: &lt;pathToCbl&gt;/lib&gt;
}</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Where &lt;pathToCbl&gt; is the location of the downloaded {cbl} library.</p>
</div>
<div class="listingblock">
<div class="title">Sample build gradle</div>
<div class="content">
<pre>Unresolved include directive in modules/java/pages/start/java-platform.adoc - include::{snippet-java-jvm}[]</pre>
</div>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
<div class="sect2">
<h3 id="additional-steps-for-linux"><a class="anchor" href="#additional-steps-for-linux"></a>Additional Steps for Linux</h3>
<div class="paragraph">
<p><a id="bmkLinuxSharedLibs"></a>
In addition to setting-up your build environment, you also need to make the supplied native libraries (<code>&lt;pathToCbl/support</code>) available:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These libraries are provided only in the <code>.zip</code> distributable.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the <em>native libraries</em> (<code>&lt;pathToCbl&gt;/support</code>) to a location accessible to&#8201;&#8212;&#8201;and usable by&#8201;&#8212;&#8201;your build and runtime environments.</p>
</li>
<li>
<p>Add the following libraries to the <code>LD_LIBRARY_PATH</code> in `$CATALINA_BASE/bin/setenv.sh:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the setenv.sh file doesn’t exist, you will need to create a new file.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">export LD_LIBRARY_PATH=&lt;pathToCbl&gt;/support/linux/x86_64/libicu:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH=&lt;pathToCbl&gt;/support/linux/x86_64/libz:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH=&lt;pathToCbl&gt;/support/linux/x86_64/libc++:$LD_LIBRARY_PATH</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please refer to the Linux Platform Support section for the minimum version requirements of those libraries.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
<div class="sect2">
<h3 id="using-the-gradle-webapp-plugin"><a class="anchor" href="#using-the-gradle-webapp-plugin"></a>Using the Gradle WebApp Plugin</h3>
<div class="paragraph">
<p>The simplest way to build and deploy your {product} Java web app is to use a {gpBuildTool} plugin that provides a simple {gpWebServerEnv} harness.</p>
</div>
<div class="paragraph">
<p>Our examples are based on the <code>com.bmuschko.tomcat</code> plugin&#8201;&#8212;&#8201;see <a href="https://github.com/bmuschko/gradle-tomcat-plugin">com.bmuschko.tomcat on Github</a>.</p>
</div>
<div class="paragraph">
<p>Including the plugin in your <code>build.gradle</code> file make a number of tomcat tasks available to you. View them using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">./gradlew tasks</code></pre>
</div>
</div>
<div class="paragraph">
<p>This shows that the following web application tasks are now available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tomcatJasper</code> - Runs the JSP compiler and turns JSP pages into Java source.</p>
</li>
<li>
<p><code>tomcatRun</code> - Uses your files as and where they are and deploys them to Tomcat.</p>
</li>
<li>
<p><code>tomcatRunWar</code> - Assembles the web app into a war and deploys it to Tomcat.</p>
</li>
<li>
<p><code>tomcatStop</code> - Stops Tomcat.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, to run the app use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>tomcatRun</pre>
</div>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
<div class="sect2">
<h3 id="about-the-getting-started-app"><a class="anchor" href="#about-the-getting-started-app"></a>About the Getting Started App</h3>
<div class="paragraph">
<p><a id="bmkAboutGettingStarted"></a>
The {nmMobStarterApp} app will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a database</p>
<div class="paragraph">
<p>The app creates its database in the <code>{nmSampleAppDbPath}</code> directory relative to its root location when run (See: <a href="#finding-a-database-file">Finding a Database File</a>).</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Explicitly state your required database location when creating your database (see: <a href="#finding-a-database-file">Finding a Database File</a> for how to do this)
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Add content to the DB</p>
</li>
<li>
<p>Run a simple query counting the DB rows</p>
</li>
<li>
<p>Start a one-shot, bi-directional replication using {sg} and {svr}</p>
</li>
<li>
<p>Produce a simple report on the db Contents</p>
<div class="imageblock">
<div class="content">
<img src="../_images/cblOutput.png" alt="cblOutput" width="400">
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Before starting your app ensure you have started both your {svr} and {sg} instances.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Back to <a href="#building-a-getting-started-app">Building a Getting Started App</a></p>
</div>
</div>
<div class="sect2">
<h3 id="deploying-a-war-file-to-tomcat"><a class="anchor" href="#deploying-a-war-file-to-tomcat"></a>Deploying a WAR file to tomcat</h3>
<div class="paragraph">
<p>If you want to deploy your web app to a local Tomcat instance then you will need to generate a WAR file.
However, you should note that when creating a war file, if you use the <code>implementation</code> dependency type then your <em>Couchbase Lite</em> jar files will be bundled into WEB-INF/lib of the web application.
To exclude Couchbase Lite jar files from getting bundled and to use Couchbase Lite in multiple web applications, change the dependency type from <strong><code>implementation</code></strong> to <strong><code>providedCompile</code></strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can do this using the Gradle command below from within your project folder:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">./gradlew war</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The generated war file will be at &lt;PROJECT ROOT&gt;/build/libs.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Deploy the war file to Tomcat, by copying it to $CATALINA_BASE/webapps</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also use Tomcat’s Manager App to deploy the war file&#8201;&#8212;&#8201;see <a href="https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html">tomcat&#8217;s Manager App</a> documentation for more detail.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>To use common class loader approach to load Couchbase Lite libraries, copy all of the Couchbase Lite jar files in $CATALINA_BASE/lib.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For linux platform see also&#8201;&#8212;&#8201;<a href="#additional-steps-for-linux">Additional Steps for Linux</a>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes"><a class="anchor" href="#release-notes"></a>RELEASE NOTES</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="2-7-1"><a class="anchor" href="#2-7-1"></a>2.7.1</h3>
<div class="sect3">
<h4 id="fixed"><a class="anchor" href="#fixed"></a>{fixed}</h4>
<div class="paragraph">
<p>This maintenance release fixes the following issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-799"><strong>CBL-799</strong></a> Crash calling pull validator callback</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-789"><strong>CBL-789</strong></a> Crash when accessing <code>connection&#8594;name()</code></p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-701"><strong>CBL-701</strong></a> Pending Document IDs not working correctly</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-698"><strong>CBL-698</strong></a> Wrong query evaluation using expression values instead of expression properties</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-657"><strong>CBL-657</strong></a> LIKE and CONTAINS are much slower in 2.7</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-581"><strong>CBL-581</strong></a> Native memory leak when save document repeatedly​</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-579"><strong>CBL-579</strong></a> SDK fails for opening Database files over 2GB</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ke"><a class="anchor" href="#ke"></a>{ke}</h4>
<div class="paragraph">
<p>The following issues document known errors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-647"><strong>CBL-637</strong></a> Java Console app doesn&#8217;t exit</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-370"><strong>CBL-370</strong></a> 370	Broken API, Kotlin: Unable to import ReplicatorType</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-216"><strong>CBL-216</strong></a> Ordering null values inconsistent with N1QL expectations</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-95"><strong>CBL-95</strong></a> Pending conflicts could be resolved by a wrong replicator</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/CBL-49"><strong>CBL-49</strong></a> Need a way to distinguish boolean types</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="2-7-0"><a class="anchor" href="#2-7-0"></a>2.7.0</h3>
<div class="paragraph">
<p><strong>{nftr}</strong></p>
</div>
<div class="paragraph">
<p>New at this release is the Java Platform, which enables development of Java apps on any platform that supports the JVM model</p>
</div>
<div class="paragraph">
<p><a href="#:index.adoc" class="page unresolved">{more}</a></p>
</div>
<div class="paragraph">
<p><strong>{ke}</strong></p>
</div>
<div class="paragraph">
<p>{natt}</p>
</div>
<div class="paragraph">
<p><strong>{fixed}</strong></p>
</div>
<div class="paragraph">
<p>{natt}</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2020 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
