<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Inter-Cluster Replication (SGR-1) | Couchbase Docs</title>
<link rel="canonical" href="https://ibsoln.github.io/stage/TEST/sync-gateway/2.8/learn/icr-sgreplicate-sgr1.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Inter-sync-gateway replication (Sync Gateway to Sync Gateway) using SG-Replicate1.0 protocol">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="sync-gateway">
<meta name="dcterms.identifier" content="2.8">
<meta name="generator" content="Antora 2.3.3">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">

              <a class="navbar-brand" href="../../..">
                <img src="../../../_/img/couchbase-documentation-logo.svg" alt="Couchbase" />
              </a>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <div class="parent-site">
                  <a href="https://www.couchbase.com">
                    Couchbase.com
                  </a>
                </div>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Try Free
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
<div class="left-sidebar-menu">
<div class="version-control-box">
<div class="component-frame">
<div class="frame-icon">
<img src="../../../_/img/server-icon.png" alt="">
</div>
<div class="frame-body">
<h4 class="title"><span class="">SGW.91520b</span></h4>
<a class="navbar-item component" href="../introduction.html"> <span class="version">2.8</span></a>
</div>
</div>
</div>
<div class="nav-menu">
<ul class="nav-list">
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../introduction.html">Introduction</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../sgw-whatsnew.html">What&#8217;s New</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-prereqs.html">Before You Start</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-svr-cfg.html">Configure Server for SGW</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-install.html">Install SGW</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-config.html">Configure SGW</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../start/gs-sgw-api-access.html">Test the Installation</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Advance</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Cloud-to-Edge Operations</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-running.html">Initialize Inter-sync-gateway Replication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-conflict-resolution-build-custom.html">Build a Custom Conflict Resolver</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-admin.html">Manage inter-sync-gateway replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-monitoring.html">Monitoring Inter-sync-gateway replications</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-sgreplicate.html">&#8230;&#8203; view the Concept</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/config-properties.html">&#8230;&#8203; view Configuration reference</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Configure</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/adv-sgw-cfg-sync-function.html">Use Sync functions?</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/adv-sgw-cfg-import-filter.html">Use Import filters?</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/adv-rest-api-client.html">Use the REST API?</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Manage</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Statistics and Logging</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../advance/logging.html">Use the Logging API</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../stats-monitoring.html">View Statistics and Metrics</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../sgcollect-info.html">Collect Node Statistics</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../deployment.html">Deploy</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../command-line-options.html">Use Command Line Configuration</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../security.html">Security Best Practices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../load-balancer.html">Use a Load Balancer</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../os-level-tuning.html">Tune Operating System Parameters</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../database-offline.html">Taking Databases Offline and Online</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../upgrade.html">Notes on Upgrading</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Kubernetes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/kubernetes/deploy-cluster.html">Deploy SGW Clusters</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#operator::tutorial-sync-gateway-manage.adoc">Manage a Sync Gateway Cluster</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#operator::tutorial-sync-gateway-clients.adoc">Expose Sync Gateway to Couchbase Lite clients</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../shared-bucket-access.html">Mobile-Server Replication Concept</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Access Control Concepts</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="users-and-roles.html">Users and Roles</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="authentication.html">Authentication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="sync-gateway-channels.html">Sync Gateway Channels</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="read-access.html">Read Access</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="write-access.html">Write Access</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="defining-sync-functions.html">Defining Sync Functions</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Cloud-to-Edge Concepts</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-sgreplicate.html">Inter-sync-gateway replication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-sgreplicate-sgr2.html">Inter-sync-gateway Replication vn:2</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/config-properties.html">&#8230;&#8203; view Configuration reference</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-running.html">&#8230;&#8203; view the How-to</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Replication Concepts</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="concept-fundamentals-data.html">Mobile data learn/concepts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../resolving-conflicts.html">Conflict Resolution</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#sync-gateway::learn/concept-fundamentals-logging.adoc">Logging</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="concept-fundamentals-data-tombstones.html">Tombstones</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../managing-tombstones.html">Managing Tombstones</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../data-modeling.html">Data Modeling</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../indexing.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../server-integration.html">Webhooks and Changes Feed</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../integrating-external-stores.html">Integrating External Stores</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Refer</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../refer/config-properties.html">Configuration Details</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Sync Gateway API</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/rest-api-public.html">Public REST API</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/rest-api-admin.html">Admin REST API</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../refer/refer-sgw-glossary.html">Sync Gateway Glossary</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-sgreplicate.html">&#8230;&#8203; view the Concept</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-running.html">&#8230;&#8203; view the How-to</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../prodnotes/pn-change-log-config.html">Configuration Change Log</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Exit to . . .</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../home/mobile.html">back to Mobile</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../couchbase-lite/2.8/introduction.html">go to Couchbase Lite</a>
</span>
</li>
</ul>
</li>
</ul>
</div>
<a href="#" class="menu-expand-toggle"> <span>Navigation</span> <i class="fas fa-times-circle"></i> <i class="fas fa-chevron-circle-left"></i></a>
</div></nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
      <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/ianbridge/CouchbaseDocs/bau/sgw/modules/ROOT/pages/learn/icr-sgreplicate-sgr1.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
      <div class="toc-menu"></div>
        <div class="is-this-helpful-box">
          <h4> Is this page helpful?</h4>
            <div class="btn-row">
              <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                     <i class="far fa-thumbs-up"></i>
                 Yes

                 </a>
              <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
            </div>
            <div class="any-feedback">
              <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
            </div>
            <div class="dialog-box" id="dialogBox">
              <form>
                  <div class="form-group " id="additionalFeedbackBox">
                    <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

                    <div class="action-btn-row ">
                      <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                       <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                       <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
                    </div>


                  </div>

              </form>

            </div>
      </div>
   </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction.html">SGW.91520b</a></li>
<li class="crumb"><a href="icr-sgreplicate-sgr1.html">Inter-Cluster Replication (SGR-1)</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Inter-Cluster Replication (SGR-1)</h1>
<div class="labels">
<ul>
<li class="edition"><a href="https://www.couchbase.com/products/editions">Under Development</a></li>
<li class="status"><span>stage -- {release-comments-sgw}</span></li>
</ul>
</div>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>Topic Group&#8201;&#8212;&#8201;<em>Inter-sync-gateway Replication</em><br>
Description&#8201;&#8212;&#8201;<em>Inter-sync-gateway replication (Sync Gateway to Sync Gateway) using SG-Replicate1.0 protocol</em><br>
Related Content&#8201;&#8212;&#8201;<a href="../refer/config-properties.html" class="page">Configuration Details</a> | <a href="../refer/rest-api-admin.html" class="page">Admin REST API</a></p>
</div>
</blockquote>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
This content covers inter-sync-gateway replication using the Inter-sync-gateway Replication (v1) protocol.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-characteristics"><a class="anchor" href="#replication-characteristics"></a>Replication Characteristics</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="protocol" class="sect0"><a class="anchor" href="#protocol"></a>Protocol</h1>
<div class="paragraph">
<p>Sync Gateway supports the ability to run replications between two Sync Gateway clusters using Inter-sync-gateway Replication (v1) (SGR-1).</p>
</div>
<div class="paragraph">
<p>SGR-1 replications are HTTP(s)-based.</p>
</div>
<div class="paragraph">
<p>One-shot replications are always run asynchronously even if the <code>async</code> property is not set to true.</p>
</div>
<div class="paragraph">
<p>Replications always run on their initializing node.</p>
</div>
<div class="sect2">
<h3 id="types-of-replication"><a class="anchor" href="#types-of-replication"></a>Types of Replication</h3>
<div class="paragraph">
<p>Replications are either: <a href="../refer/refer-sgw-glossary.html#adhoc-replication" class="page">adhoc replication<span class="image"><img src="../_images/icons/glossaryIconImage2.svg" alt="glossary icon" width="14"></span></a> (REST API only) or <a href="../refer/refer-sgw-glossary.html#persistent-replication" class="page">persistent replication<span class="image"><img src="../_images/icons/glossaryIconImage2.svg" alt="glossary icon" width="14"></span></a>.
They can also be configured to run in one of two-modes: <a href="../refer/refer-sgw-glossary.html#rep-continuous" class="page">continuous<span class="image"><img src="../_images/icons/glossaryIconImage2.svg" alt="glossary icon" width="14"></span></a> or <a href="../refer/refer-sgw-glossary.html#rep-oneshot" class="page">one-shot<span class="image"><img src="../_images/icons/glossaryIconImage2.svg" alt="glossary icon" width="14"></span></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="granularity"><a class="anchor" href="#granularity"></a>Granularity</h3>
<div class="paragraph">
<p>Replications take place at document level with routing provided by channel filtering where required.</p>
</div>
</div>
<div class="sect2">
<h3 id="directionality"><a class="anchor" href="#directionality"></a>Directionality</h3>
<div class="paragraph">
<p>Replications are uni-directional between two Sync Gateway databases (local or remote).
You can achieve bi-directional replication by running multiple replications  simultaneously.
For example by running a Pull on database <em>A</em> from <em>B</em> and concurrently a Pull on <em>B</em> from <em>A</em>.</p>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="anchor" href="#security"></a>Security</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="authentication"><a class="anchor" href="#authentication"></a>Authentication</h3>
<div class="paragraph">
<p>Under SGR01 inter-sync-gateway replications are HTTP(s)-based.</p>
</div>
</div>
<div class="sect2">
<h3 id="access-control"><a class="anchor" href="#access-control"></a>Access Control</h3>
<div class="paragraph">
<p>Access control is achieved by using the <em>Sync function</em> together with the security credentials (user name and password).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Author&#8217;s Note</div>
<div class="paragraph">
<p>Include an example sync function demonstrating this.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="availability-and-resilience"><a class="anchor" href="#availability-and-resilience"></a>Availability and Resilience</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="high-availability"><a class="anchor" href="#high-availability"></a>High Availability</h3>
<div class="paragraph">
<p>A measure of high-availability can be achieved by running a replication on multiple nodes in the cluster, although this result in redundant processing.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="network-resilience"><a class="anchor" href="#network-resilience"></a>Network Resilience</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Network resiliency is built-in for <em>continuous</em> replications, which will restart automatically whenever the node does and will retry lost connections every 500ms indefinitely.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="initialization"><a class="anchor" href="#initialization"></a>Initialization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As covered in <a href="icr-sgreplicate.html#initialization" class="page">[Inter Sync Gateway Replication</a>],
replications are defined by a <a href="../refer/refer-sgw-glossary.html#replication-definition" class="page">replication definition<span class="image"><img src="../_images/icons/glossaryIconImage2.svg" alt="glossary icon" width="14"></span></a> in either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The JSON configuration file (<code>sync-gateway-config.json</code>) for <em>persistent</em> replications (<em>continuous</em> or <em>one-shot</em>)&#8201;&#8212;&#8201;see: <a href="#running-configured-replications">Running Configured Replications</a></p>
</li>
<li>
<p>The  REST API for <em>ad hoc</em> replications (one-shot only)&#8201;&#8212;&#8201;see: <a href="#running-rest-api-initialized-replications">Running REST API Initialized Replications</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-definitions"><a class="anchor" href="#replication-definitions"></a>Replication Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All replications are 'initialized' by a <a href="../refer/refer-sgw-glossary.html#replication-definition" class="page">replication definition<span class="image"><img src="../_images/icons/glossaryIconImage2.svg" alt="glossary icon" width="14"></span></a> in the configuration file or Admin REST API.
For SGR-1 <em>replications definition</em> are at Sync Gateway level&#8201;&#8212;&#8201;see: <a href="#replication-definition-elements">Table 1</a>.</p>
</div>
<table id="replication-definition-elements" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Replication Definition Elements</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 16.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Required.</em> A URL pointing to the source database for the replication, the URL may be relative i.e. just the name of a local database on the Sync Gateway instance.
The URL may point to the Admin REST API which will replicate all documents in the DB, or it may point to the public REST API which will only copy documents in the users assigned channels.
When specifying credentials, the URL must be of the form <code>user:password@host</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Required.</em> A URL pointing to the target database for the replication, the URL may be relative i.e. just the name of a local database on the Sync Gateway instance.
The URL may point to the Admin REST API or it may point to the public REST API, this will impact the behavior of the target database sync function.
When specifying credentials, the URL must be of the form <code>user:password@host</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>continuous</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional.</em> Indicates whether the replication should be a one-shot or continuous replication.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional.</em> Passes the name of filter to apply to the source documents, currently the only supported filter is "sync_gateway/bychannel", this will replicate documents only from the set of named channels.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query_params</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional.</em> Passes parameters to the filter, for the "sync_gateway/bychannel" filter the value should be an array or channel names (JSON strings).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cancel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional.</em> Indicates that a running replication task should be canceled, the running task is identified by passing its <code>replication_id</code> or by passing the original source and target values.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>replication_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional.</em> If the cancel parameter is true then this is the id of the active replication task to be canceled, otherwise this is the <code>replication_id</code> to be used for the new replication.
If no replication_id is given for a new replication it will be assigned a random UUID.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>async</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional.</em> Indicates that a one-shot replication should be run asynchronously and the request should return immediately.
Replication progress can be monitored by using the <code>_active_tasks</code> resource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes_feed_limit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional.</em> The maximum number of change entries to pull in each loop of a continuous changes feed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="running-configured-replications"><a class="anchor" href="#running-configured-replications"></a>Running Configured Replications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All replications in the Sync Gateway configuration file will auto-start when Sync Gateway starts.
For replication definition parameters/properties&#8201;&#8212;&#8201;see: <a href="#replication-definitions">Replication Definitions</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
One-shot replications that reference local databases (as source or target) will start after a short delay (5 seconds) to allow the local REST APIs to start.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 1. Running a replication on startup</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "log":["*"],
    "replications":[
        {
            "source": "db",
            "target": "db-copy"
        },
        {
            "source": "db",
            "target": "http://user:password@example.com:4985/db-copy"
        },
        {
            "replication_id":"continuous-remote-local",
            "source": "http://user:password@example.com:4985/db-backup",
            "target": "db"
            "continuous":true
        },
        {
            "replication_id":"continuous-filtered",
            "source": "db",
            "target": "http://user:password@example.com:4985/db-copy"
            "continuous":true,
            "changes_feed_limit":1000,
            "filter":"sync_gateway/bychannel",
            "query_params":["channel1","channel2"]
        }
    ],
    "databases": {
        "db": {
            "server": "http://localhost:8091",
            "bucket": "db",
            "users": {
                "GUEST": {"disabled": false, "admin_channels": ["*"]}
            }
        },
        "db-copy": {
            "server": "http://localhost:8091",
            "bucket": "db-copy",
            "users": {
                "GUEST": {"disabled": false, "admin_channels": ["*"]}
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-rest-api-initialized-replications"><a class="anchor" href="#running-rest-api-initialized-replications"></a>Running REST API Initialized Replications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST API replications are initialized and run by sending a <code>POST</code> request to the server endpoint <code>_replicate</code>, with a request body comprising a JSON object containing the replication definition&#8217;s parameters.</p>
</div>
<div class="paragraph">
<p>Both one-shot and continuous replications can be run in this way.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When running multiple replications on a Sync Gateway database both source and target databases must use identical <em>sync functions</em>, otherwise it could lead to unexpected behavior.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 2. Running replications via the API</div>
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_one-shot-local"></a>One-shot (local)</p>
</li>
<li>
<p><a id="tabset1_one-shot"></a>One-shot</p>
</li>
<li>
<p><a id="tabset1_continuous"></a>Continuous</p>
</li>
<li>
<p><a id="tabset1_continuous-batched-and-filtered"></a>Continuous (batched and filtered)</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_one-shot-local">
<div class="paragraph">
<p>These parameters start a one-shot replication between two databases on the local Sync Gateway instance.
The request will block until the replication has completed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "source": "db",
  "target": "db-copy"
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_one-shot">
<div class="paragraph">
<p>These parameters start a one-shot replication between one database on the local Sync Gateway instance and one on a remote Sync Gateway instance, with user credentials.
The request will return immediately and the replication will run asynchronously.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "source": "db",
    "target": "http://user:password@example.com:4985/db-copy",
    "async":true
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_continuous">
<div class="paragraph">
<p>These parameters start a continuous replication between one database on the local Sync Gateway instance and one on a remote Sync Gateway instance with the user provided <code>replication_id</code>.
The request will return immediately and the replication will run asynchronously.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "replication_id":"my-named-replication",
    "source": "db",
    "target": "http://user:password@example.com:4985/db-copy",
    "continuous":true
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_continuous-batched-and-filtered">
<div class="paragraph">
<p>These parameters start a continuous replication between one database on the local Sync Gateway instance and one on a remote Sync Gateway instance.
The replicator will batch up to 1000 revisions at a time, this will improve replication performance but will use more memory resources.
Source database documents will be filtered so that only those tagged with the channel names "channel1" or "channel2" are replicated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "source": "db",
    "target": "http://user:password@example.com:4985/db-copy",
    "continuous":true,
    "changes_feed_limit":1000,
    "filter":"sync_gateway/bychannel",
    "query_params":["channel1","channel2"]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="monitoring-replications"><a class="anchor" href="#monitoring-replications"></a>Monitoring Replications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Use <code>_active_tasks</code> to monitor Inter-sync-gateway Replication (v1) replications  (<code>GET</code>)</p>
<div class="paragraph">
<p>The content returned will be the same as that returned by <code>_replicationStatus</code> and contains additional content over the Inter-sync-gateway Replication (v1) version:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>direction</p>
</li>
<li>
<p>is_persistent</p>
</li>
<li>
<p>status (stopped/running).</p>
</li>
<li>
<p>last_seq_push</p>
</li>
<li>
<p>last_seq_pull</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default a simple one-shot replication blocks until it is complete and returns the stats for the completed task.
Async one-shot and continuous replications return immediately with the in flight task stats.</p>
</div>
<div class="paragraph">
<p>You can get a list of active replication tasks by sending a GET request to the <code>_active_tasks</code> endpoint, this will return a list of all running one-shot and continuous replications for the current Sync Gateway instance.</p>
</div>
<div class="paragraph">
<p>The response is a JSON array of active task objects, each object contains the original request parameters for the replication, a unique <code>replication_id</code> and some stats for the replication instance.
The list of returned stats and their meaning can be found on the API reference of the <a href="#admin-rest-api.adoc#/server/get\__active_tasks" class="page unresolved"><code>_active_tasks</code></a> endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">[
    {
        "type":"replication",
        "replication_id":"6a4924c24424b635a80f50cd660fb192",
        "continuous":true,
        "source":"http://example.com:4985/source",
        "target":"http://example.com:4985/target",
        "docs_read":0,
        "docs_written":0,
        "doc_write_failures":0,
        "end_last_seq":null
    },
    {
        "type":"replication",
        "replication_id":"active-to-backup",
        "continuous":true,
        "source":"http://example2.com:4985/active",
        "target":"http://example2.com:4985/backup",
        "docs_read":1000,
        "docs_written":850,
        "doc_write_failures":10,
        "end_last_seq":25680
    }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="canceling-replications"><a class="anchor" href="#canceling-replications"></a>Canceling replications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An active replication task is canceled by sending a POST request to the server endpoint <code>_replicate</code>, with a JSON object.
The JSON object must contain the <code>cancel</code> property set to true and either a valid <code>replication_id</code> or the identical source, target and continuous values used to start the replication.</p>
</div>
<div class="paragraph">
<p>This will cancel an active replication with a <code>replication_id</code> of "my-one-shot-replication", the <code>replication_id</code> value can be obtained by sending a request to <code>_active_tasks</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "cancel": true,
    "replication_id": "my-one-shot-replication"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will cancel a replication that was started with same "source" and "target" values as those in the cancel request.
By omitting the "continuous" property it&#8217;s value will default to <strong>false</strong>, a replication must also have been started as a one-shot to match.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "cancel":true,
    "source": "db",
    "target": "db-copy"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When an active task is canceled, the response returns the stats of the replication up to the point when it was stopped.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "type":"replication",
    "replication_id":"3791d562153505408e0b2730603ed7c1",
    "continuous":true,
    "source":"http://0.0.0.0:4985/source",
    "target":"http://0.0.0.0:4985/target",
    "docs_read":12,
    "docs_written":12,
    "doc_write_failures":0,
    "start_last_seq":0,
    "end_last_seq":"28"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication-statistics"><a class="anchor" href="#replication-statistics"></a>Replication Statistics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/learn/icr-sgreplicate-sgr1.adoc - include::partial$icr-api-expvars-GET.adoc[]</p>
</div>
<div class="paragraph">
<p>Use the <code>_expvars</code> Admin REST API to access following stats:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">SGR1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_num_attachment_bytes_transferred": 0,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_num_attachments_transferred": 0,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_num_docs_failed_to_push": 0,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_num_docs_failed_to_push_access": 0,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_num_docs_pushed":</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_delta_pull_replication_count"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_delta_push_doc_count"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_deltas_requested":</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"sgr_deltas_sent":</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sgr_conflict_delected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sgr_conflict_resolved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sgw_conflict_skipped_error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT APPLICABLE</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="constraints"><a class="anchor" href="#constraints"></a>Constraints</h2>
<div class="sectionbody">
<div class="ulist temporary holding">
<ul class="temporary holding">
<li>
<p>Can only replicates SG databases that are hosted on recent versions of Sync Gateway (after commit 50d30eb3d on March 7, 2014)</p>
</li>
<li>
<p>In deployments with multiple Sync Gateway nodes, only <em>one</em> of the Sync Gateways should be configured for replications.
If multiple Sync Gateways are configured for replications, it could substantially increase the amount of duplicate work, and therefore should be avoided.
The limitation is that the system is not guaranteed to be Highly Available: if the Sync Gateway that is chosen to drive the replication goes down or is otherwise removed from the system, then the replications will stop.</p>
</li>
<li>
<p>Replication between Sync Gateway databases doesn&#8217;t support automatic conflict resolution even when the no-conflicts mode is enabled (i.e <a href="#config-properties.adoc#databases-foo_db-allow_conflicts" class="page unresolved">"allow_conflicts": false</a>).
When running two Sync Gateway clusters with the no-conflicts mode enabled, cross-cluster document conflicts will result in that document no longer being replicated.
Deployments  must implement a custom conflict resolver in an external app as specified <a href="../resolving-conflicts.html" class="page">here</a>.
To avoid this, the application must ensure concurrent, cross-cluster updates are not made to a given document.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="card-row three-column-row">
<div class="sect5 column">
<h6 id=""><a class="anchor" href="#"></a></h6>
<div class="ulist">
<div class="title">Learn more ...</div>
<ul>
<li>
<p><a href="icr-sgreplicate.html" class="page">Inter-sync-gateway replication</a></p>
</li>
<li>
<p><a href="icr-sgreplicate-sgr2.html" class="page">Inter-sync-gateway Replication vn:2</a></p>
</li>
<li>
<p><a href="icr-sgreplicate-sgr1.html" class="page">Inter-sync-gateway replication vn:1</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-2"><a class="anchor" href="#-2"></a></h6>
<div class="ulist">
<div class="title">Reference material ...</div>
<ul>
<li>
<p><a href="../refer/config-properties.html" class="page">Configuration Details</a></p>
</li>
<li>
<p><a href="../refer/rest-api-public.html" class="page">Public REST API</a></p>
</li>
<li>
<p><a href="../refer/rest-api-admin.html" class="page">Admin REST API</a></p>
</li>
<li>
<p><a href="../advance/adv-rest-api-client.html" class="page">Use the REST API?</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-3"><a class="anchor" href="#-3"></a></h6>
<div class="ulist">
<div class="title">Community Resources ...</div>
<ul>
<li>
<p><a href="https://forums.couchbase.com/c/mobile/14">Forum</a>  <strong>|</strong>  <a href="https://blog.couchbase.com/">Blog</a>   <strong>|</strong>  <a href="https://docs.couchbase.com/tutorials/index.html">Tutorials</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Conflict Related Blogs</div>
<ul>
<li>
<p><a href="https://blog.couchbase.com/document-conflicts-couchbase-mobile/">Automatic Conflict Resolution</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/conflict-resolution-couchbase-mobile/">Demystifying Conflict Resolution</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/tag/conflict-resolution/">Conflict Resolution (category)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2020 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
